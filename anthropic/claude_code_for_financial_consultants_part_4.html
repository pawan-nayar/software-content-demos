<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 4: CLAUDE.md Context File | Claude Code for Financial Consultants</title>
    <meta name="description" content="Learn to brief Claude Code with CLAUDE.md for consistent, context-aware consulting outputs. Build context habits that scale into strategy.">
    <meta name="keywords" content="Claude Code tutorial, CLAUDE.md file, AI consulting context, project briefing, Anthropic">
    <meta name="author" content="Cretorial">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Module 4: Teaching Claude About Your Project">
    <meta property="og:description" content="Use CLAUDE.md to create consistent, context-aware AI outputs.">
    <meta property="og:image" content="https://example.com/module4-preview.jpg">
    <meta property="og:url" content="https://example.com/claude-code-module-4">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Module 4: CLAUDE.md Context File">
    <meta property="twitter:description" content="Scale your consulting intelligence with project context files.">
    <meta property="twitter:image" content="https://example.com/module4-preview.jpg">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
      :root {
        --text: #212529; --bg: #ffffff; --muted: #f8f9fa; --border: #dee2e6;
        --accent: #fd7e14; --accent-2: #e87312; --accent-soft: #fff7ed;
        --header-bg: #212529; --header-fg: #f8f9fa;
        --ok: #198754; --ok-soft: #d1e7dd; --bad: #dc3545; --bad-soft: #f8d7da;
        --info: #0d6efd; --info-soft: #cfe2ff;
        --code-bg: #2d2d2d;
        --goal-color: #0d6efd; --tone-color: #6f42c1; --data-color: #198754; --guardrail-color: #dc3545;
        
        /* STANDARDIZED 4-COLOR CALLOUT SYSTEM (for consistency across all colored boxes) */
        /* 1. INFO (Blue) - Neutral information, tips, explanations */
        --info-bg: #eff6ff; --info-border: #3b82f6; --info-text: #1e40af; --info-text-light: #1e3a8a;
        /* 2. SUCCESS (Green) - Positive examples, "fast way", good practices */
        --success-bg: #f0fdf4; --success-border: #22c55e; --success-text: #15803d; --success-text-dark: #166534;
        /* 3. WARNING (Yellow) - Important notes, cautions, "watch out" */
        --warning-bg: #fef3c7; --warning-border: #f59e0b; --warning-text: #92400e; --warning-text-dark: #78350f;
        /* 4. ERROR (Red) - Errors, bad examples, "slow way", anti-patterns */
        --error-bg: #fef2f2; --error-border: #ef4444; --error-text: #991b1b; --error-text-dark: #7f1d1d;
      }
      *{box-sizing:border-box;margin:0;padding:0}
      html,body{font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);line-height:1.8; scroll-behavior: smooth;}
      
      .container{max-width:900px;margin:auto;padding:24px;background:var(--bg)}
      
      h1, h2, h3, h4 { color: var(--header-bg); font-weight: 700; line-height: 1.3; }
      h1{font-size:clamp(1.8rem, 4vw, 2.4rem); margin-bottom: 4px;}
      .byline{font-size:clamp(1rem, 3vw, 1.2rem); margin-bottom: 24px; font-style: italic; color: var(--text); opacity: 0.7;}
      h2{font-size:clamp(1.5rem,4vw,2rem); margin: 80px 0 32px; border-bottom: 2px solid var(--border); padding-bottom: 12px; font-weight: 600;}
      h3{font-size:clamp(1.2rem,3vw,1.5rem); margin: 40px 0 20px; font-weight: 700;}
      h4 {color: var(--text); font-weight: 600; font-size: 1.1rem;}
      p{margin-bottom: 24px;}
      strong { font-weight: 600; }
      ul, ol { padding-left: 20px; margin-bottom: 24px; }
      li { margin-bottom: 10px; }
      code { background: var(--muted); border: 1px solid var(--border); padding: 2px 6px; border-radius: 4px; font-family: 'Roboto Mono', monospace; font-size: 0.9em; }
      pre { background: var(--code-bg); color: #e2e8f0; padding: 1rem; border-radius: 8px; overflow-x: auto; font-family: 'Roboto Mono', monospace; margin: 16px 0; }
      pre code { background: transparent; border: none; padding: 0; font-size: 1em; }

      .site-header,.site-footer{background:var(--header-bg);color:var(--header-fg);padding:14px 24px}
      .site-header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;position:sticky;top:0;z-index:100; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: all 0.3s ease;}
      .site-header.minimized { padding: 8px 24px; box-shadow: 0 1px 5px rgba(0,0,0,0.1); }
      .logo{font-weight:700;font-size:1.15rem;color:#fff; text-decoration: none; transition: font-size 0.3s ease;}
      .logo:hover{color:var(--accent);}
      .site-footer{text-align:center;margin-top:50px;padding:30px; font-size: 0.9rem;}
      
      /* Module Navigation */
      .module-nav { background: #2d2d2d; border-bottom: 2px solid var(--accent); padding: 12px 24px; position: sticky; top: 56px; z-index: 99; transition: all 0.3s ease; }
      .module-nav.minimized { top: 40px; padding: 8px 24px; }
      .module-nav-inner { display: flex; gap: 8px; overflow-x: auto; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; scrollbar-width: thin; scrollbar-color: var(--accent) #3a3a3a; }
      .module-nav-inner::-webkit-scrollbar { height: 4px; }
      .module-nav-inner::-webkit-scrollbar-track { background: #3a3a3a; }
      .module-nav-inner::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 4px; }
      .module-link { display: flex; align-items: center; gap: 6px; padding: 8px 14px; background: #3a3a3a; color: #e2e8f0; text-decoration: none; border-radius: 6px; font-size: 0.85rem; font-weight: 500; transition: all 0.2s; white-space: nowrap; flex-shrink: 0; }
      .module-link:hover { background: var(--accent); color: white; }
      .module-link.active { background: var(--accent); color: white; font-weight: 600; }
      .module-link.completed::before { content: '✓'; display: inline-block; width: 16px; height: 16px; background: var(--ok); color: white; border-radius: 50%; text-align: center; line-height: 16px; font-size: 11px; margin-right: 2px; }
      .module-link .module-num { opacity: 0.7; }
      .nav-controls { display: none; }
      
      @media (max-width: 768px) {
        .module-nav { top: 52px; padding: 8px 12px; position: relative; }
        .module-nav-wrapper { position: relative; }
        .module-nav-inner { gap: 12px; padding: 0 40px; scroll-snap-type: x mandatory; }
        .module-link { scroll-snap-align: center; padding: 10px 16px; font-size: 0.9rem; min-width: 140px; justify-content: center; }
        .nav-controls { display: flex; position: absolute; top: 50%; transform: translateY(-50%); width: 100%; justify-content: space-between; pointer-events: none; z-index: 1; }
        .nav-btn { pointer-events: all; background: var(--accent); color: white; border: none; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .nav-btn-prev { margin-left: 4px; }
        .nav-btn-next { margin-right: 4px; }
      }
      
      .module-section { margin-bottom: 80px; }
      .icon-prefix { font-size: 1.5rem; margin-right: 12px; color: var(--accent); }

      .context-box { background: var(--accent-soft); border-left: 4px solid var(--accent); padding: 24px; margin: 32px 0; border-radius: 8px; }
      .context-box h3 { color: var(--accent-2); font-size: 1.3rem; margin-top: 0; margin-bottom: 10px; }
      
      .bridge-box { text-align: center; border: 2px dashed var(--accent); border-radius: 12px; padding: 32px; margin-top: 40px; }
      .bridge-box a { background: var(--accent); color: white; text-decoration: none; padding: 12px 24px; border-radius: 8px; font-weight: 700; display: inline-block; transition: background-color 0.2s; }
      .bridge-box a:hover { background: var(--accent-2); }
      
      .soft-card{background:var(--bg);border:1px solid var(--border);border-radius:12px;padding:24px}
      .btn{display:inline-block;background:var(--accent);color:#fff;border:none;border-radius:8px;padding:10px 18px;font-weight:700;cursor:pointer; transition: background-color 0.2s;}
      .btn:hover { background: var(--accent-2); }
      
      /* Consistent Quiz Styles from previous modules */
      .quiz-container{padding:24px;border:2px solid var(--border);border-radius:12px;background:var(--bg);}
      .quiz-navigation{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid var(--border)}
      .quiz-body.active{display:block; animation: fadeIn 0.5s;}
      @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
      .quiz-options{display:grid; gap:12px;}
      .quiz-option label{display:block; padding:14px;border:2px solid var(--border);border-radius:8px;cursor:pointer;background:var(--muted); font-weight: 500;}
      .quiz-option label:hover { border-color: var(--accent); }
      .quiz-option input[type="radio"]{margin-right: 12px; transform: scale(1.2); }
      .quiz-option .explanation{display:none;margin-top:12px;padding:15px;border-radius:6px;border-left:4px solid var(--accent); background: var(--accent-soft);}
      .quiz-option.selected.correct label{background:var(--ok-soft);border-color:var(--ok)}
      .quiz-option.selected.wrong label{background:var(--bad-soft);border-color:var(--bad)}
      
      /* Consistent Accordion Styles */
      .accordion .accordion-item + .accordion-item { margin-top: 10px; }
      .accordion-header { width: 100%; text-align: left; background: var(--muted); border: 1px solid var(--border); padding: 16px 20px; border-radius: 8px; cursor: pointer; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; justify-content: space-between; }
      .accordion-header::after { content: '+'; font-size: 1.5rem; color: var(--text); transition: transform 0.3s ease; }
      .accordion-header[aria-expanded="true"]::after { transform: rotate(45deg); }
      .accordion-content { padding: 24px; display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 8px 8px; background: var(--bg); }

      /* --- NEW STYLES for Module 4 --- */
      .analogy-box { background: var(--info-soft); border-left: 4px solid var(--info); padding: 24px; margin: 32px 0; border-radius: 8px; }
      .analogy-box h3 { color: var(--info); margin-top:0; }
      
      .svg-diagram { width: 100%; max-width: 600px; margin: 24px auto; display: block; }
      .svg-diagram text { font-family: 'Inter', sans-serif; }
      
      .markdown-preview { background-color: #2d3748; color: #e2e8f0; padding: 24px; border-radius: 12px; font-family: 'Roboto Mono', monospace; line-height: 1.7; font-size: 0.95em; }
      .markdown-preview .comment { color: #a0aec0; }
      .markdown-preview .header { color: #63b3ed; font-weight: bold; }
      .markdown-preview .list-item { color: #9f7aea; }
      .markdown-preview .highlight { background-color: rgba(255, 255, 255, 0.1); padding: 2px 6px; border-radius: 4px; }
      .markdown-preview .goal { color: var(--goal-color); }
      .markdown-preview .tone { color: var(--tone-color); }
      .markdown-preview .data { color: var(--data-color); }
      .markdown-preview .guardrail { color: var(--guardrail-color); }

      /* Consistent Flip Card Styles from Module 1 */
      .flip-card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-top: 24px; }
      .flip-card { background: transparent; height: 220px; perspective: 1000px; cursor: pointer; }
      .flip-card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
      .flip-card:hover .flip-card-inner, .flip-card:focus-within .flip-card-inner { transform: rotateY(180deg); }
      .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 16px; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 24px; text-align: center; word-break: break-word; box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); border: 1px solid rgba(255,255,255,0.45); background: linear-gradient(135deg, rgba(255,255,255,0.70), rgba(255,255,255,0.45)); }
      .flip-card-front h4 { margin-top: 0; font-size: 1.15rem; display: flex; align-items: center; gap: 8px; color: var(--header-bg); }
      .flip-card-back { transform: rotateY(180deg); color: var(--text); }
      .flip-card-back p { font-size: 0.98rem; margin-bottom: 10px; line-height: 1.6; }

      .practice-box { border: 2px dashed var(--ok); background: var(--ok-soft); padding: 24px; border-radius: 12px; margin-top: 32px; }
      .practice-box h4 { color: var(--ok); margin-top:0; }
      
      .file-tree-vis { font-family: 'Roboto Mono', monospace; background: var(--muted); padding: 24px; border-radius: 8px; line-height: 2; }
      .file-tree-vis .folder { color: var(--info); }
      .file-tree-vis .file { color: var(--accent-2); font-weight: 600; }
      .file-tree-vis .highlight { background: var(--accent-soft); padding: 2px 4px; border-radius: 4px; font-weight: bold; }
      
      .iteration-loop-container { display: flex; justify-content: center; align-items: center; padding: 40px 20px; }
      .iteration-loop { display: flex; align-items: center; gap: 15px; position: relative; }
      .iteration-step {
        text-align: center;
        background: white;
        border: 2px solid var(--border);
        border-radius: 50%;
        width: clamp(96px, 12vw, 128px);
        aspect-ratio: 1 / 1; /* keep perfect circle */
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
        box-sizing: border-box; /* respect inner margins */
        font-weight: 600;
        z-index: 2;
        white-space: normal; /* allow wrapping */
        overflow-wrap: anywhere;
        word-break: break-word;
        line-height: 1.1;
        font-size: clamp(0.8rem, 1.6vw, 1rem);
      }
      .iteration-arrow { font-size: clamp(1.2rem, 2.2vw, 2rem); color: var(--accent-2); font-weight: bold; }
      
      .drag-drop-quiz { background: var(--muted); padding: 24px; border-radius: 12px; margin-top: 24px; }
      .drop-container { border: 2px dashed var(--border); padding: 20px; border-radius: 12px; min-height: 80px; display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: center;}
      .drop-container.over { border-color: var(--accent); background: var(--accent-soft); }
      .drag-options { display: flex; gap: 16px; margin-top: 24px; justify-content: center; flex-wrap: wrap; }
      .drag-option { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 10px 16px; cursor: grab; font-weight: 600; }
      .drag-option:active { cursor: grabbing; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
      .drag-option.dropped { cursor: default; background: var(--ok-soft); border-color: var(--ok); opacity: 0.5; }

      .diff-view { border: 1px solid var(--border); border-radius: 8px; font-family: 'Roboto Mono', monospace; font-size: 0.9em; margin-top: 20px; }
      .diff-line { padding: 5px 15px; border-bottom: 1px solid var(--border); }
      .diff-line:last-child { border-bottom: none; }
      .diff-line.add { background-color: rgba(40, 167, 69, 0.1); }
      .diff-line.remove { background-color: rgba(220, 53, 69, 0.1); text-decoration: line-through; }
      .diff-line.add::before { content: '+ '; color: var(--ok); }
      .diff-line.remove::before { content: '- '; color: var(--bad); }
    </style>
</head>
<body>

 <header class="site-header">
     <a href="claude_code_for_financial_consultants_index.html" class="logo">Claude for Consultants</a>
     <span style="font-size:0.9rem;opacity:0.8;">Module 4 of 6</span>
 </header>

 <nav class="module-nav" role="navigation" aria-label="Course modules">
     <div class="module-nav-wrapper">
         <div class="nav-controls">
             <button class="nav-btn nav-btn-prev" id="navPrev" aria-label="Previous modules">‹</button>
             <button class="nav-btn nav-btn-next" id="navNext" aria-label="Next modules">›</button>
         </div>
         <div class="module-nav-inner" id="moduleNavInner">
             <a href="claude_code_for_financial_consultants_part_0.html" class="module-link" data-module="0">
                 <span class="module-num">M0</span> Introduction
             </a>
             <a href="claude_code_for_financial_consultants_part_1.html" class="module-link" data-module="1">
                 <span class="module-num">M1</span> Orientation
             </a>
             <a href="claude_code_for_financial_consultants_part_2.html" class="module-link" data-module="2">
                 <span class="module-num">M2</span> Installation
             </a>
             <a href="claude_code_for_financial_consultants_part_3.html" class="module-link" data-module="3">
                 <span class="module-num">M3</span> First Changes
             </a>
             <a href="claude_code_for_financial_consultants_part_4.html" class="module-link active" data-module="4">
                 <span class="module-num">M4</span> CLAUDE.md
             </a>
             <a href="claude_code_for_financial_consultants_part_5.html" class="module-link" data-module="5">
                 <span class="module-num">M5</span> AI-Native
             </a>
         </div>
     </div>
 </nav>

 <div class="container">
   
    <!-- 1. MODULE INTRO HEADER -->
    <section class="module-section">
        <h1><span class="icon-prefix">📘</span>Module 4: Teaching Claude About Your Project</h1>
        <p class="byline">How Context Turns an Assistant into a Partner</p>
        <div class="context-box">
            <h3>Sound familiar?</h3>
            <ul>
                <li>"I asked for a client summary, and it gave me a generic, unusable paragraph."</li>
                <li>"It keeps suggesting Python code, but my project is in JavaScript."</li>
                <li>"I have to remind it of our firm's compliance rules in every single prompt."</li>
            </ul>
            <p><strong>Insight:</strong> Up to 80% of "bad" AI outputs aren't because the AI is "dumb," but because it's missing critical context—just like a human analyst on their first day.</p>
            <h4>In this module, you will learn to:</h4>
            <ol>
                <li>Create a `CLAUDE.md` file to give Claude a "project briefing."</li>
                <li>Understand how your working directory provides automatic context.</li>
                <li>Iterate on your context file to refine and improve Claude's outputs safely.</li>
            </ol>
        </div>
    </section>

    <!-- 2. WHY CONTEXT MATTERS -->
    <section class="module-section">
        <h2><span class="icon-prefix">🧠</span>Why Context Matters: The New Analyst Analogy</h2>
        <div class="analogy-box">
            <h3>Claude is like a new, brilliant, but uninformed analyst on your team.</h3>
            <p>You would never give a complex task to a new team member without briefing them first. You'd explain the client's goals, the required tone of voice, where to find the data, and critical compliance rules. Without this briefing, their work would be useless, no matter how smart they are.</p>
            <p>Providing context to Claude works the same way.</p>
        </div>
        
        <svg class="svg-diagram" viewBox="0 0 600 150" aria-labelledby="context-flow-title" role="img" style="max-width:100%;height:auto">
            <title id="context-flow-title">Diagram showing how a user's briefing, stored in CLAUDE.md, informs the Claude Code tool.</title>
            <g>
                <rect x="10" y="50" width="150" height="50" rx="8" fill="var(--muted)" stroke="var(--border)" />
                <text x="85" y="75" text-anchor="middle" font-weight="bold">👤 You</text>
                <text x="85" y="95" text-anchor="middle" font-size="12">Provide the briefing</text>
            </g>
            <path d="M165 75 L215 75" stroke="var(--accent)" stroke-width="2" marker-end="url(#arrowhead)" />
            <g>
                <rect x="225" y="50" width="150" height="50" rx="8" fill="var(--accent-soft)" stroke="var(--accent)" />
                <text x="300" y="75" text-anchor="middle" font-weight="bold" fill="var(--accent-2)">📄 CLAUDE.md</text>
                <text x="300" y="95" text-anchor="middle" font-size="12">Stores the briefing</text>
            </g>
            <path d="M380 75 L430 75" stroke="var(--accent)" stroke-width="2" marker-end="url(#arrowhead)" />
            <g>
                <rect x="440" y="50" width="150" height="50" rx="8" fill="var(--muted)" stroke="var(--border)" />
                <text x="515" y="75" text-anchor="middle" font-weight="bold">🤖 `claude` command</text>
                <text x="515" y="95" text-anchor="middle" font-size="12">Executes with context</text>
            </g>
            <defs>
                <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="var(--accent)" />
                </marker>
            </defs>
        </svg>

        <div class="soft-card" style="text-align: center;">
            <p><strong>Reflection Question:</strong> When you brief a human junior analyst, what 3-5 key details do you always emphasize? Those are the exact details that belong in your `CLAUDE.md` file.</p>
        </div>
    </section>

    <!-- 3. CREATE CLAUDE.MD WALKTHROUGH -->
    <section class="module-section">
        <h2><span class="icon-prefix">🛠️</span>The `CLAUDE.md` File: Your Project's Briefing Doc</h2>
        <p>The `CLAUDE.md` file is a special file that Claude Code can automatically load for context when present in your workspace. Let's break down what a good one looks like.</p>
        
        <div class="markdown-preview">
            <pre><code><span class="comment"># Project: Q4 Portfolio Summary for Client A</span>

<span class="header">## <span class="goal">Goals</span></span>
<span class="list-item">-</span> Summarize client holdings from a CSV for our quarterly review email.
<span class="list-item">-</span> Identify the top 3 performing assets.

<span class="header">## <span class="tone">Tone</span></span>
<span class="list-item">-</span> Professional, confident, and reassuring. Avoid overly technical jargon.

<span class="header">## <span class="data">Data Sources</span></span>
<span class="list-item">-</span> All client data is in `Q4_financials.csv` (same folder as this project).

<span class="header">## <span class="guardrail">Guardrails & Constraints</span></span>
<span class="list-item">-</span> CRITICAL: Never include specific dollar amounts in the summary email.
<span class="list-item">-</span> All final output must be in Markdown format.</code></pre>
        </div>
        
        <p style="margin-top: 24px;">Click each card below to understand why these sections are so powerful.</p>
        <div class="flip-card-grid">
            <div class="flip-card" tabindex="0" aria-label="Goals section card">
                <div class="flip-card-inner">
                    <div class="flip-card-front"><h4 style="color:var(--goal-color);">🎯 Goals</h4><div style="font-size:0.9rem; opacity:0.8; margin-top:8px;">State outcomes, not tasks</div></div>
                    <div class="flip-card-back"><p>Tells Claude the "why" behind your requests. It helps the AI make better decisions about what to include or exclude to achieve your objective.</p></div>
                </div>
            </div>
            <div class="flip-card" tabindex="0">
                <div class="flip-card-inner">
                    <div class="flip-card-front"><h4 style="color:var(--tone-color);">🗣️ Tone</h4><div style="font-size:0.9rem; opacity:0.8; margin-top:8px;">Decide voice and style</div></div>
                    <div class="flip-card-back"><p>Guides the writing style. Claude can be formal, casual, technical, or simple, but you have to tell it what you need for a specific audience.</p></div>
                </div>
            </div>
            <div class="flip-card" tabindex="0">
                <div class="flip-card-inner">
                    <div class="flip-card-front"><h4 style="color:var(--data-color);">📂 Data Sources</h4><div style="font-size:0.9rem; opacity:0.8; margin-top:8px;">Point to authoritative files</div></div>
                    <div class="flip-card-back"><p>Points Claude to the right files. This saves you from having to specify the file path in every prompt and prevents errors from using outdated data.</p></div>
                </div>
            </div>
             <div class="flip-card" tabindex="0">
                <div class="flip-card-inner">
                    <div class="flip-card-front"><h4 style="color:var(--guardrail-color);">🛡️ Guardrails</h4><div style="font-size:0.9rem; opacity:0.8; margin-top:8px;">Set non‑negotiable rules</div></div>
                    <div class="flip-card-back"><p>Sets the hard rules and constraints. This is the most important section for compliance and safety, preventing the AI from doing something it shouldn't.</p></div>
                </div>
            </div>
        </div>

        <div class="practice-box" role="region" aria-label="Create your CLAUDE.md">
            <h4>✍️ Create Your Own `CLAUDE.md`</h4>
            <p style="margin-bottom:16px;">Use this template to set up context for the ClientA case study. You can copy-paste it directly.</p>
            <div style="position:relative; background: var(--code-bg); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                <button onclick="copyCLAUDETemplate()" style="position:absolute; top:12px; right:12px; background: var(--accent); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600;">📋 Copy</button>
                <pre style="margin:0; color: #e2e8f0; white-space: pre-wrap; word-break: break-word; font-family: 'Roboto Mono', monospace; font-size: 0.9rem; line-height: 1.6;"><code id="claude-md-template"># Project: Q4 Portfolio Summary for Client A

## Goals
- Summarize client holdings from a CSV for our quarterly review email.
- Highlight key performance metrics (return %, allocation shifts).

## Tone
- Professional, confident, and reassuring.
- Avoid jargon; explain terms if used.
- Client-friendly language for non-experts.

## Data Sources
- Main file: `Q4_financials.csv` (located in same folder as HTML files)
- Fallback: Use placeholder values if file unavailable for template drafts.

## Guardrails & Constraints
- CRITICAL: Never include specific dollar amounts in the summary email.
- All final output must be in Markdown format.</code></pre>
            </div>
            <ol>
                <li>In your terminal, navigate to the <code>Claude_Practice</code> folder: <code>cd ~/Desktop/Claude_Practice</code></li>
                <li>Click <strong>📋 Copy</strong> above to copy the template to your clipboard.</li>
                <li>Create the file: <code>echo "paste-here" > CLAUDE.md</code> or use VS Code: <strong>File → New File → Save As</strong> → name it <code>CLAUDE.md</code></li>
                <li>Paste the template content and save in the <strong>Claude_Practice</strong> folder (NOT in ClientA). Claude will read this from the parent folder when you work in subfolders.</li>
            </ol>
            <div class="soft-card" style="margin-top:12px; background: var(--success-bg); border-left: 4px solid var(--success-border);">
                <p style="margin:0; color: var(--success-text);"><strong>✓ Pro tip:</strong> You can now test the case study example below with this exact <code>CLAUDE.md</code> in place!</p>
            </div>
        </div>
    </section>

    <!-- 4. CONTEXT vs COMMAND ACCORDION -->
    <section class="module-section">
        <h2><span class="icon-prefix">⚖️</span>The Difference in Action: Context vs. No Context</h2>
        <p>Let's see the practical impact of the `CLAUDE.md` file you just created. We'll give the exact same prompt in two different scenarios.</p>
        <div class="accordion" id="comparison-accordion" role="region" aria-label="Context comparison">
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="false" role="button" aria-controls="acc-s1" tabindex="0">Scenario 1: Prompt-Only (No Context)</button>
                <div class="accordion-content" id="acc-s1" role="region" aria-live="polite">
                    <p>Here, we are in an empty folder with no `CLAUDE.md` file.</p>
            <pre style="white-space: pre-wrap; word-break: break-word;"><code>$ claude "Draft a brief Q4 portfolio summary email."</code></pre>
                    <h4>Simulated Output:</h4>
                    <div class="soft-card">
                        <p><strong>Subject: Your Q4 Portfolio Update</strong></p>
                        <p>Dear Valued Client,</p>
                        <p>Here is the summary of your portfolio for the fourth quarter. Overall, the market showed trends and your investments performed accordingly. We have reviewed your assets and will continue to monitor them.</p>
                        <p>Please let us know if you have any questions.</p>
                        <p>Sincerely,<br>Your Advisor</p>
                    </div>
                    <p style="margin-top: 15px;"><strong>Analysis:</strong> This is generic, unhelpful, and unprofessional. It doesn't know the goal, the tone, or where the data is. You can't send this to a client.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="true" role="button" aria-controls="acc-s2" tabindex="0">Scenario 2: Context-Aware (With `CLAUDE.md`)</button>
                <div class="accordion-content" id="acc-s2" role="region" aria-live="polite">
                    <p>Now, we're in our project folder where our `CLAUDE.md` file exists. We run the *exact same prompt*.</p>
            <pre style="white-space: pre-wrap; word-break: break-word;"><code>$ claude "Draft a brief Q4 portfolio summary email."</code></pre>
                    <h4>Simulated Output:</h4>
                    <div class="soft-card">
                        <p><strong>Subject: A Confident Look at Your Q4 Portfolio Performance</strong></p>
                        <p>Dear Client A,</p>
                        <p>I've completed the Q4 review of your portfolio based on the `Q4_financials.csv` data, and the results are encouraging. I'm pleased to report that your portfolio remains well-aligned with our long-term strategy.</p>
                        <p>The top-performing assets this quarter were [Asset 1], [Asset 2], and [Asset 3], which showed significant strength. We continue to maintain a diversified position to ensure stability.</p>
                        <p>I've prepared a full report for our upcoming meeting. I'm looking forward to discussing how we can build on this positive momentum in the new year.</p>
                        <p>Best regards,<br>Your Advisor</p>
                    </div>
                    <p style="margin-top: 15px;"><strong>Analysis:</strong> This is a world of difference. The output is personalized, uses the correct reassuring tone, references the data file, and adheres to the goal. It's a client-ready first draft.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. WORKING DIRECTORY VISUALIZATION -->
    <section class="module-section">
        <h2><span class="icon-prefix">📁</span>How Claude Knows: The Working Directory</h2>
        <p>You might be wondering: "How does Claude find the right `CLAUDE.md` file?" It simply looks in the folder you are currently "in" within your terminal—your <strong>working directory</strong>.</p>
        <p>Think back to the "filing cabinet" from Module 1. When you `cd` into the `ClientA` folder, you are telling your computer (and Claude) that this is your current workspace.</p>
        <div class="file-tree-vis">
            <pre><code>/Users/YourName/Projects/
└── <span class="folder">ClientA/</span>             <-- Your terminal is HERE (`pwd`)
    ├── <span class="file">Q4_financials.csv</span>    <-- Data file (same folder)
    ├── <span class="folder">reports/</span>
    └── <span class="file highlight">CLAUDE.md</span>      <-- Claude reads this automatically!</code></pre>
        </div>
        <div class="context-box" style="margin-top: 24px;">
            <h4>The Golden Rule of Context</h4>
            <p>Before you start working, always `cd` into the correct project folder. This single habit ensures Claude has the right context and prevents it from getting confused by other projects on your computer.</p>
        </div>
    </section>

    <!-- 6. ITERATION LOOP DEMO -->
    <section class="module-section">
        <h2><span class="icon-prefix">🔄</span>The Context Iteration Loop</h2>
        <p>Your first `CLAUDE.md` won't be perfect. The goal isn't to get it right the first time, but to refine it. When Claude's output isn't quite right, don't just fix the output—improve the instructions in `CLAUDE.md`. This is how you teach the AI and improve all future results.</p>
        
        <div class="iteration-loop-container">
            <div class="iteration-loop">
                <div class="iteration-step">1. Ask Claude</div>
                <div class="iteration-arrow">→</div>
                <div class="iteration-step">2. Review Output</div>
                <div class="iteration-arrow">→</div>
                <div class="iteration-step">3. Refine `CLAUDE.md`</div>
                <div class="iteration-arrow">→</div>
                 <div class="iteration-step">4. Ask Again</div>
            </div>
        </div>

        <div class="drag-drop-quiz" role="region" aria-label="Iteration order quiz">
            <h4>Practice: What's the right order?</h4>
            <p>Drag the steps into the correct sequence in the box below.</p>
            <div id="drop-container" class="drop-container"></div>
            <div id="drag-options" class="drag-options">
                <div class="drag-option" draggable="true">1. Give Claude a prompt</div>
                <div class="drag-option" draggable="true">4. Re-run the same prompt</div>
                <div class="drag-option" draggable="true">2. See a mistake in the output</div>
                <div class="drag-option" draggable="true">3. Improve the `CLAUDE.md` file</div>
            </div>
            <div style="text-align:center; margin-top: 12px;"><button id="drag-reset" class="btn">Reset</button></div>
            <p id="drag-feedback" style="text-align:center; font-weight:bold; margin-top:20px;"></p>
        </div>
    </section>

    <!-- 7. REAL-WORLD SCENARIO WALKTHROUGH -->
    <section class="module-section">
        <h2><span class="icon-prefix">💼</span>Case Study: Client A’s Q4 Portfolio Email</h2>
        <p>Let's apply this entire workflow to one realistic consulting task from start to finish.</p>
        <div class="soft-card">
            <h4>Step 1: Create a Project Folder (no data needed yet)</h4>
            <p>We'll start with a <em>structure-only</em> folder. This exercise teaches how `CLAUDE.md` shapes writing even without input files.</p>
            <pre style="white-space: pre-wrap; word-break: break-word;"><code># Navigate to your practice folder from Module 3
$ cd ~/Desktop/Claude_Practice

# Create ClientA subfolder and enter it
$ mkdir ClientA && cd ClientA</code></pre>
            <div class="soft-card" style="margin-top:12px; background: var(--info-bg); border-left: 4px solid var(--info-border);">
                <p style="margin:0; color: var(--info-text);"><strong>Note</strong> You don’t need CSVs yet. We’re asking Claude to write a <em>template</em> email using preferences from <code>CLAUDE.md</code>. In Module 5 we’ll plug in real data.</p>
            </div>
            <br>
            <h4>Step 2: Give a Clear, Context-Aware Prompt</h4>
            <p>Even with an empty folder, Claude will use your `CLAUDE.md` to produce a professional draft.</p>
            <pre style="white-space: pre-wrap; word-break: break-word;"><code>$ claude "Draft a 120-word summary email for Client A's Q4 portfolio and save it to summary_email.md"</code></pre>
            <br>
            <h4>Step 3: Review the Proposed Diff</h4>
            <p>Claude proposes creating a new file with the email content. You review it for accuracy, tone, and adherence to your guardrails.</p>
            <div class="diff-view">
                <div class="diff-line add">Subject: A Confident Look at Your Q4 Portfolio Performance</div>
                <div class="diff-line add"></div>
                <div class="diff-line add">Dear Client A,</div>
                <div class="diff-line add"></div>
                <div class="diff-line add">I've completed the Q4 review of your portfolio... and the results are encouraging.</div>
                <div class="diff-line add">The top-performing assets this quarter were [Asset 1], [Asset 2], and [Asset 3].</div>
                <div class="diff-line add">...</div>
            </div>
            <br>
            <h4>Step 4: Approve the Change</h4>
            <p>The draft looks great. It follows the "reassuring" tone and correctly avoids specific dollar amounts as instructed by our `CLAUDE.md` guardrail. You approve the change, and the `summary_email.md` file is created.</p>
            <br>
            <h4 style="margin-top: 32px;">Step 5: Verify & View Your Work</h4>
            <p>Non-coders often forget this crucial step: <strong>confirming the file actually exists</strong> and seeing what's inside. Let's check!</p>
            
            <div style="background: var(--warning-bg); border-left: 4px solid var(--warning-border); padding: 16px; border-radius: 8px; margin: 16px 0 16px 0;">
                <p style="margin: 0 0 8px 0; font-weight: 600; color: var(--warning-text);">⚡ Why Learn Terminal Commands?</p>
                <p style="margin: 0; font-size: 0.9rem; color: var(--warning-text-dark);">You're already using terminal to run <code>$ claude "..."</code> commands. Learning 3 simple navigation commands (<code>ls</code>, <code>cd</code>, <code>pwd</code>) helps you understand <strong>where you are</strong> and <strong>where your files are</strong> — critical for debugging "Claude can't find my file" errors later. <strong>Recommendation:</strong> Try terminal first, use GUI as backup for visual confirmation.</p>
            </div>
            
            <div style="background: var(--info-bg); border: 2px solid var(--info-border); border-radius: 12px; padding: 24px; margin: 24px 0;">
                <h4 style="margin: 0 0 16px 0; color: var(--info-text);">Interactive Demo: Terminal Navigation</h4>
                <p style="margin: 0 0 16px 0; font-size: 0.95rem;">Click folders/files to see tooltips. Use the command buttons to navigate and watch the current location update in real-time. The current location is displayed below the folder structure. </p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 20px;">
                    <!-- Left: Folder Visualization -->
                    <div style="position: relative;">
                        <svg id="folder-nav-svg" width="100%" height="380" viewBox="0 0 340 380" style="background: white; border-radius: 8px; border: 1px solid var(--border); padding: 12px;">
                            <!-- Tree structure lines -->
                            <line x1="20" y1="25" x2="20" y2="355" stroke="#cbd5e1" stroke-width="1.5"/>
                            
                            <!-- Desktop branch -->
                            <line x1="20" y1="25" x2="30" y2="25" stroke="#cbd5e1" stroke-width="1.5"/>
                            
                            <!-- Claude_Practice branch -->
                            <line x1="20" y1="65" x2="30" y2="65" stroke="#cbd5e1" stroke-width="1.5"/>
                            <line x1="50" y1="65" x2="50" y2="245" stroke="#cbd5e1" stroke-width="1.5"/>
                            
                            <!-- CLAUDE.md branch -->
                            <line x1="50" y1="105" x2="60" y2="105" stroke="#cbd5e1" stroke-width="1.5"/>
                            
                            <!-- index.html branch -->
                            <line x1="50" y1="145" x2="60" y2="145" stroke="#cbd5e1" stroke-width="1.5"/>
                            
                            <!-- ClientA branch -->
                            <line x1="50" y1="185" x2="60" y2="185" stroke="#cbd5e1" stroke-width="1.5"/>
                            <line x1="80" y1="185" x2="80" y2="225" stroke="#cbd5e1" stroke-width="1.5"/>
                            
                            <!-- summary_email.md branch -->
                            <line x1="80" y1="225" x2="90" y2="225" stroke="#cbd5e1" stroke-width="1.5"/>
                            
                            <!-- CompoundInterest branch -->
                            <line x1="50" y1="265" x2="60" y2="265" stroke="#cbd5e1" stroke-width="1.5"/>
                            
                            <!-- Other folders hint -->
                            <line x1="20" y1="305" x2="30" y2="305" stroke="#cbd5e1" stroke-width="1" stroke-dasharray="3,3"/>
                            
                            <!-- Level 0: Desktop folder -->
                            <g id="nav-desktop" class="nav-clickable" data-tooltip="desktop">
                                <rect x="30" y="10" width="300" height="30" rx="4" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" style="cursor: pointer;"/>
                                <text x="40" y="30" font-size="13" font-weight="600" fill="#1e40af" style="pointer-events: none;">📁 Desktop/</text>
                            </g>
                            
                            <!-- Level 1: Claude_Practice folder -->
                            <g id="nav-practice" class="nav-clickable" data-tooltip="practice">
                                <rect id="folder-practice" x="30" y="50" width="300" height="30" rx="4" fill="#dcfce7" stroke="#22c55e" stroke-width="2" style="cursor: pointer;"/>
                                <text x="40" y="70" font-size="12" font-weight="600" fill="#15803d" style="pointer-events: none;">📁 Claude_Practice/</text>
                            </g>
                            
                            <!-- Level 2: CLAUDE.md file -->
                            <g id="nav-claudemd" class="nav-clickable" data-tooltip="claudemd">
                                <rect id="file-claudemd" x="60" y="90" width="270" height="30" rx="3" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5" style="cursor: pointer;"/>
                                <text x="70" y="110" font-size="11" fill="#92400e" style="pointer-events: none;">📄 CLAUDE.md</text>
                            </g>
                            
                            <!-- Level 2: index.html file -->
                            <g id="nav-index" class="nav-clickable" data-tooltip="index">
                                <rect id="file-index" x="60" y="130" width="270" height="30" rx="3" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5" style="cursor: pointer;"/>
                                <text x="70" y="150" font-size="11" fill="#92400e" style="pointer-events: none;">📄 index.html</text>
                            </g>
                            
                            <!-- Level 2: ClientA folder -->
                            <g id="nav-clienta" class="nav-clickable" data-tooltip="clienta">
                                <rect id="folder-clienta" x="60" y="170" width="270" height="30" rx="3" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5" style="cursor: pointer;"/>
                                <text x="70" y="190" font-size="11" font-weight="600" fill="#15803d" style="pointer-events: none;">📁 ClientA/</text>
                            </g>
                            
                            <!-- Level 3: summary_email.md file -->
                            <g id="nav-summary" class="nav-clickable" data-tooltip="summary">
                                <rect id="file-summary" x="90" y="210" width="240" height="30" rx="3" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5" style="cursor: pointer;"/>
                                <text x="100" y="230" font-size="11" fill="#92400e" style="pointer-events: none;">📄 summary_email.md</text>
                            </g>
                            
                            <!-- Level 2: CompoundInterest folder -->
                            <g id="nav-compound" class="nav-clickable" data-tooltip="compound">
                                <rect id="folder-compound" x="60" y="250" width="270" height="30" rx="3" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5" style="cursor: pointer;"/>
                                <text x="70" y="270" font-size="11" font-weight="600" fill="#15803d" style="pointer-events: none;">📁 CompoundInterest/</text>
                            </g>
                            
                            <!-- Visual hint for other folders -->
                            <g style="pointer-events: none;">
                                <rect x="30" y="290" width="300" height="30" rx="4" fill="#f8fafc" stroke="#cbd5e1" stroke-width="1" stroke-dasharray="3,3"/>
                                <text x="40" y="310" font-size="11" fill="#94a3b8" font-style="italic">... other Desktop folders</text>
                            </g>
                        </svg>
                        
                        <!-- Tooltip (fixed position, outside SVG container) -->
                        <div id="nav-tooltip" style="position: fixed; background: #2d2d2d; color: white; padding: 16px; border-radius: 8px; font-size: 13px; pointer-events: none; opacity: 0; transition: opacity 0.2s; white-space: normal; max-width: 300px; border: 2px solid var(--accent); z-index: 10000; line-height: 1.6; box-shadow: 0 8px 24px rgba(0,0,0,0.4); display: none;">
                            <div id="nav-tooltip-title" style="font-weight: 700; font-size: 15px; color: var(--accent); margin-bottom: 8px;"></div>
                            <div id="nav-tooltip-desc" style="font-size: 13px; color: #e0e0e0;"></div>
                        </div>
                        
                        <p style="margin: 12px 0 0 0; font-size: 0.85rem; text-align: center; color: var(--info-text);">
                            <strong>Current Location:</strong> <span id="current-path" style="font-family: monospace; background: var(--code-bg); color: #e2e8f0; padding: 4px 8px; border-radius: 4px;">~/Desktop</span>
                        </p>
                    </div>
                    
                    <!-- Right: Command Buttons -->
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="background: white; padding: 16px; border-radius: 8px; border: 1px solid var(--border);">
                            <p style="margin: 0 0 12px 0; font-weight: 600; font-size: 0.9rem; color: #475569;">Basic Navigation</p>
                            <button onclick="navDemo('down-practice')" style="width: 100%; padding: 10px; margin: 4px 0; background: white; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; font-family: monospace; font-size: 0.9rem; color: #334155; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'; this.style.borderColor='#94a3b8'" onmouseout="this.style.background='white'; this.style.borderColor='#cbd5e1'">cd Claude_Practice</button>
                            <button onclick="navDemo('down-clienta')" style="width: 100%; padding: 10px; margin: 4px 0; background: white; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; font-family: monospace; font-size: 0.9rem; color: #334155; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'; this.style.borderColor='#94a3b8'" onmouseout="this.style.background='white'; this.style.borderColor='#cbd5e1'">cd ClientA</button>
                            <button onclick="navDemo('up')" style="width: 100%; padding: 10px; margin: 4px 0; background: white; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; font-family: monospace; font-size: 0.9rem; color: #334155; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'; this.style.borderColor='#94a3b8'" onmouseout="this.style.background='white'; this.style.borderColor='#cbd5e1'">cd ..</button>
                            <button onclick="navDemo('reset')" style="width: 100%; padding: 10px; margin: 4px 0; background: white; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; font-family: monospace; font-size: 0.9rem; color: #334155; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'; this.style.borderColor='#94a3b8'" onmouseout="this.style.background='white'; this.style.borderColor='#cbd5e1'">cd ~/Desktop</button>
                        </div>
                        
                        <div style="background: white; padding: 16px; border-radius: 8px; border: 1px solid var(--border);">
                            <p style="margin: 0 0 12px 0; font-weight: 600; font-size: 0.9rem; color: #475569;">View Contents</p>
                            <button onclick="navDemo('ls')" style="width: 100%; padding: 10px; margin: 4px 0; background: white; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; font-family: monospace; font-size: 0.9rem; color: #334155; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'; this.style.borderColor='#94a3b8'" onmouseout="this.style.background='white'; this.style.borderColor='#cbd5e1'">ls</button>
                            <button onclick="navDemo('pwd')" style="width: 100%; padding: 10px; margin: 4px 0; background: white; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; font-family: monospace; font-size: 0.9rem; color: #334155; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'; this.style.borderColor='#94a3b8'" onmouseout="this.style.background='white'; this.style.borderColor='#cbd5e1'">pwd</button>
                        </div>
                        
                        <div style="background: white; padding: 16px; border-radius: 8px; border: 1px solid var(--border);">
                            <p style="margin: 0 0 12px 0; font-weight: 600; font-size: 0.9rem; color: #475569;">Advanced Shortcuts</p>
                            <button onclick="navDemo('double-jump')" style="width: 100%; padding: 10px; margin: 4px 0; background: white; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; font-family: monospace; font-size: 0.85rem; color: #334155; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'; this.style.borderColor='#94a3b8'" onmouseout="this.style.background='white'; this.style.borderColor='#cbd5e1'">cd ~/Desktop/Claude_Practice/ClientA</button>
                            <button onclick="navDemo('peer')" style="width: 100%; padding: 10px; margin: 4px 0; background: white; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; font-family: monospace; font-size: 0.85rem; color: #334155; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'; this.style.borderColor='#94a3b8'" onmouseout="this.style.background='white'; this.style.borderColor='#cbd5e1'">cd ../CompoundInterest</button>
                        </div>
                    </div>
                </div>
                
                <div id="nav-output" style="background: var(--code-bg); color: #e2e8f0; padding: 16px; border-radius: 8px; font-family: monospace; font-size: 0.9rem; min-height: 80px; line-height: 1.6;">
                    <span style="color: #22c55e;">$</span> Click a command button to see output here...
                </div>
                
                <div style="background: #dcfce7; border-left: 4px solid #16a34a; padding: 12px; border-radius: 6px; margin-top: 16px;">
                    <p style="margin: 0; font-size: 0.85rem; color: #166534;"><strong>💡 Key Concepts:</strong> <code>cd</code> = change directory, <code>..</code> = parent folder, <code>~</code> = home, <code>ls</code> = list files, <code>pwd</code> = print working directory (where am I?)</p>
                </div>
            </div>
            
            <div style="background: var(--info-bg); border-left: 4px solid var(--info-border); padding: 16px; border-radius: 8px; margin: 16px 0;">
                <p style="margin: 0 0 12px 0; font-weight: 600; color: var(--info-text);">💡 Two Ways to Verify</p>
                
                <div style="margin-bottom: 20px;">
                    <p style="margin: 0 0 8px 0; font-weight: 600; color: var(--info-text);">Option A: Using Terminal (Fast)</p>
                    <pre style="background: var(--code-bg); color: #e2e8f0; padding: 12px; border-radius: 6px; margin: 8px 0; white-space: pre-wrap; word-break: break-word;"><code># You're already in ClientA folder. List files:
$ ls
summary_email.md

# View the contents
$ cat summary_email.md

# Want to see CLAUDE.md? It's in the parent folder:
$ ls ..
CLAUDE.md  ClientA  CompoundInterest  index.html</code></pre>
                    <p style="margin: 8px 0 0 0; font-size: 0.9rem; color: var(--info-text-light);">In <strong>ClientA</strong> folder, you only see <code>summary_email.md</code>. The <code>CLAUDE.md</code> file lives in the parent <strong>Claude_Practice</strong> folder, where Claude can find it automatically.</p>
                </div>
                
                <div>
                    <p style="margin: 0 0 8px 0; font-weight: 600; color: var(--info-text);">Option B: Using File Explorer / Finder (Visual)</p>
                    <ol style="margin: 8px 0 0 20px; padding: 0; color: var(--info-text-light); line-height: 1.8;">
                        <li><strong>Windows:</strong> Open File Explorer → Navigate to <code>Desktop\Claude_Practice\ClientA</code> → You'll see <code>summary_email.md</code></li>
                        <li><strong>Mac:</strong> Open Finder → Go to <code>Desktop/Claude_Practice/ClientA</code> → You'll see <code>summary_email.md</code></li>
                        <li><strong>Double-click</strong> the file to open it in your default text editor (Notepad, TextEdit, or VS Code)</li>
                    </ol>
                </div>
            </div>
            
            <div style="background: var(--success-bg); border-left: 4px solid var(--success-border); padding: 16px; border-radius: 8px; margin: 16px 0;">
                <p style="margin: 0 0 8px 0; font-weight: 600; color: var(--success-text);">✓ What You Should See</p>
                <p style="margin: 0 0 12px 0; font-size: 0.95rem; color: var(--success-text-dark);">A professional email that:</p>
                <ul style="margin: 0; padding-left: 20px; color: var(--success-text-dark); line-height: 1.8;">
                    <li>Uses a confident, reassuring tone (from your Tone section)</li>
                    <li>Avoids specific dollar amounts (from your Guardrails)</li>
                    <li>Has a clear structure (professional email format)</li>
                    <li>Uses placeholder data like [Asset 1], [Asset 2] since no real CSV exists yet</li>
                </ul>
            </div>
            
            <div style="background: var(--warning-bg); border-left: 4px solid var(--warning-border); padding: 16px; border-radius: 8px; margin: 16px 0;">
                <p style="margin: 0 0 8px 0; font-weight: 600; color: var(--warning-text);">🎓 Learning Reinforcement</p>
                <p style="margin: 0; font-size: 0.95rem; color: var(--warning-text-dark);">This verify step mirrors what you learned in Module 3: <strong>Approve → Verify → Iterate</strong>. Always check your output immediately after approval. If something's wrong, you know exactly which change caused it!</p>
            </div>
            
            <!-- Milestone Badges -->
            <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 12px; padding: 24px; margin: 32px 0;">
                <h4 style="margin: 0 0 12px 0; color: #1e293b; text-align: center;">🏆 Module 4 Achievement Badges</h4>
                <p style="margin: 0 0 20px 0; text-align: center; font-size: 0.9rem; color: #64748b;">Track your mastery of CLAUDE.md! Click badges as you complete each milestone. Hover for details.</p>
                
                <div id="badge-progress-m4" style="text-align: center; font-size: 1.1rem; font-weight: 600; color: var(--accent); margin-bottom: 20px;">0 of 5 badges earned</div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    <div class="badge-m4" data-badge="first-claudemd" data-desc="Created your first CLAUDE.md file">
                        <div class="badge-tooltip-m4">Created your first CLAUDE.md file with project context</div>
                        <div class="badge-icon-m4">📄</div>
                        <div class="badge-title-m4">First CLAUDE.md</div>
                    </div>
                    
                    <div class="badge-m4" data-badge="context-master" data-desc="Successfully used CLAUDE.md to generate contextual output">
                        <div class="badge-tooltip-m4">Generated output that respected your CLAUDE.md guardrails</div>
                        <div class="badge-icon-m4">🎯</div>
                        <div class="badge-title-m4">Context Master</div>
                    </div>
                    
                    <div class="badge-m4" data-badge="format-converter" data-desc="Converted .md files to multiple client formats">
                        <div class="badge-tooltip-m4">Transformed Markdown to HTML, TXT, and print formats</div>
                        <div class="badge-icon-m4">🔄</div>
                        <div class="badge-title-m4">Format Wizard</div>
                    </div>
                    
                    <div class="badge-m4" data-badge="guardrail-pro" data-desc="Understood the difference between hard constraints and soft guidelines">
                        <div class="badge-tooltip-m4">Mastered 'Never' vs 'Avoid when possible' language</div>
                        <div class="badge-icon-m4">🛡️</div>
                        <div class="badge-title-m4">Guardrail Pro</div>
                    </div>
                    
                    <div class="badge-m4" data-badge="multi-project" data-desc="Set up CLAUDE.md for multiple client projects">
                        <div class="badge-tooltip-m4">Created project-specific context files for different clients</div>
                        <div class="badge-icon-m4">📁</div>
                        <div class="badge-title-m4">Multi-Project Pro</div>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="btn secondary" id="reset-badges-m4" style="background: #94a3b8; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600;">Reset All Badges</button>
                </div>
            </div>
            
            <!-- Congratulations Modal -->
            <div id="congrats-overlay-m4" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 999;"></div>
            <div id="congrats-message-m4" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 40px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); z-index: 1000; text-align: center; max-width: 400px;">
                <div style="font-size: 4rem; margin-bottom: 20px;">🎉</div>
                <h3 style="margin: 0 0 10px; color: var(--accent);" id="congrats-title-m4">Achievement Unlocked!</h3>
                <p style="margin: 0; font-size: 1.1rem;" id="congrats-text-m4">You earned a badge!</p>
                <button class="btn" style="margin-top: 20px; background: var(--accent); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;" onclick="closeCongratsModalM4()">Awesome!</button>
            </div>
            
            <style>
            .badge-m4 {
                text-align: center;
                padding: 16px;
                background: white;
                border: 2px solid #cbd5e1;
                border-radius: 12px;
                transition: all 0.3s;
                cursor: pointer;
                position: relative;
            }
            .badge-m4:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            }
            .badge-m4.earned {
                border-color: var(--accent);
                background: var(--accent-soft);
            }
            .badge-icon-m4 {
                font-size: 2.5rem;
                margin-bottom: 8px;
                filter: grayscale(100%);
                opacity: 0.3;
                transition: all 0.3s;
            }
            .badge-m4.earned .badge-icon-m4 {
                filter: grayscale(0%);
                opacity: 1;
                animation: badgeEarnM4 0.6s ease;
            }
            @keyframes badgeEarnM4 {
                0% { transform: scale(0.5) rotate(0deg); }
                50% { transform: scale(1.2) rotate(180deg); }
                100% { transform: scale(1) rotate(360deg); }
            }
            .badge-title-m4 {
                font-size: 0.85rem;
                font-weight: 600;
                color: #1e293b;
            }
            .badge-tooltip-m4 {
                position: absolute;
                bottom: 100%;
                left: 50%;
                transform: translateX(-50%) translateY(-10px);
                background: #1e293b;
                color: white;
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 0.8rem;
                white-space: nowrap;
                opacity: 0;
                pointer-events: none;
                transition: all 0.3s;
                z-index: 10;
                max-width: 200px;
                white-space: normal;
            }
            .badge-tooltip-m4::after {
                content: '';
                position: absolute;
                top: 100%;
                left: 50%;
                transform: translateX(-50%);
                border: 6px solid transparent;
                border-top-color: #1e293b;
            }
            .badge-m4:hover .badge-tooltip-m4 {
                opacity: 1;
                transform: translateX(-50%) translateY(-5px);
            }
            @media (max-width: 768px) {
                .badge-tooltip-m4 {
                    white-space: normal;
                    max-width: 150px;
                }
            }
            </style>
            
            <script>
            // Module 4 Badge System
            const badgesM4 = document.querySelectorAll('.badge-m4');
            const badgeProgressM4 = document.getElementById('badge-progress-m4');
            const resetBadgesBtnM4 = document.getElementById('reset-badges-m4');
            const congratsOverlayM4 = document.getElementById('congrats-overlay-m4');
            const congratsMessageM4 = document.getElementById('congrats-message-m4');
            const congratsTitleM4 = document.getElementById('congrats-title-m4');
            const congratsTextM4 = document.getElementById('congrats-text-m4');
            
            let earnedBadgesM4 = JSON.parse(localStorage.getItem('earnedBadgesM4') || '[]');
            
            function updateBadgesM4() {
                let earnedCount = 0;
                badgesM4.forEach(badge => {
                    const badgeId = badge.dataset.badge;
                    if (earnedBadgesM4.includes(badgeId)) {
                        badge.classList.add('earned');
                        earnedCount++;
                    } else {
                        badge.classList.remove('earned');
                    }
                });
                badgeProgressM4.textContent = `${earnedCount} of ${badgesM4.length} badges earned`;
            }
            
            function showCongratsModalM4(title, text) {
                congratsTitleM4.textContent = title;
                congratsTextM4.textContent = text;
                congratsOverlayM4.style.display = 'block';
                congratsMessageM4.style.display = 'block';
                setTimeout(() => {
                    congratsMessageM4.style.transform = 'translate(-50%, -50%) scale(1)';
                }, 10);
            }
            
            function closeCongratsModalM4() {
                congratsMessageM4.style.transform = 'translate(-50%, -50%) scale(0)';
                setTimeout(() => {
                    congratsOverlayM4.style.display = 'none';
                    congratsMessageM4.style.display = 'none';
                }, 300);
            }
            
            badgesM4.forEach(badge => {
                badge.addEventListener('click', () => {
                    const badgeId = badge.dataset.badge;
                    const badgeDesc = badge.dataset.desc;
                    
                    if (!earnedBadgesM4.includes(badgeId)) {
                        earnedBadgesM4.push(badgeId);
                        localStorage.setItem('earnedBadgesM4', JSON.stringify(earnedBadgesM4));
                        badge.classList.add('earned');
                        updateBadgesM4();
                        showCongratsModalM4('Achievement Unlocked!', badgeDesc);
                    }
                });
            });
            
            resetBadgesBtnM4.addEventListener('click', () => {
                if (confirm('Reset all Module 4 badges? This cannot be undone.')) {
                    earnedBadgesM4 = [];
                    localStorage.setItem('earnedBadgesM4', JSON.stringify(earnedBadgesM4));
                    updateBadgesM4();
                }
            });
            
            congratsOverlayM4.addEventListener('click', closeCongratsModalM4);
            
            // Initialize badges on page load
            updateBadgesM4();
            </script>
            
            <h4 style="margin-top: 40px;">💼 Real-World Use: Sharing Your Output with Clients</h4>
            <p style="margin-bottom: 16px;">You've created <code>summary_email.md</code> — great! But before you send it to a client, you need to understand what that <code>.md</code> file actually is and how to use it professionally.</p>
            
            <div style="background: var(--info-bg); border: 2px solid var(--info-border); border-radius: 12px; padding: 24px; margin: 24px 0;">
                <h5 style="margin: 0 0 16px 0; color: var(--info-text); font-size: 1.05rem;">What is a <code>.md</code> (Markdown) File?</h5>
                <p style="margin: 0 0 16px 0; font-size: 0.95rem; color: var(--info-text-light);">
                    Markdown (<code>.md</code>) is a <strong>plain text format with simple formatting marks</strong>. It's designed to be <strong>human-readable as-is</strong>, but can also be converted to beautifully formatted documents. Think of it as the "source code" for formatted text.
                </p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div style="background: white; padding: 16px; border-radius: 8px; border-left: 4px solid var(--info-border);">
                        <h6 style="margin: 0 0 12px 0; color: var(--info-text); font-size: 0.95rem;">✅ Good for Development</h6>
                        <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; line-height: 1.8; color: #475569;">
                            <li>Quick drafts and iterations with Claude</li>
                            <li>Version control (Git)</li>
                            <li>Plain text = works everywhere</li>
                            <li>VS Code shows it formatted automatically</li>
                        </ul>
                    </div>
                    
                    <div style="background: white; padding: 16px; border-radius: 8px; border-left: 4px solid var(--error-border);">
                        <h6 style="margin: 0 0 12px 0; color: var(--error-text); font-size: 0.95rem;">❌ NOT for Client Delivery</h6>
                        <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; line-height: 1.8; color: #475569;">
                            <li>Clients might not have Markdown viewers</li>
                            <li>Looks "raw" (shows <code>**bold**</code>, <code>#</code>, etc.)</li>
                            <li>Unprofessional in email attachments</li>
                            <li>Harder to brand/customize</li>
                        </ul>
                    </div>
                </div>
                
                <h5 style="margin: 24px 0 16px 0; color: var(--info-text); font-size: 1.05rem;">📤 How to Convert for Client Delivery</h5>
                <p style="margin: 0 0 16px 0; font-size: 0.95rem; color: var(--info-text-light);">Choose the format based on your client's needs:</p>
                
                <div style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 16px;">
                    <h6 style="margin: 0 0 12px 0; color: #0f172a; font-size: 0.95rem; display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 1.2rem;">📧</span>
                        <strong>Option 1: Copy-Paste into Email (Fastest)</strong>
                    </h6>
                    <ol style="margin: 0; padding-left: 24px; font-size: 0.9rem; line-height: 1.8; color: #475569;">
                        <li>Open <code>summary_email.md</code> in VS Code (it shows formatted preview automatically)</li>
                        <li><strong>Right-click in VS Code → "Open Preview"</strong> to see formatted version</li>
                        <li><strong>Select all text</strong> from the preview (not the raw <code>.md</code>)</li>
                        <li><strong>Copy and paste</strong> directly into your email client (Gmail, Outlook, etc.)</li>
                        <li>Formatting (bold, headings, bullets) transfers automatically!</li>
                    </ol>
                    <p style="margin: 12px 0 0 0; font-size: 0.85rem; color: #64748b; font-style: italic;">✅ Best for: Quick emails, internal communication, informal updates</p>
                </div>
                
                <div style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 16px;">
                    <h6 style="margin: 0 0 12px 0; color: #0f172a; font-size: 0.95rem; display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 1.2rem;">📄</span>
                        <strong>Option 2: Export to Word (.docx) for Branded Documents</strong>
                    </h6>
                    <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #475569;">Use a free online converter like <strong>Pandoc</strong> or <strong>Dillinger.io</strong>:</p>
                    <ol style="margin: 0; padding-left: 24px; font-size: 0.9rem; line-height: 1.8; color: #475569;">
                        <li>Open <a href="https://dillinger.io" target="_blank" style="color: var(--info-border); text-decoration: underline;">Dillinger.io</a> (free, no signup)</li>
                        <li>Paste your <code>.md</code> content or import the file</li>
                        <li>Click <strong>Export As → Word (.docx)</strong></li>
                        <li>Open in Word, add your logo/header, adjust fonts → Save</li>
                    </ol>
                    <p style="margin: 12px 0 0 0; font-size: 0.85rem; color: #64748b; font-style: italic;">✅ Best for: Formal reports, branded deliverables, client presentations</p>
                </div>
                
                <div style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 16px;">
                    <h6 style="margin: 0 0 12px 0; color: #0f172a; font-size: 0.95rem; display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 1.2rem;">📑</span>
                        <strong>Option 3: Export to PDF (Most Professional)</strong>
                    </h6>
                    <ol style="margin: 0; padding-left: 24px; font-size: 0.9rem; line-height: 1.8; color: #475569;">
                        <li>Use VS Code extension: <strong>"Markdown PDF"</strong> (install from Extensions)</li>
                        <li>Right-click on <code>.md</code> file → <strong>"Markdown PDF: Export (pdf)"</strong></li>
                        <li>PDF is created in same folder, ready to send</li>
                        <li><em>Or</em> convert to Word first (Option 2), then <strong>Save As PDF</strong> from Word</li>
                    </ol>
                    <p style="margin: 12px 0 0 0; font-size: 0.85rem; color: #64748b; font-style: italic;">✅ Best for: Formal client deliverables, reports, archival documents</p>
                </div>
                
                <div style="background: white; border-radius: 8px; padding: 20px;">
                    <h6 style="margin: 0 0 12px 0; color: #0f172a; font-size: 0.95rem; display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 1.2rem;">🌐</span>
                        <strong>Option 4: Ask Claude to Convert for You!</strong>
                    </h6>
                    <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #475569;">The easiest option — let Claude do the conversion:</p>
                    <pre style="background: var(--code-bg); color: #e2e8f0; padding: 14px; border-radius: 6px; font-size: 0.9rem; margin: 0 0 12px 0; white-space: pre-wrap; word-break: break-word;"><code>$ claude "Convert summary_email.md to an HTML email template with professional styling. Include inline CSS so it displays properly in Gmail and Outlook."</code></pre>
                    <p style="margin: 0; font-size: 0.85rem; color: #64748b;"><strong>Result:</strong> Claude creates <code>summary_email.html</code> with full formatting, ready to copy-paste into any email client!</p>
                    <p style="margin: 8px 0 0 0; font-size: 0.85rem; color: #64748b; font-style: italic;">✅ Best for: HTML emails, newsletters, web-ready content</p>
                </div>
            </div>
            
            <div style="background: var(--warning-bg); border-left: 4px solid var(--warning-border); padding: 16px; border-radius: 8px; margin: 24px 0;">
                <p style="margin: 0 0 8px 0; font-weight: 600; color: var(--warning-text);">💡 Pro Workflow Tip</p>
                <p style="margin: 0; font-size: 0.9rem; color: var(--warning-text-dark);">
                    <strong>Keep <code>.md</code> as your "source of truth"</strong> for easy edits with Claude. When ready to deliver, convert to the client's preferred format (Word/PDF/HTML). This way you get the best of both worlds: fast iteration + professional delivery.
                </p>
            </div>
            
            <h4 style="margin-top: 40px;">🎯 Hands-On Exercise: Convert with Claude</h4>
            <p style="margin-bottom: 16px;">Let's practice file transformation with Claude. You'll learn how to convert formats, add styling, and handle multiple output formats — essential skills for any consultant.</p>
            
            <div style="background: var(--success-bg); border: 2px solid var(--success-border); border-radius: 12px; padding: 24px; margin: 24px 0;">
                <h5 style="margin: 0 0 16px 0; color: var(--success-text); font-size: 1.05rem;">Exercise 1: Convert to HTML Email</h5>
                <p style="margin: 0 0 16px 0; font-size: 0.95rem;">You'll ask Claude to transform your <code>summary_email.md</code> into a professional HTML email that works in Gmail and Outlook.</p>
                
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">Step 1: Make sure you're in the ClientA folder</p>
                    <pre style="background: var(--code-bg); color: #e2e8f0; padding: 12px; border-radius: 6px; font-size: 0.9rem; margin: 0; white-space: pre-wrap; word-break: break-word;"><code>$ cd ~/Desktop/Claude_Practice/ClientA
$ ls
summary_email.md</code></pre>
                    <p style="margin: 12px 0 0 0; font-size: 0.85rem; color: #64748b;">✅ You should see <code>summary_email.md</code> in the output</p>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">Step 2: Give Claude a detailed conversion prompt</p>
                    <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #475569;">Copy this exact prompt (or customize it):</p>
                    <div style="position: relative;">
                        <button onclick="copyPrompt('ex1-prompt')" style="position: absolute; top: 8px; right: 8px; background: var(--success-border); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.2s; z-index: 10;" onmouseover="this.style.background='#15803d'" onmouseout="this.style.background='var(--success-border)'">
                            📋 Copy
                        </button>
                        <pre id="ex1-prompt" style="background: var(--code-bg); color: #e2e8f0; padding: 14px 14px 14px 14px; padding-right: 80px; border-radius: 6px; font-size: 0.85rem; margin: 0; white-space: pre-wrap; word-break: break-word; line-height: 1.6;"><code>claude "Read summary_email.md and convert it to a professional HTML email template. Requirements:
- Use inline CSS (for email client compatibility)
- Professional color scheme (navy blue headers, black body text)
- Responsive design (mobile-friendly)
- Proper spacing and padding
- Save as summary_email.html
Make it look like it came from a financial consulting firm."</code></pre>
                    </div>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">Step 3: Review the diff</p>
                    <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #475569;">Claude will show you the new HTML file it wants to create. You'll see:</p>
                    <ul style="margin: 0 0 12px 0; padding-left: 24px; font-size: 0.9rem; line-height: 1.8; color: #475569;">
                        <li><code>&lt;style&gt;</code> tags with CSS for formatting</li>
                        <li><code>&lt;table&gt;</code> structure (emails use tables for layout)</li>
                        <li>Your Markdown content converted to HTML paragraphs</li>
                        <li>Professional colors and spacing</li>
                    </ul>
                    <p style="margin: 0; font-size: 0.85rem; color: #64748b; font-style: italic;">💡 Don't worry if you don't understand HTML — you're learning to spot patterns!</p>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">Step 4: Approve and verify</p>
                    <pre style="background: var(--code-bg); color: #e2e8f0; padding: 12px; border-radius: 6px; font-size: 0.9rem; margin: 0 0 12px 0; white-space: pre-wrap; word-break: break-word;"><code># Select "1 Yes" to approve

# Then verify it was created:
$ ls
CLAUDE.md  summary_email.html  summary_email.md</code></pre>
                    <p style="margin: 0; font-size: 0.85rem; color: #64748b;">You should now see 3 files! The HTML is ready to test.</p>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">Step 5: Test the HTML in your browser</p>
                    <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #475569;">Open the file to see how it looks:</p>
                    <ul style="margin: 0 0 12px 0; padding-left: 24px; font-size: 0.9rem; line-height: 1.8; color: #475569;">
                        <li><strong>Windows:</strong> Right-click <code>summary_email.html</code> → <strong>Open with → Chrome/Edge</strong></li>
                        <li><strong>Mac:</strong> Double-click <code>summary_email.html</code> (opens in Safari)</li>
                        <li><strong>VS Code:</strong> Right-click file → <strong>Open with Live Server</strong> (if installed)</li>
                    </ul>
                    <p style="margin: 0; font-size: 0.85rem; color: #16a34a; font-weight: 600;">✅ Success: You should see a professionally formatted email with headers, spacing, and styling!</p>
                </div>
            </div>
            
            <div style="background: var(--info-bg); border: 2px solid var(--info-border); border-radius: 12px; padding: 24px; margin: 24px 0;">
                <h5 style="margin: 0 0 16px 0; color: var(--info-text); font-size: 1.05rem;">Exercise 2: Create Multiple Formats at Once</h5>
                <p style="margin: 0 0 16px 0; font-size: 0.95rem;">Now let's get advanced — ask Claude to create 3 formats in one command. This teaches you about batching related tasks.</p>
                
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">The Multi-Format Prompt</p>
                    <div style="position: relative;">
                        <button onclick="copyPrompt('ex2-prompt')" style="position: absolute; top: 8px; right: 8px; background: var(--info-border); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.2s; z-index: 10;" onmouseover="this.style.background='#2563eb'" onmouseout="this.style.background='var(--info-border)'">
                            📋 Copy
                        </button>
                        <pre id="ex2-prompt" style="background: var(--code-bg); color: #e2e8f0; padding: 14px; padding-right: 80px; border-radius: 6px; font-size: 0.85rem; margin: 0; white-space: pre-wrap; word-break: break-word; line-height: 1.6;"><code>claude "Read summary_email.md and create 3 versions:
1. summary_email_plain.txt - Plain text version (no formatting, email-friendly)
2. summary_email_rich.html - Rich HTML version with modern styling (colored headers, subtle shadows, rounded corners, generous spacing)
3. summary_email_print.html - Print-optimized version (black text, serif font, page breaks)

Keep content identical, only change formatting for each medium."</code></pre>
                    </div>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">What happens?</p>
                    <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #475569;">Claude will show you a diff with <strong>3 new files being created</strong>. Review the diff to see how the SAME content looks in 3 different formats:</p>
                    
                    <div style="margin: 16px 0; padding: 12px; background: #f8fafc; border-radius: 6px; border-left: 3px solid #64748b;">
                        <p style="margin: 0 0 8px 0; font-size: 0.9rem; font-weight: 600; color: #0f172a;">📄 Plain Text (<code>summary_email_plain.txt</code>)</p>
                        <p style="margin: 0; font-size: 0.85rem; color: #475569;">No HTML tags, no colors, no styling — just raw text with line breaks. Looks like old-school email or Notepad. Perfect for email clients that strip HTML or accessibility readers.</p>
                    </div>
                    
                    <div style="margin: 16px 0; padding: 12px; background: #f0f9ff; border-radius: 6px; border-left: 3px solid #3b82f6;">
                        <p style="margin: 0 0 8px 0; font-size: 0.9rem; font-weight: 600; color: #0f172a;">✨ Rich HTML (<code>summary_email_rich.html</code>)</p>
                        <p style="margin: 0 0 8px 0; font-size: 0.85rem; color: #475569;"><strong>Modern styling means:</strong></p>
                        <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.6; color: #475569;">
                            <li><strong>Colored headers:</strong> Navy blue headings instead of plain black</li>
                            <li><strong>Subtle shadows:</strong> Drop shadows on cards/boxes for depth</li>
                            <li><strong>Rounded corners:</strong> Smooth edges (not sharp 90° angles)</li>
                            <li><strong>Generous spacing:</strong> Breathing room between sections</li>
                            <li><strong>Professional fonts:</strong> Clean sans-serif (Arial, Helvetica)</li>
                        </ul>
                        <p style="margin: 8px 0 0 0; font-size: 0.8rem; color: #64748b; font-style: italic;">Think: Modern website vs 1990s webpage</p>
                    </div>
                    
                    <div style="margin: 16px 0; padding: 12px; background: #fafafa; border-radius: 6px; border-left: 3px solid #64748b;">
                        <p style="margin: 0 0 8px 0; font-size: 0.9rem; font-weight: 600; color: #0f172a;">🖨️ Print HTML (<code>summary_email_print.html</code>)</p>
                        <p style="margin: 0; font-size: 0.85rem; color: #475569;">Optimized for physical paper: Black text (saves ink), serif fonts (easier to read on paper like Times New Roman), page breaks (sections don't split awkwardly), no background colors (prints clean). Uses <code>@media print</code> CSS to automatically switch when you hit "Print."</p>
                    </div>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">Verify all 3 files</p>
                    <pre style="background: var(--code-bg); color: #e2e8f0; padding: 12px; border-radius: 6px; font-size: 0.9rem; margin: 0 0 12px 0; white-space: pre-wrap; word-break: break-word;"><code>$ ls
CLAUDE.md               summary_email_plain.txt
summary_email.html      summary_email_print.html
summary_email.md        summary_email_rich.html</code></pre>
                    <p style="margin: 0; font-size: 0.85rem; color: #64748b;"><strong>💡 Learning moment:</strong> You just learned to <strong>batch related transformations</strong> in one request — saves time and tokens!</p>
                </div>
            </div>
            
            <div style="background: var(--warning-bg); border: 2px solid var(--warning-border); border-radius: 12px; padding: 24px; margin: 24px 0;">
                <h5 style="margin: 0 0 16px 0; color: var(--warning-text); font-size: 1.05rem;">Exercise 3 (Challenge): Add Your Company Branding</h5>
                <p style="margin: 0 0 16px 0; font-size: 0.95rem;">This is where it gets real — customize the output to match YOUR firm's style.</p>
                
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">Step 1: Update your CLAUDE.md with branding</p>
                    <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #475569;">Add this section to <code>~/Desktop/Claude_Practice/CLAUDE.md</code>:</p>
                    <div style="position: relative;">
                        <button onclick="copyPrompt('ex3-branding')" style="position: absolute; top: 8px; right: 8px; background: var(--warning-border); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.2s; z-index: 10;" onmouseover="this.style.background='#ea580c'" onmouseout="this.style.background='var(--warning-border)'">
                            📋 Copy
                        </button>
                        <pre id="ex3-branding" style="background: var(--code-bg); color: #e2e8f0; padding: 14px; padding-right: 80px; border-radius: 6px; font-size: 0.85rem; margin: 0; white-space: pre-wrap; word-break: break-word; line-height: 1.6;"><code>## Company Branding
- Primary color: #003366 (navy blue)
- Secondary color: #F5F5F5 (light gray)
- Font: Arial, sans-serif
- Logo: [Your company name] in bold at top
- Footer: "Confidential - For Client Use Only"</code></pre>
                    </div>
                    
                    <div style="background: #f0f9ff; border-left: 4px solid #3b82f6; padding: 14px; border-radius: 6px; margin-top: 16px;">
                        <p style="margin: 0 0 8px 0; font-weight: 600; color: #1e40af; font-size: 0.9rem;">💡 Manual Edit vs Claude Command</p>
                        <p style="margin: 0 0 8px 0; font-size: 0.85rem; color: #1e3a8a;">While you <em>could</em> ask Claude to add this section (<code>claude "Add a Company Branding section to CLAUDE.md with..."</code>), <strong>manually editing</strong> simple additions like this is often smarter:</p>
                        <ul style="margin: 0 0 8px 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.6; color: #1e3a8a;">
                            <li><strong>Builds familiarity:</strong> You're learning the structure of your own CLAUDE.md</li>
                            <li><strong>Saves tokens:</strong> No API call needed for a 5-line copy-paste</li>
                            <li><strong>Instant feedback:</strong> You see the change immediately, no diff review</li>
                            <li><strong>Develops judgment:</strong> You're building consciousness about when to use AI vs when to DIY</li>
                        </ul>
                        <p style="margin: 0; font-size: 0.8rem; color: #0c4a6e; font-style: italic;"><strong>Rule of thumb:</strong> Use Claude for complex generation, transformation, or analysis. Use manual editing for simple, structural changes you understand. This consciousness saves tokens for <em>meaningful</em> tasks where AI truly adds value.</p>
                    </div>
                    
                    <div style="background: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; padding: 16px; margin-top: 16px;">
                        <p style="margin: 0 0 12px 0; font-weight: 600; color: #15803d; font-size: 0.95rem;">🖥️ How to Edit CLAUDE.md in VS Code (GUI Method)</p>
                        <p style="margin: 0 0 12px 0; font-size: 0.85rem; color: #166534;">For non-coders: Using VS Code is easier than terminal and integrates better with your workflow. Here's how:</p>
                        
                        <div style="background: white; padding: 14px; border-radius: 6px; margin-bottom: 12px;">
                            <p style="margin: 0 0 10px 0; font-weight: 600; color: #0f172a; font-size: 0.9rem;">Step 1: Open Your Project Folder</p>
                            <ol style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.7; color: #475569;">
                                <li>In VS Code, click <strong>File → Open Folder</strong> (top menu)</li>
                                <li>Navigate to <strong>Desktop → Claude_Practice</strong></li>
                                <li>Click <strong>Select Folder</strong></li>
                            </ol>
                            <p style="margin: 10px 0 0 0; font-size: 0.8rem; color: #64748b; font-style: italic;">✅ You'll now see your folder structure in the left sidebar (Explorer panel)</p>
                        </div>
                        
                        <div style="background: white; padding: 14px; border-radius: 6px; margin-bottom: 12px;">
                            <p style="margin: 0 0 10px 0; font-weight: 600; color: #0f172a; font-size: 0.9rem;">Step 2: Navigate the File Tree</p>
                            <p style="margin: 0 0 10px 0; font-size: 0.85rem; color: #475569;">After completing the exercises above, your VS Code sidebar will show:</p>
                            <div style="background: #f8fafc; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 0.8rem; color: #334155; margin-bottom: 10px;">
📁 CLAUDE_PRACTICE<br>
├─ 📄 CLAUDE.md<br>
├─ 📄 index.html<br>
├─ 📁 ClientA<br>
│  ├─ 📄 summary_email.md<br>
│  ├─ 📄 summary_email.html<br>
│  ├─ 📄 summary_email_plain.txt<br>
│  ├─ 📄 summary_email_rich.html<br>
│  └─ 📄 summary_email_print.html<br>
└─ 📁 CompoundInterest<br>
   └─ 📄 index.html
                            </div>
                            <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.7; color: #475569;">
                                <li><strong>📁 Folders</strong> can be collapsed/expanded (click the arrow)</li>
                                <li><strong>📄 Files</strong> open in the editor when clicked</li>
                                <li><strong>Your location:</strong> The highlighted folder is your "current directory"</li>
                                <li><strong>Notice:</strong> ClientA now has 5 files — the original .md plus 4 converted formats!</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; padding: 14px; border-radius: 6px; margin-bottom: 12px;">
                            <p style="margin: 0 0 10px 0; font-weight: 600; color: #0f172a; font-size: 0.9rem;">Step 3: Open and Edit CLAUDE.md</p>
                            <ol style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.7; color: #475569;">
                                <li><strong>Single-click</strong> <code>CLAUDE.md</code> in the Explorer (left sidebar) → File opens in editor</li>
                                <li><strong>Scroll to the bottom</strong> of the file</li>
                                <li><strong>Paste the branding section</strong> (click Copy button above, then Ctrl+V or Cmd+V)</li>
                                <li><strong>Press Ctrl+S</strong> (Windows) or <strong>Cmd+S</strong> (Mac) to save</li>
                            </ol>
                            <p style="margin: 10px 0 0 0; font-size: 0.8rem; color: #64748b; font-style: italic;">✅ The white dot next to filename disappears when saved</p>
                        </div>
                        
                        <div style="background: white; padding: 14px; border-radius: 6px;">
                            <p style="margin: 0 0 10px 0; font-weight: 600; color: #0f172a; font-size: 0.9rem;">Step 4: Navigate to Subfolders</p>
                            <p style="margin: 0 0 10px 0; font-size: 0.85rem; color: #475569;">To work in <strong>ClientA</strong> folder:</p>
                            <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.7; color: #475569;">
                                <li><strong>Click the arrow</strong> next to 📁 ClientA to expand it</li>
                                <li><strong>Click any file</strong> inside (like summary_email.md) to open it</li>
                                <li><strong>Right-click ClientA folder</strong> → <strong>"Open in Integrated Terminal"</strong> to run Claude commands from that location</li>
                            </ul>
                            <p style="margin: 10px 0 0 0; font-size: 0.8rem; color: #0c4a6e; font-weight: 600;">💡 Pro tip: Right-clicking folders gives you quick access to terminal at that exact location — no more <code>cd</code> commands needed!</p>
                        </div>
                    </div>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">Step 2: Regenerate with branding</p>
                    <div style="position: relative;">
                        <button onclick="copyPrompt('ex3-prompt')" style="position: absolute; top: 8px; right: 8px; background: var(--warning-border); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.2s; z-index: 10;" onmouseover="this.style.background='#ea580c'" onmouseout="this.style.background='var(--warning-border)'">
                            📋 Copy
                        </button>
                        <pre id="ex3-prompt" style="background: var(--code-bg); color: #e2e8f0; padding: 14px; padding-right: 80px; border-radius: 6px; font-size: 0.85rem; margin: 0; white-space: pre-wrap; word-break: break-word; line-height: 1.6;"><code>cd ClientA
claude "Recreate summary_email_rich.html using the branding guidelines from CLAUDE.md. Apply our company colors, add the logo header, and include the confidential footer."</code></pre>
                    </div>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px;">
                    <p style="margin: 0 0 12px 0; font-weight: 600; color: #0f172a;">What you'll learn</p>
                    <ul style="margin: 0; padding-left: 24px; font-size: 0.9rem; line-height: 1.8; color: #475569;">
                        <li>How <code>CLAUDE.md</code> influences styling (not just content)</li>
                        <li>How to iterate on design without rewriting prompts</li>
                        <li>How to create branded templates reusable for all clients</li>
                    </ul>
                    <p style="margin: 12px 0 0 0; font-size: 0.85rem; color: #ea580c; font-weight: 600;">🎯 Challenge: Can you get Claude to match your ACTUAL company's branding?</p>
                </div>
            </div>
            
            <div style="background: linear-gradient(135deg, #dcfce7 0%, #f0fdf4 100%); border-left: 4px solid var(--success-border); padding: 20px; border-radius: 8px; margin: 24px 0;">
                <h5 style="margin: 0 0 12px 0; color: var(--success-text); font-size: 1rem;">🎓 What You Just Mastered</h5>
                <ul style="margin: 0; padding-left: 24px; font-size: 0.95rem; line-height: 1.8; color: var(--success-text-dark);">
                    <li><strong>File transformation:</strong> Markdown → HTML (with styling)</li>
                    <li><strong>Batch operations:</strong> Create multiple formats in one request</li>
                    <li><strong>Format-specific optimization:</strong> Email vs print vs plain text</li>
                    <li><strong>Context-aware generation:</strong> Using CLAUDE.md for branding</li>
                    <li><strong>Iterative refinement:</strong> Regenerate with new requirements</li>
                </ul>
                <p style="margin: 16px 0 0 0; font-size: 0.9rem; color: var(--success-text-dark); font-style: italic;">These are professional-grade skills that work for proposals, reports, newsletters, client updates — any document you create!</p>
            </div>
        </div>
    </section>
    
    <!-- 8. REFLECTION & KNOWLEDGE CHECK -->
    <section class="module-section">
        <h2><span class="icon-prefix">🤔</span>Reflection & Knowledge Check</h2>
        <div class="reflection-box">
            <h4>Reflect on Your Workflow</h4>
            <ol>
                <li>What are the three most important elements you believe every `CLAUDE.md` file for your work must include? (e.g., Compliance rules, client communication style, etc.)</li>
                <li>Think of a recent time a junior analyst misunderstood your instructions. How could a `CLAUDE.md`-style briefing have prevented that misunderstanding?</li>
                <li>What is one rule or preference you will add to your *global* `CLAUDE.md` file (`~/.claude/CLAUDE.md`) that applies to all your projects?</li>
            </ol>
        </div>
        <div id="quiz-container" class="quiz-container" style="margin-top: 32px;">
            <!-- Quiz will be injected by JS -->
        </div>
    </section>

    <!-- 8.1 SCENARIO QUIZ (RTC STYLE) -->
    <section class="module-section">
        <h2><span class="icon-prefix">🧩</span>Scenario Quiz (RTC)</h2>
        <div id="rtc-quiz" class="soft-card" role="region" aria-label="Scenario-based quiz"></div>
        <div id="rtc-badge" class="pill" style="display:none; margin-top:10px">Context Architect ✓</div>
    </section>

    <!-- 8.2 FAQ -->
    <section class="module-section">
        <h2><span class="icon-prefix">❓</span>Frequently Asked Questions</h2>
        <div id="m4-faq" class="accordion" role="region" aria-label="Module 4 FAQ">
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="false" role="button" aria-controls="faq1" tabindex="0">Can `CLAUDE.md` override my prompt?</button>
                <div class="accordion-content" id="faq1">
                    <p>`CLAUDE.md` establishes durable guidance—tone, guardrails, and preferences—so you don't repeat yourself. Your prompt still drives the task at hand. When there's tension, Claude attempts to reconcile both, but specific, explicit instructions in the prompt typically take precedence.</p>
                    <p><strong>Best practice:</strong> Place non‑negotiables (compliance, privacy, forbidden content) under a <strong>Guardrails</strong> section inside `CLAUDE.md`, and keep transient, task‑specific details in the prompt. This separation keeps outputs predictable and safe.</p>
                    <p style="margin-top: 12px; font-size: 0.9rem;"><strong>What are Guardrails?</strong> Non‑negotiable safety and compliance rules that constrain AI outputs. Examples: "Never include PII," "Don't show dollar amounts in summaries," "Avoid medical advice." Think of them as hard boundaries that should never be crossed, regardless of the prompt.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="false" role="button" aria-controls="faq2" tabindex="0">Where should I keep sensitive data?</button>
                <div class="accordion-content" id="faq2">
                    <p><strong>Never store credentials, client PII, or confidential figures in `CLAUDE.md`.</strong> Use your organization's secret manager or environment variables, and only pass minimal, sanitized context to Claude. Remember: context should guide style and process, not reveal sensitive data.</p>
                    <p>Reinforce safety by adding explicit guardrails in your `CLAUDE.md` file. Example:</p>
                    <pre style="background: var(--code-bg); color: #e2e8f0; padding: 12px; border-radius: 6px; font-size: 0.85rem; margin: 12px 0;"><code>## Guardrails
- CRITICAL: Never include client PII (names, SSNs, account numbers)
- Never display specific dollar amounts in summary emails
- Do not include passwords or API keys in any output</code></pre>
                    <p style="margin-top: 12px;">For more on AI safety and responsible use, see <a href="https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/be-clear-and-direct" target="_blank" style="color: var(--info-border); text-decoration: underline;">Anthropic's Prompt Engineering Guide</a> and your firm's security policies.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="false" role="button" aria-controls="faq3" tabindex="0">What happens if there are multiple `CLAUDE.md` files?</button>
                <div class="accordion-content" id="faq3">
                    <p>Claude Code uses your current workspace context (project root). Multiple `CLAUDE.md` files can create ambiguity and conflicting instructions. Prefer one authoritative file per project for clarity and traceability.</p>
                    <p>If you need layers, separate a global profile (`~/.claude/CLAUDE.md`) for timeless preferences and a project‑specific file for client or repo details. Keep boundaries crisp to prevent accidental overrides. <a href="#glossary-section">See ‘Working Directory’</a>.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="false" role="button" aria-controls="faq4" tabindex="0">How often should I update `CLAUDE.md`?</button>
                <div class="accordion-content" id="faq4">
                    <p>Treat `CLAUDE.md` like a living brief. Update it whenever you notice repetitive corrections (e.g., tone tweaks, recurring guardrails) or add a new data source. The cost of small edits pays back with faster, cleaner outputs across every future task in that project.</p>
                    <p>Establish a lightweight cadence—weekly or after each milestone—to fold learning back into the brief. Keep diffs small and scoped so changes remain reviewable. <a href="#glossary-section">See ‘Approval Workflow’</a>.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="false" role="button" aria-controls="faq5" tabindex="0">What if Claude seems to ignore my `CLAUDE.md`?</button>
                <div class="accordion-content" id="faq5">
                    <p>First, confirm you’re in the correct working directory and the filename is exactly `CLAUDE.md`. Next, simplify the file: move critical items to the top, clarify guardrails, and remove contradictory or redundant guidance. Then retry the same prompt to isolate the change.</p>
                    <p>If behavior persists, restate key constraints in your prompt, and consider splitting verbose sections into concise bullet points. Smaller, high‑signal briefs are easier for models to honor. <a href="#glossary-section">See ‘Working Directory’</a>.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="false" role="button" aria-controls="faq6" tabindex="0">Can I include examples or templates in `CLAUDE.md`?</button>
                <div class="accordion-content" id="faq6">
                    <p>Yes—short, representative examples are powerful anchors for tone, structure, and detail. Add a one‑paragraph sample email or a brief code snippet that demonstrates your preferred style. Keep examples concise to preserve the context window for the current task.</p>
                    <p>Label them clearly (e.g., “Example: client‑friendly summary”) and avoid confidential text. Rotate stale examples to prevent unintentional overfitting to outdated patterns. <a href="#glossary-section">See ‘Context Window’</a>.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header" aria-expanded="false" role="button" aria-controls="faq7" tabindex="0">How big is too big for `CLAUDE.md`?</button>
                <div class="accordion-content" id="faq7">
                    <p>Favor brevity and signal density. Long briefs can dilute key instructions and consume unnecessary context. Aim for one screenful per major section (Goals, Tone, Data, Guardrails). If you need more, split into modular docs and reference them explicitly in the prompt.</p>
                    <p>Periodically prune old or duplicative lines. A crisp, current brief drives better adherence than an exhaustive one. <a href="#glossary-section">See ‘Context Window’</a>.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 8.3 GLOSSARY -->
    <section class="module-section" id="glossary-section">
        <h2><span class="icon-prefix">📚</span>Glossary (Module 4)</h2>
        <div id="glossary-accordion" class="accordion" role="region" aria-label="Glossary">
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g1" tabindex="0">CLAUDE.md</button><div class="accordion-content" id="g1"><p>Project briefing file with goals, tone, data sources, and guardrails that Claude Code can load when present to shape responses.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g2" tabindex="0">Working Directory</button><div class="accordion-content" id="g2"><p>Your current project folder; Claude Code uses this to locate files like <code>CLAUDE.md</code> and referenced assets.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g3" tabindex="0">Guardrails</button><div class="accordion-content" id="g3"><p>Non‑negotiable safety and compliance rules (e.g., no PII, no dollar amounts) that constrain outputs.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g4" tabindex="0">Tone</button><div class="accordion-content" id="g4"><p>Style and voice guidance (e.g., professional, reassuring). Put durable guidance in <code>CLAUDE.md</code>, specifics in prompts.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g5" tabindex="0">Data Sources</button><div class="accordion-content" id="g5"><p>Authoritative file paths or tables to use (e.g., <code>Q4_financials.csv</code>) to minimize ambiguity.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g6" tabindex="0">Goals</button><div class="accordion-content" id="g6"><p>Objectives that define success criteria (what the output must achieve) for focused results.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g7" tabindex="0">Context Window</button><div class="accordion-content" id="g7"><p>The amount of information the model can consider at once; concise, high‑signal context works best.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g8" tabindex="0">Diff View</button><div class="accordion-content" id="g8"><p>Side‑by‑side or inline preview of Claude’s proposed file edits, highlighting additions and removals for review.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g9" tabindex="0">Approval Modal</button><div class="accordion-content" id="g9"><p>Editor dialog where you approve or reject proposed changes before Claude writes to your files.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g10" tabindex="0">Prompt Injection</button><div class="accordion-content" id="g10"><p>Unintended instructions in prompts or context that override your intent; mitigate with clear Guardrails and review.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g11" tabindex="0">Version Control Commit</button><div class="accordion-content" id="g11"><p>A recorded snapshot of changes in your repository with a message explaining the intent.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g12" tabindex="0">Rollback</button><div class="accordion-content" id="g12"><p>Returning to a prior known‑good state. You can ask Claude to generate a revert diff if needed.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g13" tabindex="0">Approval Workflow</button><div class="accordion-content" id="g13"><p>The human‑in‑the‑loop loop: Prompt → Diff → Approve → Apply, ensuring control and safety.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g14" tabindex="0">Seat License</button><div class="accordion-content" id="g14"><p>Access model where users are provisioned individual seats; billing and policies managed centrally.</p></div></div>
            <div class="accordion-item"><button class="accordion-header" aria-expanded="false" role="button" aria-controls="g15" tabindex="0">PATH</button><div class="accordion-content" id="g15"><p>Your OS’s list of folders it searches for commands like <code>claude</code>; reopening the terminal refreshes changes.</p></div></div>
        </div>
    </section>

    <!-- 9. BRIDGE TO MODULE 5 -->
    <section class="module-section">
        <div class="bridge-box">
            <h2>You’ve Taught Claude — Now Teach Your Practice</h2>
            <h3>Where you are now:</h3>
            <p>You can create high-quality, personalized outputs by providing Claude with clear, persistent context using the `CLAUDE.md` file.</p>
            <h3>Where you’re going next:</h3>
            <p>In Module 5, you’ll learn to scale these habits by chaining tasks, automating multi-step workflows, and turning AI insights into strategic consulting roadmaps.</p>
            <a href="claude_code_for_financial_consultants_part_5.html">Continue to 🚀 Module 5: Becoming an AI-Native Consultant</a>
        </div>
    </section>

 </div>

 <footer class="site-footer">
   <p>Module 4 of 6 in the "Claude for Consultants" Series</p>
 </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- Module Navigation with Completion Tracking ---
    const currentModule = 4;
    
    // Mark completed modules in nav
    for (let i = 0; i < currentModule; i++) {
        if (localStorage.getItem(`module${i}_completed`)) {
            const link = document.querySelector(`.module-link[data-module="${i}"]`);
            if (link) link.classList.add('completed');
        }
    }
    
    // Header minimization on scroll
    const siteHeader = document.querySelector('.site-header');
    const moduleNav = document.querySelector('.module-nav');
    let lastScrollY = window.scrollY;
    
    // Mark current module as completed when user scrolls to bottom
    let completionMarked = false;
    window.addEventListener('scroll', () => {
        // Header minimization logic
        const currentScrollY = window.scrollY;
        if (currentScrollY > 100) {
            siteHeader.classList.add('minimized');
            moduleNav.classList.add('minimized');
        } else {
            siteHeader.classList.remove('minimized');
            moduleNav.classList.remove('minimized');
        }
        lastScrollY = currentScrollY;
        
        if (completionMarked) return;
        const scrollHeight = document.documentElement.scrollHeight;
        const scrollTop = document.documentElement.scrollTop;
        const clientHeight = document.documentElement.clientHeight;
        
        if (scrollTop + clientHeight >= scrollHeight - 100) {
            localStorage.setItem(`module${currentModule}_completed`, 'true');
            completionMarked = true;
            const link = document.querySelector(`.module-link[data-module="${currentModule}"]`);
            if (link) link.classList.add('completed');
        }
    });
    
    // Mobile carousel navigation
    const navInner = document.getElementById('moduleNavInner');
    const navPrev = document.getElementById('navPrev');
    const navNext = document.getElementById('navNext');
    
    if (navInner && navPrev && navNext) {
        // Scroll to active module on load (mobile)
        const activeLink = navInner.querySelector('.module-link.active');
        if (activeLink && window.innerWidth <= 768) {
            activeLink.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }
        
        // Prev/Next button handlers
        navPrev.addEventListener('click', () => {
            navInner.scrollBy({ left: -160, behavior: 'smooth' });
        });
        
        navNext.addEventListener('click', () => {
            navInner.scrollBy({ left: 160, behavior: 'smooth' });
        });
        
        // Update button states on scroll
        function updateNavButtons() {
            const scrollLeft = navInner.scrollLeft;
            const scrollWidth = navInner.scrollWidth;
            const clientWidth = navInner.clientWidth;
            
            navPrev.disabled = scrollLeft <= 0;
            navNext.disabled = scrollLeft + clientWidth >= scrollWidth - 5;
        }
        
        navInner.addEventListener('scroll', updateNavButtons);
        window.addEventListener('resize', updateNavButtons);
        updateNavButtons();
    }
    
    // --- Rest of Module 4 JavaScript ---
    // --- Module 4 Namespace ---
    function initModule4() {
        setupAccordions('comparison-accordion');
        setupAccordions('m4-faq');
        setupAccordions('glossary-accordion');
        setupDragDropQuiz();
        setupQuiz();
        injectKeyTips();
    }

    // --- Accordion Setup ---
    function setupAccordions(containerId) {
        const container = document.getElementById(containerId);
        if (!container) return;
        
        container.addEventListener('click', (e) => {
            const header = e.target.closest('.accordion-header');
            if (header) {
                const content = header.nextElementSibling;
                const expanded = header.getAttribute('aria-expanded') === 'true';
                header.setAttribute('aria-expanded', !expanded);
                content.style.display = expanded ? 'none' : 'block';
                
                // Close other accordions in the same group
                if (!expanded) {
                    const group = header.closest('.accordion');
                    group.querySelectorAll('.accordion-header').forEach(otherHeader => {
                        if (otherHeader !== header) {
                            otherHeader.setAttribute('aria-expanded', 'false');
                            otherHeader.nextElementSibling.style.display = 'none';
                        }
                    });
                }
            }
        });
        
        // Auto-expand the second accordion item on page load for the demo
        const secondHeader = container.querySelector('.accordion-item:nth-child(2) .accordion-header');
        if (secondHeader) {
            secondHeader.setAttribute('aria-expanded', 'true');
            secondHeader.nextElementSibling.style.display = 'block';
        }
    }

    // --- Drag and Drop Quiz for Iteration Loop ---
    function setupDragDropQuiz() {
        const dropContainer = document.getElementById('drop-container');
        const dragOptions = document.querySelectorAll('.drag-option');
        const feedbackEl = document.getElementById('drag-feedback');
        const resetBtn = document.getElementById('drag-reset');
        if (!dropContainer || !dragOptions.length || !feedbackEl) return;

        let draggedItem = null;
        const correctOrder = [
            "1. Give Claude a prompt",
            "2. See a mistake in the output",
            "3. Improve the `CLAUDE.md` file",
            "4. Re-run the same prompt"
        ];
        let attempts = 0;

        dragOptions.forEach(option => {
            option.addEventListener('dragstart', function() {
                draggedItem = this;
                setTimeout(() => this.style.display = 'none', 0);
            });

            option.addEventListener('dragend', function() {
                setTimeout(() => {
                    draggedItem.style.display = 'block';
                    draggedItem = null;
                }, 0);
            });
        });

        dropContainer.addEventListener('dragover', e => {
            e.preventDefault();
            dropContainer.classList.add('over');
        });
        dropContainer.addEventListener('dragleave', () => dropContainer.classList.remove('over'));
        dropContainer.addEventListener('drop', e => {
            e.preventDefault();
            if (draggedItem) {
                dropContainer.appendChild(draggedItem);
                draggedItem.style.display = 'inline-flex';
                dropContainer.classList.remove('over');
                checkOrder();
            }
        });

        function checkOrder() {
            const currentItems = Array.from(dropContainer.children).map(child => child.textContent.trim());
            if (currentItems.length === correctOrder.length) {
                const isCorrect = JSON.stringify(currentItems) === JSON.stringify(correctOrder);
                if (isCorrect) {
                    feedbackEl.textContent = "✅ Perfect! You've mastered the loop: improve the instructions, not just the output.";
                    feedbackEl.style.color = 'var(--ok)';
                } else {
                    attempts++;
                    if (attempts < 2) {
                        feedbackEl.textContent = "❌ Not quite in the right order. Try again!";
                        feedbackEl.style.color = 'var(--bad)';
                    } else {
                        // After two failed attempts, reveal the answer and why
                        reorderToCorrect();
                        feedbackEl.innerHTML = "✅ Correct order shown: <br>1) Ask Claude → 2) Review Output → 3) Refine CLAUDE.md → 4) Ask Again.<br><span style='font-weight:600'>Why:</span> Fix the <em>instructions</em> so all future runs benefit — not just the one output.";
                        feedbackEl.style.color = 'var(--ok)';
                    }
                }
            } else {
                feedbackEl.textContent = "";
            }
        }

        function reorderToCorrect() {
            const all = Array.from(document.querySelectorAll('.drag-option'));
            correctOrder.forEach(text => {
                const el = all.find(i => i.textContent.trim() === text);
                if (el) {
                    dropContainer.appendChild(el);
                    el.classList.add('dropped');
                }
            });
        }

        if (resetBtn) {
            resetBtn.addEventListener('click', () => {
                attempts = 0;
                feedbackEl.textContent = '';
                const optionsParent = document.getElementById('drag-options');
                Array.from(dropContainer.querySelectorAll('.drag-option')).forEach(el => {
                    el.classList.remove('dropped');
                    optionsParent.appendChild(el);
                });
            });
        }
    }

    // --- Final Knowledge Check Quiz ---
    function setupQuiz() {
        const quizContainer = document.getElementById('quiz-container');
        if (!quizContainer) return;

        const quizData = [
            { q: "What is the primary purpose of the `CLAUDE.md` file?", correct: 1, options: ["To store your API key and billing information for Claude Code.", "To provide persistent, project-specific instructions and context to Claude.", "To replace your project's main README file with AI-specific content.", "To log all the errors and mistakes that Claude makes during development."], explanation: "Correct! `CLAUDE.md` acts as a briefing document that Claude reads automatically, ensuring it understands your project's goals, tone, and rules without you repeating them in every prompt." },
            { q: "If Claude produces an email draft with a tone that is too casual, what is the MOST effective long-term solution?", correct: 2, options: ["Delete the output and write the email yourself to save time.", "Tell Claude in the next prompt: 'make it more professional' and hope it remembers.", "Edit the 'Tone' section in your `CLAUDE.md` file to be more specific, then ask again.", "Start a completely new project in a different folder with better settings."], explanation: "Correct! While asking for a change works once, updating the `CLAUDE.md` file 'teaches' Claude the correct tone for all future requests in that project, saving you time and effort in the long run." },
            { q: "Claude can't find your `client_data.csv` file, even though it's on your Desktop. What is the most likely reason?", correct: 3, options: ["The file is too large for Claude to read and process efficiently.", "You need to grant Claude special permissions to access your Desktop folder.", "The `CLAUDE.md` file is missing from your project directory.", "Your terminal's 'working directory' is not set to the correct project folder containing the file."], explanation: "Correct! Claude's world is limited to your current working directory. If you haven't used `cd` to navigate into the correct project folder, it won't be able to see the files within it." },
            { q: "Which of these is the BEST example of a 'Guardrail' to include in `CLAUDE.md` for a financial consulting project?", correct: 0, options: ["CRITICAL: Do not include any Personally Identifiable Information (PII) in final reports.", "Use a friendly and approachable tone in all client communications.", "The main data source is `investments.csv` located in the project folder.", "The goal is to analyze Q4 performance and generate actionable insights."], explanation: "Correct! A guardrail is a hard rule or constraint designed to ensure safety and compliance. Preventing the exposure of PII is a critical safety instruction, making it a perfect guardrail." },
            { q: "The 'Context Iteration Loop' is best described as:", correct: 2, options: ["A way to make Claude repeat the same task over and over.", "A process for reporting bugs in Claude.", "A cycle of refining your `CLAUDE.md` context file based on Claude's output to improve future results.", "A method for clearing Claude's memory when it gets confused."], explanation: "Correct! The loop emphasizes improving the *instructions* (`CLAUDE.md`) when you see a suboptimal output, which leads to better results on all subsequent tasks." }
        ];

        let currentQuestionIndex = 0;
        
        function renderQuestion() {
            const qData = quizData[currentQuestionIndex];
            const optionsHTML = qData.options.map((opt, index) => `
                <div class="quiz-option" data-option-index="${index}">
                    <label>
                        <input type="radio" name="q${currentQuestionIndex}" value="${index}">
                        <span>${opt}</span>
                    </label>
                    <div class="explanation">${qData.explanation}</div>
                </div>`).join('');
            
            quizContainer.innerHTML = `
                <div class="quiz-navigation">
                    <button class="btn" id="quiz-prev-btn" ${currentQuestionIndex === 0 ? 'disabled' : ''}>❮</button>
                    <span><strong>Knowledge Check</strong> (${currentQuestionIndex + 1}/${quizData.length})</span>
                    <button class="btn" id="quiz-next-btn" ${currentQuestionIndex === quizData.length - 1 ? 'disabled' : ''}>❯</button>
                </div>
                <div class="quiz-body active">
                    <p><strong>${qData.q}</strong></p>
                    <div class="quiz-options">${optionsHTML}</div>
                </div>
            `;
            
            quizContainer.querySelectorAll('.quiz-option input').forEach(radio => {
                radio.addEventListener('change', handleOptionSelect);
            });
            document.getElementById('quiz-prev-btn').addEventListener('click', () => { if (currentQuestionIndex > 0) { currentQuestionIndex--; renderQuestion(); } });
            document.getElementById('quiz-next-btn').addEventListener('click', () => { if (currentQuestionIndex < quizData.length - 1) { currentQuestionIndex++; renderQuestion(); } });
        }

        function handleOptionSelect(e) {
            const selectedOptionIndex = parseInt(e.target.value);
            const qData = quizData[currentQuestionIndex];
            const parentQuestionDiv = e.target.closest('.quiz-body');

            parentQuestionDiv.querySelectorAll('input[type="radio"]').forEach(input => input.disabled = true);
            
            const selectedOptionDiv = e.target.closest('.quiz-option');
            selectedOptionDiv.classList.add('selected');
            selectedOptionDiv.querySelector('.explanation').style.display = 'block';

            if (selectedOptionIndex === qData.correct) {
                selectedOptionDiv.classList.add('correct');
            } else {
                selectedOptionDiv.classList.add('wrong');
                const correctOptionDiv = parentQuestionDiv.querySelector(`.quiz-option[data-option-index="${qData.correct}"]`);
                if(correctOptionDiv) correctOptionDiv.classList.add('correct');
            }
        }
        
        renderQuestion();
    }

    // --- Scenario-based RTC Quiz ---
    (function setupRTCQuiz(){
        const el = document.getElementById('rtc-quiz');
        const badge = document.getElementById('rtc-badge');
        console.log('RTC Quiz Setup - Element found:', el);
        if (!el) {
            console.error('rtc-quiz element not found!');
            return;
        }
        
        // PROPER RTC FORMAT: Rich Scenario + 6 Progressive Questions
        const rtcScenario = {
            passage: `Sarah Martinez runs a boutique financial advisory firm serving high-net-worth clients. After attending a workshop on AI tools, she decided to implement Claude Code for generating client reports and investment summaries. She created a CLAUDE.md file in her main project directory with sections for Context ("We're a boutique advisory firm specializing in sustainable investing"), Tone ("Professional, reassuring, avoid technical jargon"), Data Sources ("client_portfolios.csv for holdings"), and Guardrails ("Never disclose exact account balances or Social Security numbers in summaries"). 

For her first test, Sarah asked Claude to generate a quarterly summary email for Client A. The output was well-structured and professional, but it included specific dollar amounts like "$1.2M in equities" and used phrases like "ESG metrics" and "basis points" throughout—exactly what her guardrails and tone guidelines were meant to prevent. Frustrated, Sarah wondered if CLAUDE.md was working at all. Her colleague Michael suggested the issue might be how she phrased her guardrails and whether Claude was actually reading the file from the correct directory.`,
            
            questions: [
                {
                    type: "MCQ",
                    question: "What is the most likely reason Claude included specific dollar amounts despite Sarah's guardrails?",
                    options: [
                        'Sarah used "Never disclose" instead of "Avoid" in her Guardrails section',
                        'Sarah\'s guardrail said "exact account balances" but the prompt asked for a "summary," creating ambiguity',
                        'Claude Code doesn\'t support numerical guardrails in CLAUDE.md files',
                        'The CLAUDE.md file was in the wrong directory and Claude didn\'t load it'
                    ],
                    correct: 1,
                    explanation: {
                        whyCorrect: "Option B is exactly right! Sarah's guardrail specified \"Never disclose exact account balances,\" but she asked Claude to generate a \"quarterly summary.\" Claude interpreted \"$1.2M in equities\" as summary-level information (rounded, contextual), not an \"exact balance\" (like $1,234,567.89). This is a classic example of **semantic ambiguity** in AI instructions. Words like \"exact,\" \"specific,\" and \"detailed\" need precise definitions—what YOU mean by \"exact\" may differ from how an AI interprets it in context. The guardrail was too narrow, leaving room for Claude to include dollar figures it deemed \"summary-appropriate.\"",
                        whyWrong: {
                            0: "Wrong. \"Never\" is actually STRONGER than \"Avoid\"—Sarah used the right command intensity. The problem wasn't the strength of the prohibition, but its **scope**. \"Never disclose exact account balances\" is too specific; Claude included rounded summary figures, which it didn't consider \"exact balances.\"",
                            2: "Wrong. Claude Code fully supports numerical guardrails—you can prohibit dollar amounts, percentages, dates, or any data type. The issue here isn't technical capability, but **linguistic precision**. Sarah's guardrail was too narrow (\"exact balances\") when she needed a broader rule like \"Never include any dollar amounts in client emails.\"",
                            3: "Wrong. If Claude hadn't loaded CLAUDE.md, it would have NO guidance on tone, data sources, or guardrails. But the output was \"well-structured and professional\"—showing Claude DID apply some context. The problem was that the guardrail's wording left a loophole, not that the file wasn't read."
                        },
                        connectConcept: "In CLAUDE.md design, **precision beats brevity**. Guardrails must cover edge cases and semantic variations. Instead of \"Never disclose exact account balances,\" Sarah should write \"Never include dollar amounts, percentages, or account values in client summaries—use qualitative descriptions only (e.g., 'portfolio performed well').\" This eliminates ambiguity and prevents Claude from exploiting loopholes.",
                        proTip: "When analyzing why AI failed to follow instructions, always check for **semantic loopholes** first. AI interprets words literally—\"exact balance\" vs \"summary figure\" are distinct concepts. In real-world CLAUDE.md debugging, test edge cases: if your guardrail says \"no exact balances,\" try prompts asking for \"summary values\" to see if Claude finds a loophole."
                    }
                },
                {
                    type: "FTB",
                    question: "The principle that guardrails should eliminate all possible interpretations of prohibited content, not just literal matches, is called ensuring _______ coverage.",
                    correct: "semantic",
                    explanation: {
                        whyCorrect: '"Semantic" is the perfect answer! Semantic coverage means your guardrails account for all MEANINGS and INTERPRETATIONS of restricted content, not just exact wording. Sarah\'s guardrail blocked "exact account balances" (literal phrase) but missed "summary dollar amounts" (semantic equivalent). Semantic coverage would require phrasing like "no financial figures of any kind" to close loopholes. This concept is crucial in prompt engineering, legal contracts, and compliance—what matters isn\'t the exact words, but the underlying meaning.',
                        whyWrong: 'Incorrect. The answer is "semantic." This refers to meaning-based coverage, ensuring rules apply to all interpretations of prohibited content, not just literal matches.',
                        connectConcept: 'Semantic coverage is why lawyers write "including but not limited to" in contracts—it signals that examples are illustrative, not exhaustive. In CLAUDE.md, achieve semantic coverage by: (1) using broad category terms ("financial data" vs "account balances"), (2) providing examples with "e.g." to show scope, (3) explicitly stating edge cases ("this includes rounded figures, percentages, and ranges").',
                        proTip: 'Module 4 tests your understanding of instruction design. Remember: AI follows instructions LITERALLY unless you guide interpretation. "Semantic coverage" means thinking like a lawyer—what loopholes exist? How could this be misinterpreted? Close those gaps with precise language.'
                    }
                },
                {
                    type: "SAQ",
                    question: "Identify TWO specific changes Sarah should make to her Guardrails section to prevent dollar amounts from appearing in future outputs.",
                    options: [
                        'Replace "exact account balances" with "any dollar amounts, percentages, or numerical portfolio values"',
                        'Move the guardrail from the Guardrails section to the Tone section for stronger enforcement',
                        'Add "this includes summary figures, rounded amounts, and relative comparisons" to clarify scope',
                        'Use softer language like "Prefer to avoid" instead of "Never" to give Claude more flexibility'
                    ],
                    correct: [0, 2],
                    explanation: {
                        whyCorrect: 'Options A and C together create airtight protection! **Option A** broadens the scope from narrow ("exact balances") to comprehensive ("any dollar amounts, percentages, or numerical values"), eliminating the loophole Claude exploited. **Option C** adds explicit clarification of edge cases—"summary figures, rounded amounts, relative comparisons"—so Claude can\'t argue "$1.2M" is acceptable because it\'s "rounded." Together, these changes provide both breadth (Option A) and specificity (Option C), the hallmark of well-designed guardrails.',
                        whyWrong: {
                            1: 'Moving guardrails to the Tone section weakens them! Guardrails are **hard constraints** (absolute rules), while Tone is **soft guidance** (preferences). Mixing them confuses Claude about what\'s mandatory vs. optional. Keep safety rules in Guardrails where they\'re unambiguous.',
                            3: 'Terrible idea! "Prefer to avoid" transforms a guardrail into a suggestion. Claude might include dollar amounts if the prompt implies they\'re contextually appropriate. For compliance-critical rules (financial data, PII, medical info), use absolute language: "Never," "Always," "Must not." Flexibility is dangerous for safety.'
                        },
                        connectConcept: 'Effective guardrail design follows the **"Category + Examples + Edge Cases"** pattern: (1) State the broad category ("any financial figures"), (2) Give examples ("dollar amounts, percentages, ratios"), (3) Clarify edge cases ("including rounded estimates"). This three-layer approach prevents both over-generalization and loophole exploitation.',
                        proTip: 'Short-answer questions test application, not just recall. When asked for "TWO changes," look for complementary fixes—one that broadens scope, one that clarifies edges. Avoid redundant answers (both saying the same thing) or contradictory ones (strengthen + weaken).'
                    }
                },
                {
                    type: "MCQ",
                    question: "Sarah noticed Claude used jargon like \"ESG metrics\" and \"basis points\" despite her Tone guideline to \"avoid technical jargon.\" What is the most effective way to improve this?",
                    options: [
                        'Change "avoid technical jargon" to "NEVER use technical jargon" for stronger enforcement',
                        'Add a Jargon Blacklist subsection under Tone with specific terms to replace (e.g., "Use \'sustainable investing\' not \'ESG\'")  ',
                        'Move the anti-jargon rule from Tone to Guardrails so it\'s treated as mandatory',
                        'Remove the jargon guideline entirely and rely on Claude\'s judgment about audience'
                    ],
                    correct: 1,
                    explanation: {
                        whyCorrect: 'Option B is the gold standard! "Avoid technical jargon" is vague—what counts as jargon? "ESG" might seem standard to finance professionals but confusing to clients. By creating a **Jargon Blacklist** with specific replacements ("sustainable investing" not "ESG," "percentage points" not "basis points"), Sarah gives Claude unambiguous guidance. This is the "show, don\'t tell" principle—concrete examples anchor AI behavior far better than abstract rules. The blacklist also serves as a living reference Sarah can expand as new jargon emerges.',
                        whyWrong: {
                            0: 'Changing "avoid" to "NEVER" increases intensity but doesn\'t solve the root problem—**ambiguity**. Claude still doesn\'t know what qualifies as "technical jargon." Is "portfolio" jargon? What about "equities"? Stronger wording without clearer definitions just makes Claude more cautious across the board, potentially avoiding even appropriate financial terms.',
                            2: 'Misuse of Guardrails! Jargon avoidance is a **style preference** (how to communicate), not a **safety rule** (what to never disclose). Guardrails are for compliance risks—PII, financial figures, medical advice. Tone handles communication style. Mixing them dilutes the importance of true safety rules and confuses Claude about priority.',
                            3: 'Terrible! Removing the guideline assumes Claude magically knows Sarah\'s client base. AI doesn\'t understand audience context unless you provide it. Without explicit guidance, Claude defaults to its training data—formal, technical language. For client-facing content, you MUST specify tone and vocabulary level.'
                        },
                        connectConcept: 'This demonstrates the **"Concrete > Abstract"** principle in prompt engineering. Abstract rules ("be clear," "avoid jargon") are subjective and model-dependent. Concrete examples ("say X not Y") are objective and universally interpretable. Best practice: pair abstract principles with concrete examples—"Avoid jargon (e.g., use \'returns\' not \'alpha\', \'risk\' not \'volatility\')."',
                        proTip: 'When multiple answers seem right, choose the one that reduces ambiguity most. "NEVER" is stronger than "avoid," but **specificity beats intensity**. A detailed blacklist (Option B) provides more actionable guidance than a stronger but still vague command (Option A).'
                    }
                },
                {
                    type: "LAQ",
                    question: "Sarah's colleague Michael suggested that the problem might be that Claude wasn't reading CLAUDE.md from the correct directory. Explain how CLAUDE.md file placement affects Claude's behavior, and describe the step Sarah should take to verify Claude is actually loading her context file.",
                    modelAnswer: 'Claude Code searches for CLAUDE.md in the **current working directory** where commands are executed. If Sarah created CLAUDE.md in her main project root but ran Claude commands from a subfolder (e.g., `/project/client_reports/`), Claude would NOT find or load her context file, resulting in generic, unconstrained outputs. To verify, Sarah should: (1) Open VS Code\'s integrated terminal, (2) Run `pwd` (Mac/Linux) or `cd` (Windows) to confirm her current directory, (3) Run `ls` or `dir` to check if CLAUDE.md appears in that location, (4) If missing, either move CLAUDE.md to the current folder or navigate to the folder containing CLAUDE.md using `cd`. Best practice: place CLAUDE.md in the project root and always run Claude commands from that root directory to ensure consistent context loading across all tasks.',
                    explanation: {
                        concept: 'CLAUDE.md and Working Directory Context',
                        keyPoints: [
                            'Claude Code loads CLAUDE.md from the **current working directory**, not the project root automatically',
                            'If your terminal is in a subfolder, Claude won\'t search parent directories for CLAUDE.md',
                            'This is why VS Code\'s "Open in Integrated Terminal" (right-click folder) is safer than manual `cd` commands',
                            'You can verify with `pwd`/`cd` (check location) and `ls`/`dir` (check if CLAUDE.md is present)'
                        ],
                        connectConcept: 'This mirrors how `.env` files, `package.json`, and other config files work—they apply to their directory scope. Understanding working directory context is crucial not just for Claude, but for Git operations, build tools, and dependency management. Always verify "where am I?" before running commands.',
                        proTip: 'Long-answer questions (4-6 marks) require: (1) Explanation of the concept (how CLAUDE.md loading works), (2) Application to the scenario (Sarah\'s specific situation), (3) Actionable solution (verification steps). Structure your answer in three paragraphs covering these elements for full marks.'
                    }
                },
                {
                    type: "MCQ",
                    question: "After fixing her guardrails and verifying file placement, Sarah wants to add a new section to CLAUDE.md to handle client data more systematically. Which new section structure follows best practices?",
                    options: [
                        'Create a "Client Profiles" section with actual client names, portfolio values, and goals',
                        'Add a "Data Schema" section describing what client_portfolios.csv contains and how to reference it',
                        'Remove the Data Sources section entirely and manually include data in each prompt',
                        'Create a "Sensitive Info" section listing all SSNs and account numbers to help Claude recognize them'
                    ],
                    correct: 1,
                    explanation: {
                        whyCorrect: 'Option B is perfect! A "Data Schema" section documents the STRUCTURE and MEANING of data files WITHOUT including actual sensitive data. Example: "client_portfolios.csv contains columns: ClientID (string), Holdings (array of tickers), LastRebalance (date). Use ClientID for references, never real names." This helps Claude understand how to REFERENCE data intelligently (e.g., "Check LastRebalance column to determine if quarterly email is due") without exposing private information. It\'s the ideal balance of guidance and safety.',
                        whyWrong: {
                            0: 'CATASTROPHICALLY WRONG! Never store real client PII (names, portfolio values, personal goals) in CLAUDE.md. This file may be committed to Git, shared with team members, or accidentally exposed. Use sanitized references (ClientID, Client A) and keep actual data in secure, encrypted databases or files outside version control.',
                            2: 'Inefficient and error-prone! Removing Data Sources means Sarah has to manually paste relevant data into EVERY prompt, wasting time and increasing copy-paste errors. CLAUDE.md should provide a MAP to where data lives (file paths, database names) so Claude knows what sources exist, even if it can\'t access them directly in some workflows.',
                            3: 'HORRIFYING security violation! Listing SSNs and account numbers in CLAUDE.md—even to "help Claude recognize them"—creates a massive liability. If this file is shared, versioned, or logged, you\'ve just created a compliance nightmare. Instead, use pattern descriptions: "SSNs follow format XXX-XX-XXXX; never include them in outputs."'
                        },
                        connectConcept: 'This demonstrates the **"Schema not Data"** principle in configuration files. CLAUDE.md should describe the SHAPE, LOCATION, and MEANING of data, not contain the data itself. Think of it as a map (shows where treasure is) vs. a vault (holds the treasure). Maps can be shared safely; vaults cannot.',
                        proTip: 'Security questions often have one CATASTROPHICALLY wrong answer (Options A or D here) designed to test if you understand basic data protection. Even if you\'re unsure about the "best" answer, eliminate options that violate fundamental security principles first.'
                    }
                }
            ]
        };
        
        // Render the RTC quiz with proper structure
        renderRTCQuiz(el, rtcScenario, badge);
    })();
    
    function renderRTCQuiz(container, scenario, badge) {
        let currentQ = 0;
        let answers = {};
        let score = 0;
        
        function renderPassage() {
            return `
                <div style="background: #f1f5f9; padding: 20px; border-left: 4px solid #3b82f6; border-radius: 8px; margin-bottom: 24px; line-height: 1.7;">
                    <h4 style="margin: 0 0 12px 0; color: #1e40af; font-size: 1.1rem;">📋 Scenario</h4>
                    <p style="margin: 0; font-size: 0.95rem; color: #334155;">${scenario.passage}</p>
                </div>
            `;
        }
        
        function renderQuestion(q, index) {
            const question = scenario.questions[index];
            let optionsHTML = '';
            
            if (question.type === 'MCQ') {
                optionsHTML = question.options.map((opt, i) => `
                    <label class="rtc-option" data-index="${i}" style="display: block; padding: 12px; margin: 8px 0; background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 6px; cursor: pointer; transition: all 0.2s;">
                        <input type="radio" name="q${index}" value="${i}" style="margin-right: 8px;">
                        ${opt}
                    </label>
                `).join('');
            } else if (question.type === 'FTB') {
                optionsHTML = `
                    <input type="text" id="ftb${index}" placeholder="Type your answer here..." style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.95rem; margin-top: 8px;">
                `;
            } else if (question.type === 'SAQ') {
                optionsHTML = question.options.map((opt, i) => `
                    <label class="rtc-option-checkbox" style="display: block; padding: 12px; margin: 8px 0; background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 6px; cursor: pointer;">
                        <input type="checkbox" name="q${index}" value="${i}" style="margin-right: 8px;">
                        ${opt}
                    </label>
                `).join('');
            } else if (question.type === 'LAQ') {
                optionsHTML = `
                    <textarea id="laq${index}" placeholder="Write your detailed answer here (4-6 sentences)..." style="width: 100%; min-height: 150px; padding: 12px; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.95rem; margin-top: 8px; font-family: inherit; line-height: 1.6;"></textarea>
                `;
            }
            
            return `
                <div class="rtc-question-container" style="background: white; padding: 24px; border-radius: 8px; border: 2px solid #e2e8f0; text-align: left;">
                    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 16px;">
                        <span style="background: #667eea; color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">${question.type}</span>
                        <span style="color: #64748b; font-size: 0.9rem; margin-left: auto;">Question ${index + 1} of ${scenario.questions.length}</span>
                    </div>
                    <p style="margin: 0 0 16px 0; font-weight: 600; font-size: 1.05rem; color: #1e293b; text-align: left;">${question.question}</p>
                    ${optionsHTML}
                    <div style="margin-top: 16px;">
                        <button onclick="checkAnswer(${index})" style="background: #3b82f6; color: white; border: none; padding: 10px 24px; border-radius: 6px; cursor: pointer; font-weight: 600; margin-right: 8px;">Check Answer</button>
                        ${index < scenario.questions.length - 1 ? `<button onclick="nextQuestion()" style="background: #10b981; color: white; border: none; padding: 10px 24px; border-radius: 6px; cursor: pointer; font-weight: 600;" disabled id="nextBtn">Next Question →</button>` : ''}
                        ${index === scenario.questions.length - 1 ? `<button onclick="showResults()" style="background: #10b981; color: white; border: none; padding: 10px 24px; border-radius: 6px; cursor: pointer; font-weight: 600; display: none;" id="finishBtn">Finish Quiz</button>` : ''}
                    </div>
                    <div id="explanation${index}" style="display: none; margin-top: 20px;"></div>
                </div>
            `;
        }
        
        function render() {
            container.innerHTML = renderPassage() + renderQuestion(currentQ, currentQ);
        }
        
        // Toast notification function
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'error' ? '#fee2e2' : type === 'success' ? '#dcfce7' : '#dbeafe'};
                color: ${type === 'error' ? '#991b1b' : type === 'success' ? '#166534' : '#1e40af'};
                padding: 16px 20px;
                border-radius: 12px;
                border-left: 4px solid ${type === 'error' ? '#ef4444' : type === 'success' ? '#22c55e' : '#3b82f6'};
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
                z-index: 10001;
                font-size: 0.95rem;
                font-weight: 500;
                max-width: 350px;
                animation: slideIn 0.3s ease-out;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        // Add animation styles
        if (!document.getElementById('toast-animations')) {
            const style = document.createElement('style');
            style.id = 'toast-animations';
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(400px); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(400px); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
        
        window.checkAnswer = function(index) {
            const question = scenario.questions[index];
            const explDiv = document.getElementById(`explanation${index}`);
            let userAnswer, isCorrect = false;
            
            if (question.type === 'MCQ') {
                const selected = document.querySelector(`input[name="q${index}"]:checked`);
                if (!selected) {
                    showToast('Please select an answer first!', 'error');
                    return;
                }
                userAnswer = parseInt(selected.value);
                isCorrect = userAnswer === question.correct;
                
                // Visual feedback
                document.querySelectorAll('.rtc-option').forEach((opt, i) => {
                    if (i === question.correct) {
                        opt.style.borderColor = '#22c55e';
                        opt.style.background = '#f0fdf4';
                    } else if (i === userAnswer) {
                        opt.style.borderColor = '#ef4444';
                        opt.style.background = '#fef2f2';
                    }
                });
                
                // Show explanation
                explDiv.innerHTML = `
                    <div style="background: #f0f9ff; padding: 18px; border-left: 4px solid #3b82f6; border-radius: 6px;">
                        <p style="margin: 0 0 12px 0; font-weight: 600; color: #1e40af;">${isCorrect ? '✓ Correct!' : '✗ Incorrect'}</p>
                        <div style="background: #dcfce7; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #15803d;">Why This is Correct</p>
                            <p style="margin: 0; font-size: 0.9rem; color: #166534; line-height: 1.6;">${question.explanation.whyCorrect}</p>
                        </div>
                        ${question.explanation.whyWrong ? `
                        <div style="background: #fef2f2; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #991b1b;">Why Other Options Are Wrong</p>
                            <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; color: #7f1d1d; line-height: 1.7;">
                                ${Object.entries(question.explanation.whyWrong).map(([key, val]) => 
                                    `<li><strong>Option ${String.fromCharCode(65 + parseInt(key))}:</strong> ${val}</li>`
                                ).join('')}
                            </ul>
                        </div>
                        ` : ''}
                        <div style="background: #eff6ff; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #1e40af;">🔗 Connect the Concept</p>
                            <p style="margin: 0; font-size: 0.9rem; color: #1e3a8a; line-height: 1.6;">${question.explanation.connectConcept}</p>
                        </div>
                        <div style="background: #fef3c7; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #92400e;">💡 Pro Tip</p>
                            <p style="margin: 0; font-size: 0.9rem; color: #78350f; line-height: 1.6;">${question.explanation.proTip}</p>
                        </div>
                    </div>
                `;
            } else if (question.type === 'FTB') {
                userAnswer = document.getElementById(`ftb${index}`).value.trim().toLowerCase();
                isCorrect = userAnswer === question.correct.toLowerCase();
                
                explDiv.innerHTML = `
                    <div style="background: #f0f9ff; padding: 18px; border-left: 4px solid #3b82f6; border-radius: 6px;">
                        <p style="margin: 0 0 12px 0; font-weight: 600; color: #1e40af;">${isCorrect ? '✓ Correct!' : `✗ Incorrect - The answer is "${question.correct}"`}</p>
                        <div style="background: #dcfce7; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0; font-size: 0.9rem; color: #166534; line-height: 1.6;">${question.explanation.whyCorrect}</p>
                        </div>
                        <div style="background: #eff6ff; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #1e40af;">🔗 Connect the Concept</p>
                            <p style="margin: 0; font-size: 0.9rem; color: #1e3a8a; line-height: 1.6;">${question.explanation.connectConcept}</p>
                        </div>
                        <div style="background: #fef3c7; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #92400e;">💡 Pro Tip</p>
                            <p style="margin: 0; font-size: 0.9rem; color: #78350f; line-height: 1.6;">${question.explanation.proTip}</p>
                        </div>
                    </div>
                `;
            } else if (question.type === 'SAQ') {
                const selected = Array.from(document.querySelectorAll(`input[name="q${index}"]:checked`)).map(el => parseInt(el.value));
                isCorrect = selected.length === question.correct.length && selected.every(val => question.correct.includes(val));
                
                explDiv.innerHTML = `
                    <div style="background: #f0f9ff; padding: 18px; border-left: 4px solid #3b82f6; border-radius: 6px;">
                        <p style="margin: 0 0 12px 0; font-weight: 600; color: #1e40af;">${isCorrect ? '✓ Correct!' : '✗ Incorrect'}</p>
                        <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #334155;">Correct answers: ${question.correct.map(i => String.fromCharCode(65 + i)).join(' and ')}</p>
                        <div style="background: #dcfce7; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0; font-size: 0.9rem; color: #166534; line-height: 1.6;">${question.explanation.whyCorrect}</p>
                        </div>
                        ${question.explanation.whyWrong ? `
                        <div style="background: #fef2f2; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #991b1b;">Why Other Options Are Wrong</p>
                            <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; color: #7f1d1d; line-height: 1.7;">
                                ${Object.entries(question.explanation.whyWrong).map(([key, val]) => 
                                    `<li><strong>Option ${String.fromCharCode(65 + parseInt(key))}:</strong> ${val}</li>`
                                ).join('')}
                            </ul>
                        </div>
                        ` : ''}
                        <div style="background: #eff6ff; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #1e40af;">🔗 Connect the Concept</p>
                            <p style="margin: 0; font-size: 0.9rem; color: #1e3a8a; line-height: 1.6;">${question.explanation.connectConcept}</p>
                        </div>
                        <div style="background: #fef3c7; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #92400e;">💡 Pro Tip</p>
                            <p style="margin: 0; font-size: 0.9rem; color: #78350f; line-height: 1.6;">${question.explanation.proTip}</p>
                        </div>
                    </div>
                `;
            } else if (question.type === 'LAQ') {
                const answer = document.getElementById(`laq${index}`).value.trim();
                if (answer.length < 50) {
                    showToast('Please write a detailed answer (at least 50 characters) before checking.', 'error');
                    return;
                }
                
                explDiv.innerHTML = `
                    <div style="background: #f0f9ff; padding: 18px; border-left: 4px solid #3b82f6; border-radius: 6px;">
                        <p style="margin: 0 0 12px 0; font-weight: 600; color: #1e40af;">📝 Model Answer</p>
                        <div style="background: #dcfce7; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0; font-size: 0.9rem; color: #166534; line-height: 1.6;">${question.modelAnswer}</p>
                        </div>
                        <div style="background: #eff6ff; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #1e40af;">🔑 Key Points to Include</p>
                            <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; color: #1e3a8a; line-height: 1.7;">
                                ${question.explanation.keyPoints.map(pt => `<li>${pt}</li>`).join('')}
                            </ul>
                        </div>
                        <div style="background: #fef3c7; padding: 12px; border-radius: 6px; margin: 12px 0;">
                            <p style="margin: 0 0 8px 0; font-weight: 600; color: #92400e;">💡 Key Strategy</p>
                            <p style="margin: 0; font-size: 0.9rem; color: #78350f; line-height: 1.6;">${question.explanation.proTip}</p>
                        </div>
                    </div>
                `;
                isCorrect = answer.length >= 100; // Generous credit for effort
            }
            
            explDiv.style.display = 'block';
            explDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            answers[index] = isCorrect;
            if (isCorrect) score++;
            
            // Enable next button
            if (index < scenario.questions.length - 1) {
                document.getElementById('nextBtn').disabled = false;
            } else {
                document.getElementById('finishBtn').style.display = 'inline-block';
            }
        };
        
        window.nextQuestion = function() {
            currentQ++;
            render();
        };
        
        window.showResults = function() {
            const percentage = Math.round((score / scenario.questions.length) * 100);
            
            // Create modal overlay
            const modalOverlay = document.createElement('div');
            modalOverlay.id = 'rtc-results-overlay';
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.6);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            // Create modal content
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                border-radius: 16px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                max-width: 500px;
                width: 100%;
                max-height: 90vh;
                overflow-y: auto;
                position: relative;
                text-align: center;
                padding: 0;
            `;
            
            modalContent.innerHTML = `
                <button onclick="closeRTCResults()" style="position: absolute; top: 16px; right: 16px; background: transparent; border: none; font-size: 1.5rem; color: #64748b; cursor: pointer; width: 32px; height: 32px; border-radius: 50%; transition: all 0.2s; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='#f1f5f9'" onmouseout="this.style.background='transparent'">×</button>
                
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px 24px 32px; border-radius: 16px 16px 0 0;">
                    <div style="font-size: 3.5rem; margin-bottom: 16px;">🎉</div>
                    <h3 style="margin: 0 0 12px 0; font-size: 1.8rem; font-weight: 600;">Quiz Complete!</h3>
                    <p style="margin: 0; font-size: 1.1rem; opacity: 0.95;">You've finished all 6 questions</p>
                </div>
                
                <div style="padding: 32px 24px;">
                    <div style="background: #f8fafc; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                        <p style="margin: 0 0 8px 0; font-size: 0.9rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600;">Your Score</p>
                        <p style="margin: 0 0 16px 0; font-size: 3rem; font-weight: 700; color: ${percentage >= 80 ? '#22c55e' : percentage >= 60 ? '#f59e0b' : '#ef4444'};">${percentage}%</p>
                        <p style="margin: 0; font-size: 1.1rem; color: #334155; font-weight: 500;">${score} out of ${scenario.questions.length} correct</p>
                    </div>
                    
                    <div style="background: ${percentage >= 80 ? '#f0fdf4' : percentage >= 60 ? '#fef3c7' : '#fef2f2'}; border-left: 4px solid ${percentage >= 80 ? '#22c55e' : percentage >= 60 ? '#f59e0b' : '#ef4444'}; border-radius: 8px; padding: 16px; margin-bottom: 24px; text-align: left;">
                        <p style="margin: 0; font-size: 1rem; color: #1e293b; line-height: 1.6;">
                            ${percentage >= 80 ? 
                                '<strong>🏆 Excellent work!</strong> You have a strong understanding of CLAUDE.md best practices. You\'re ready to implement context-driven workflows in production.' : 
                                percentage >= 60 ? 
                                '<strong>👍 Good job!</strong> You grasp the core concepts. Review the explanations for questions you missed to strengthen weak areas.' : 
                                '<strong>📚 Keep practicing!</strong> CLAUDE.md design requires understanding semantic precision and security principles. Re-read the scenario and try again.'}
                        </p>
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                        <button onclick="closeRTCResults()" style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.2s;" onmouseover="this.style.background='#5568d3'" onmouseout="this.style.background='#667eea'">Continue Module</button>
                        <button onclick="location.reload()" style="background: white; color: #667eea; border: 2px solid #667eea; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.2s;" onmouseover="this.style.background='#f8fafc'" onmouseout="this.style.background='white'">Retake Quiz</button>
                    </div>
                </div>
            `;
            
            modalOverlay.appendChild(modalContent);
            document.body.appendChild(modalOverlay);
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
            
            if (percentage >= 80 && badge) {
                badge.style.display = 'inline-block';
            }
        };
        
        window.closeRTCResults = function() {
            const overlay = document.getElementById('rtc-results-overlay');
            if (overlay) {
                overlay.remove();
                document.body.style.overflow = '';
            }
        };
        
        render();
    }

    // --- Visual Hierarchy Helpers ---
    function injectKeyTips() {
        const sections = document.querySelectorAll('.module-section');
        if (!sections.length) return;
        const aside = document.createElement('aside');
        aside.className = 'key-tip';
        aside.textContent = '💡 Key Idea: Update the CLAUDE.md — don\'t re‑prompt.';
        aside.style.background = '#fffbe6';
        aside.style.borderLeft = '4px solid #facc15';
        aside.style.padding = '12px 16px';
        aside.style.borderRadius = '8px';
        aside.style.margin = '16px 0';
        // Insert after first major section
        sections[1]?.appendChild(aside.cloneNode(true));
        // Gradient divider
        const divider = document.createElement('div');
        divider.style.height = '8px';
        divider.style.background = 'linear-gradient(#fff,#fff7ed)';
        divider.style.borderRadius = '8px';
        sections[2]?.appendChild(divider);
    }

    // --- Initial Load ---
    initModule4();
    setupNavTooltips();
});

// --- Interactive Folder Navigation Demo ---
let currentLocation = 'desktop';
const locations = {
    desktop: {
        path: '~/Desktop',
        files: ['Claude_Practice/'],
        highlight: null
    },
    practice: {
        path: '~/Desktop/Claude_Practice',
        files: ['CLAUDE.md', 'index.html', 'ClientA/', 'CompoundInterest/'],
        highlight: 'folder-practice'
    },
    clienta: {
        path: '~/Desktop/Claude_Practice/ClientA',
        files: ['summary_email.md'],
        highlight: 'folder-clienta'
    },
    compound: {
        path: '~/Desktop/Claude_Practice/CompoundInterest',
        files: ['index.html'],
        highlight: 'folder-compound'
    }
};

const tooltipData = {
    desktop: { title: 'Desktop/ (Folder)', desc: 'Yes, Desktop is a folder too! It\'s a special system folder that appears as your desktop screen. To navigate into subfolders: cd Claude_Practice' },
    practice: { title: 'Claude_Practice', desc: 'Your main project folder. Contains CLAUDE.md (context file) and subfolders for different projects. Currently has ClientA and CompoundInterest subfolders.' },
    claudemd: { title: 'CLAUDE.md', desc: 'Context file that Claude reads automatically. Stores your preferences, tone, and guardrails for ALL projects in this folder and its subfolders.' },
    index: { title: 'index.html', desc: 'HTML file (likely from Module 3). To work with it, use: claude "make changes to index.html"' },
    clienta: { title: 'ClientA Subfolder', desc: 'Subfolder for Client A project. To enter it: cd ClientA. To go back: cd ..' },
    summary: { title: 'summary_email.md', desc: 'Output file created by Claude in Module 4. This file is INSIDE the ClientA folder. Claude created it here because you ran the command from ClientA/' },
    compound: { title: 'CompoundInterest', desc: 'Another project subfolder (from Module 3). Peer folder to ClientA. To switch from ClientA to here: cd ../CompoundInterest' }
};

// Setup tooltips for SVG navigation (using proven pattern from part_0)
function setupNavTooltips() {
    const tooltip = document.getElementById('nav-tooltip');
    const tooltipTitle = document.getElementById('nav-tooltip-title');
    const tooltipDesc = document.getElementById('nav-tooltip-desc');
    const clickableElements = document.querySelectorAll('.nav-clickable');
    
    if (!tooltip || !clickableElements.length) return;
    
    // Position tooltip based on element position
    function positionByElement(el) {
        // Mobile: center at bottom
        if (window.innerWidth <= 640) {
            tooltip.style.left = '50%';
            tooltip.style.bottom = '20px';
            tooltip.style.top = 'auto';
            tooltip.style.transform = 'translateX(-50%)';
            return;
        }
        
        // Desktop: position near element
        const rect = el.getBoundingClientRect();
        const { offsetWidth, offsetHeight } = tooltip;
        let left = rect.right + 12;
        let top = rect.top + 12;
        
        const vw = document.documentElement.clientWidth;
        const vh = document.documentElement.clientHeight;
        
        // Keep within viewport
        if (left + offsetWidth > vw - 8) {
            left = rect.left - offsetWidth - 12;
        }
        if (top + offsetHeight > vh - 8) {
            top = rect.bottom - offsetHeight - 12;
        }
        if (left < 8) left = 8;
        if (top < 8) top = 8;
        
        tooltip.style.left = `${left}px`;
        tooltip.style.top = `${top}px`;
        tooltip.style.transform = 'none';
    }
    
    const showTooltip = (e, content, el) => {
        if (!content) return;
        tooltipTitle.textContent = content.title;
        tooltipDesc.textContent = content.desc;
        tooltip.style.opacity = '1';
        tooltip.style.display = 'block';
        if (el) {
            positionByElement(el);
        }
    };
    
    const hideTooltip = () => {
        tooltip.style.opacity = '0';
        setTimeout(() => {
            if (tooltip.style.opacity === '0') {
                tooltip.style.display = 'none';
            }
        }, 200);
    };
    
    clickableElements.forEach(el => {
        const tooltipKey = el.getAttribute('data-tooltip');
        const content = tooltipData[tooltipKey];
        if (!content) return;
        
        let tooltipTimer;
        
        // Click-to-toggle behavior for reliability
        el.addEventListener('click', (e) => {
            e.stopPropagation();
            const isOpen = tooltip.style.opacity === '1' && tooltip.dataset.openFor === el.id;
            if (isOpen) {
                hideTooltip();
                tooltip.dataset.openFor = '';
            } else {
                showTooltip(null, content, el);
                tooltip.dataset.openFor = el.id;
            }
        });
        
        // Hover on desktop
        if (window.innerWidth > 640) {
            el.addEventListener('mouseenter', (e) => {
                clearTimeout(tooltipTimer);
                showTooltip(null, content, el);
                tooltip.dataset.openFor = el.id;
            });
            
            el.addEventListener('mouseleave', (e) => {
                tooltipTimer = setTimeout(() => {
                    hideTooltip();
                    tooltip.dataset.openFor = '';
                }, 200);
            });
        }
    });
    
    // Close on outside click
    document.addEventListener('click', (e) => {
        const withinClickable = e.target.closest('.nav-clickable');
        if (!withinClickable) hideTooltip();
    });
    
    window.addEventListener('scroll', hideTooltip, { passive: true });
    window.addEventListener('resize', hideTooltip);
}

function navDemo(action) {
    const output = document.getElementById('nav-output');
    const pathDisplay = document.getElementById('current-path');
    
    // Clear all highlights
    ['folder-practice', 'folder-clienta', 'folder-compound'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.setAttribute('fill', '#f0fdf4');
    });
    
    let command = '';
    let result = '';
    
    switch(action) {
        case 'down-practice':
            command = '$ cd Claude_Practice';
            if (currentLocation === 'desktop') {
                currentLocation = 'practice';
                result = '(moved into Claude_Practice folder)';
            } else {
                result = '<span style="color: #ef4444;">Error: Claude_Practice not found in current directory</span>';
            }
            break;
            
        case 'down-clienta':
            command = '$ cd ClientA';
            if (currentLocation === 'practice') {
                currentLocation = 'clienta';
                result = '(moved into ClientA folder)';
            } else {
                result = '<span style="color: #ef4444;">Error: ClientA not found in current directory</span>';
            }
            break;
            
        case 'up':
            command = '$ cd ..';
            if (currentLocation === 'clienta' || currentLocation === 'compound') {
                currentLocation = 'practice';
                result = '(moved up to parent folder: Claude_Practice)';
            } else if (currentLocation === 'practice') {
                currentLocation = 'desktop';
                result = '(moved up to parent folder: Desktop)';
            } else {
                result = '(already at Desktop)';
            }
            break;
            
        case 'reset':
            command = '$ cd ~/Desktop';
            currentLocation = 'desktop';
            result = '(jumped directly to Desktop folder)';
            break;
            
        case 'ls':
            command = '$ ls';
            result = locations[currentLocation].files.join('  ');
            break;
            
        case 'pwd':
            command = '$ pwd';
            result = locations[currentLocation].path;
            break;
            
        case 'double-jump':
            command = '$ cd ~/Desktop/Claude_Practice/ClientA';
            currentLocation = 'clienta';
            result = '(jumped directly to ClientA - skipped intermediate folders!)';
            break;
            
        case 'peer':
            command = '$ cd ../CompoundInterest';
            if (currentLocation === 'clienta') {
                currentLocation = 'compound';
                result = '(went up one level, then into CompoundInterest - peer folder navigation!)';
            } else {
                result = '<span style="color: #ef4444;">Error: This command works from ClientA folder</span>';
            }
            break;
    }
    
    // Update path display
    pathDisplay.textContent = locations[currentLocation].path;
    
    // Highlight current folder
    const highlightId = locations[currentLocation].highlight;
    if (highlightId) {
        const el = document.getElementById(highlightId);
        if (el) el.setAttribute('fill', '#dcfce7'); // Green highlight
    }
    
    // Update output
    output.innerHTML = `<span style="color: #22c55e;">$</span> ${command.substring(2)}\n${result}`;
}

// --- Copy Prompt Function (for exercise prompts) ---
function copyPrompt(elementId) {
    const element = document.getElementById(elementId);
    if (!element) return;
    
    const text = element.textContent;
    const button = event.currentTarget;
    const originalHTML = button.innerHTML;
    
    navigator.clipboard.writeText(text).then(() => {
        button.innerHTML = '✓ Copied!';
        button.style.transform = 'scale(0.95)';
        showToast('Prompt copied to clipboard!');
        
        setTimeout(() => {
            button.innerHTML = originalHTML;
            button.style.transform = 'scale(1)';
        }, 1500);
    }).catch(err => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.opacity = '0';
        document.body.appendChild(textArea);
        textArea.select();
        
        try {
            document.execCommand('copy');
            button.innerHTML = '✓ Copied!';
            button.style.transform = 'scale(0.95)';
            showToast('Prompt copied to clipboard!');
            
            setTimeout(() => {
                button.innerHTML = originalHTML;
                button.style.transform = 'scale(1)';
            }, 1500);
        } catch (err) {
            showToast('Copy failed. Please try again.', 'error');
        }
        
        document.body.removeChild(textArea);
    });
}

// --- Copy CLAUDE.md Template Function (global scope for onclick) ---
function copyCLAUDETemplate() {
    const template = document.getElementById('claude-md-template');
    if (!template) return;
    
    const text = template.textContent;
    
    navigator.clipboard.writeText(text).then(() => {
        const btn = event.target;
        const originalText = btn.innerHTML;
        btn.innerHTML = '✓ Copied!';
        btn.style.background = 'var(--ok)';
        setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = 'var(--accent)';
        }, 2000);
    }).catch(err => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.opacity = '0';
        document.body.appendChild(textArea);
        textArea.select();
        try {
            document.execCommand('copy');
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '✓ Copied!';
            btn.style.background = 'var(--ok)';
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.style.background = 'var(--accent)';
            }, 2000);
        } catch (err) {
            alert('Copy failed. Please select and copy manually.');
        }
        document.body.removeChild(textArea);
    });
}
</script>

</body>
</html>
