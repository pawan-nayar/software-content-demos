<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Flow of Control: Triple Path Analysis</title>

  <!-- Fonts & Theme match -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* --- Base / Theme (replicated) --- */
    :root{
      --text:#212529; --bg:#fff; --muted:#f8f9fa; --border:#e9ecef;
      --accent:#fd7e14; --accent-2:#e87312; --header-bg:#212529; --header-fg:#f8f9fa;
      --ok:#16a34a; --ok-soft:#dcfce7; --bad:#dc2626; --bad-soft:#fee2e2;
      --happy:#16a34a; --ineffective:#dc2626; --resolution:#fd7e14; --process:#4dabf7;
      --warning:#f59e0b; --info:#3b82f6; --purple:#8b5cf6;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1200px;margin:auto;padding:16px}
    @media (max-width:600px){.container{padding:12px}}

    /* Header / Footer */
    .site-header{background:var(--header-bg);color:var(--header-fg);padding:14px 18px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;position:sticky;top:0;z-index:60}
    .logo{font-weight:700;font-size:1.15rem;color:#fff}
    .site-header nav{display:flex;gap:14px}
    .site-header nav a{color:#ced4da}
    .site-header nav a:hover{color:#fff}
    .site-footer{background:var(--header-bg);color:var(--header-fg);padding:40px;text-align:center;margin-top:50px}
    .breadcrumbs{margin:12px 0 20px;color:#6c757d;overflow:auto;white-space:nowrap}
    .breadcrumbs a{color:var(--accent)}

    /* Typography */
    h1{font-size:clamp(1.8rem,5vw,2.4rem);line-height:1.1;margin-bottom:6px}
    h2{font-size:clamp(1.3rem,4vw,1.8rem);margin:40px 0 16px;border-bottom:2px solid var(--border);padding-bottom:6px}
    h3{font-size:clamp(1.1rem,3vw,1.3rem);margin:24px 0 12px}
    p{margin:10px 0;word-wrap:break-word}
    .lead{font-size:1.05rem;color:#495057;}
    .intro-box{font-size:1.05rem;background:#fef7f0;padding:20px;border-radius:12px;border-left:5px solid var(--accent);margin:24px 0}

    /* Control Panel */
    .control-panel{
      display:flex;
      flex-wrap:wrap;
      gap:16px;
      margin:20px 0;
      padding:16px;
      background:var(--muted);
      border-radius:12px;
      border:1px solid var(--border);
    }
    .control-group{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .control-label{
      font-size:0.9rem;
      font-weight:600;
      color:var(--text);
    }
    .control-buttons{
      display:flex;
      gap:8px;
    }
    .control-btn{
      background:var(--accent);
      color:#fff;
      border:none;
      padding:8px 16px;
      border-radius:6px;
      cursor:pointer;
      font-size:0.9rem;
      font-weight:600;
      transition:all 0.3s;
    }
    .control-btn:hover{background:var(--accent-2)}
    .control-btn.active{background:var(--happy)}
    .control-btn.paused{background:var(--warning)}
    .speed-slider{
      width:120px;
      height:6px;
      border-radius:3px;
      background:var(--border);
      outline:none;
      cursor:pointer;
    }

    /* Path Selector */
    .path-selector{
      display:flex;
      gap:12px;
      margin:20px 0;
    }
    .path-btn{
      flex:1;
      padding:12px 16px;
      border:2px solid var(--border);
      background:#fff;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
      transition:all 0.3s;
      text-align:center;
    }
    .path-btn.happy{border-color:var(--happy);color:var(--happy)}
    .path-btn.ineffective{border-color:var(--ineffective);color:var(--ineffective)}
    .path-btn.resolution{border-color:var(--resolution);color:var(--resolution)}
    .path-btn.active{color:#fff}
    .path-btn.happy.active{background:var(--happy)}
    .path-btn.ineffective.active{background:var(--ineffective)}
    .path-btn.resolution.active{background:var(--resolution)}

    /* SVG and Animation Styles */
    .flow-diagram{
      background:#fffbfa;
      border:1px solid var(--accent-2);
      border-radius:12px;
      padding:20px;
      margin:24px 0;
      position:relative;
      min-height:600px;
    }
    svg{
      width:100%;
      height:auto;
      display:block;
      margin:auto;
    }
    
    /* Flow Elements */
    .hotspot{cursor:pointer;outline:none}
    .hotspot:focus .halo,.hotspot:hover .halo{stroke:var(--accent);stroke-width:3;fill:transparent}
    .halo{stroke:transparent;stroke-width:3;fill:transparent}
    
    /* Path-specific styles */
    .happy-path{stroke:var(--happy);fill:var(--happy)}
    .ineffective-path{stroke:var(--ineffective);fill:var(--ineffective)}
    .resolution-path{stroke:var(--resolution);fill:var(--resolution)}
    .process-step{fill:var(--process);stroke:#fff;stroke-width:2}
    
    /* Animation states - Enhanced visibility */
    .flow-arrow{stroke-width:3;fill:none;marker-end:url(#arrowhead);transition:all 0.3s ease}
    .animated-flow{
      stroke-dasharray:15,10;
      animation:flowAnimation 1.5s linear infinite;
      stroke-width:4;
      opacity:1;
    }
    .executing{
      animation:pulseAnimation 2s ease-in-out infinite;
      filter:drop-shadow(0 0 10px currentColor);
      z-index:10;
    }
    .error-state{
      animation:errorAnimation 0.8s ease-in-out infinite;
      filter:drop-shadow(0 0 15px #dc2626);
    }
    .success-state{
      animation:successAnimation 1.5s ease-in-out;
      filter:drop-shadow(0 0 15px #16a34a);
    }
    .current-step{
      stroke:#ffd43b !important;
      stroke-width:4 !important;
      fill:#ffd43b !important;
      filter:drop-shadow(0 0 20px #ffd43b);
      animation:highlightGlow 2s ease-in-out infinite;
    }

    @keyframes flowAnimation{
      0%{stroke-dashoffset:0}
      100%{stroke-dashoffset:15}
    }
    @keyframes pulseAnimation{
      0%,100%{transform:scale(1);opacity:1;filter:brightness(1)}
      50%{transform:scale(1.15);opacity:0.9;filter:brightness(1.3)}
    }
    @keyframes errorAnimation{
      0%,100%{transform:translateX(0);filter:brightness(1)}
      25%{transform:translateX(-5px);filter:brightness(1.2)}
      75%{transform:translateX(5px);filter:brightness(1.2)}
    }
    @keyframes successAnimation{
      0%{transform:scale(1);filter:brightness(1)}
      25%{transform:scale(1.2);filter:brightness(1.4)}
      50%{transform:scale(1.1);filter:brightness(1.3)}
      100%{transform:scale(1);filter:brightness(1)}
    }
    @keyframes highlightGlow{
      0%{box-shadow:0 0 0 rgba(253,126,20,0)}
      50%{box-shadow:0 0 20px rgba(253,126,20,0.8)}
      100%{box-shadow:0 0 0 rgba(253,126,20,0)}
    }

    /* Code Display */
    .code-execution{
      position:absolute;
      top:20px;
      right:20px;
      width:300px;
      background:#2d3748;
      color:#e2e8f0;
      border-radius:8px;
      padding:16px;
      font-family:monospace;
      font-size:0.8rem;
      line-height:1.4;
      max-height:400px;
      overflow-y:auto;
    }
    .code-line{
      padding:2px 0;
      border-radius:3px;
      transition:all 0.3s;
    }
    .code-line.executing{
      background:rgba(253,126,20,0.3);
      border-left:3px solid var(--accent);
      padding-left:8px;
    }
    .code-line.error{
      background:rgba(220,38,38,0.3);
      border-left:3px solid var(--ineffective);
      padding-left:8px;
    }
    .code-keyword{color:#ffd43b}
    .code-string{color:#68d391}
    .code-number{color:#f687b3}
    .code-comment{color:#a0aec0}

    /* Variable Tracker */
    .variable-tracker{
      position:absolute;
      bottom:20px;
      right:20px;
      width:280px;
      background:#fff;
      border:1px solid var(--border);
      border-radius:8px;
      padding:12px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    .variable-title{
      font-weight:600;
      color:var(--accent-2);
      margin-bottom:8px;
      font-size:0.9rem;
    }
    .variable-item{
      display:flex;
      justify-content:space-between;
      padding:4px 0;
      border-bottom:1px solid var(--muted);
      font-size:0.8rem;
    }
    .variable-name{font-weight:600;color:var(--text)}
    .variable-value{color:var(--process);font-family:monospace}
    .variable-value.changed{
      animation:valueChange 0.5s ease-in-out;
      color:var(--happy);
    }

    @keyframes valueChange{
      0%{transform:scale(1)}
      50%{transform:scale(1.2);color:var(--accent)}
      100%{transform:scale(1)}
    }

    /* Performance Metrics */
    .performance-panel{
      position:absolute;
      top:20px;
      left:20px;
      width:250px;
      background:#fff;
      border:1px solid var(--border);
      border-radius:8px;
      padding:12px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    .metric-item{
      display:flex;
      justify-content:space-between;
      padding:4px 0;
      font-size:0.8rem;
    }
    .metric-label{font-weight:600;color:var(--text)}
    .metric-value{font-family:monospace}
    .metric-happy{color:var(--happy)}
    .metric-ineffective{color:var(--ineffective)}
    .metric-resolution{color:var(--resolution)}

    /* Tooltip */
    .tooltip{
      position:fixed;
      pointer-events:none; z-index:70;
      background:#fff; color:#111; border:1px solid var(--border);
      border-left:4px solid var(--accent); border-radius:8px; padding:12px 16px; max-width:400px;
      box-shadow:0 8px 24px rgba(0,0,0,0.15); font-size:.9rem; line-height:1.5; display:none;
    }
    .tooltip-title{font-weight:600;color:var(--accent-2);margin-bottom:6px;font-size:1rem}
    .tooltip-path{font-size:0.85rem;font-weight:600;margin-bottom:8px;padding:4px 8px;border-radius:4px}
    .tooltip-path.happy{background:var(--ok-soft);color:var(--happy)}
    .tooltip-path.ineffective{background:var(--bad-soft);color:var(--ineffective)}
    .tooltip-path.resolution{background:#fef7f0;color:var(--resolution)}
    .tooltip-description{margin-bottom:8px}
    .tooltip-code{background:#f8f9fa;padding:8px;border-radius:4px;margin:8px 0;font-family:monospace;font-size:0.8rem}
    .tooltip-complexity{background:#f0f9ff;padding:8px;border-radius:4px;margin-top:8px;border-left:3px solid var(--info)}

    /* Mobile responsive */
    @media (max-width:768px){
      .control-panel{flex-direction:column}
      .path-selector{flex-direction:column}
      .code-execution,.variable-tracker,.performance-panel{
        position:static;
        width:100%;
        margin:16px 0;
      }
      .tooltip{
        position:fixed;
        top:10px !important;
        left:10px !important;
        right:10px !important;
        max-width:none;
        width:auto;
        transform:none;
      }
    }

    /* Scenario Tabs */
    .scenario-tabs{
      display:flex;
      gap:8px;
      margin:20px 0;
      border-bottom:2px solid var(--border);
    }
    .scenario-tab{
      padding:12px 20px;
      background:none;
      border:none;
      font-weight:600;
      cursor:pointer;
      border-bottom:3px solid transparent;
      transition:all 0.3s;
    }
    .scenario-tab.active{
      border-bottom-color:var(--accent);
      color:var(--accent);
    }
    .scenario-content{
      display:none;
      margin-top:20px;
    }
    .scenario-content.active{
      display:block;
    }

    /* Deep Learning Panels */
    .learning-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
      gap:20px;
      margin:24px 0;
    }
    .learning-card{
      background:#fff;
      border:1px solid var(--border);
      border-radius:8px;
      padding:16px;
      border-left:4px solid var(--accent);
    }
    .learning-card.happy{border-left-color:var(--happy)}
    .learning-card.ineffective{border-left-color:var(--ineffective)}
    .learning-card.resolution{border-left-color:var(--resolution)}
    .card-title{
      font-weight:600;
      color:var(--accent-2);
      margin-bottom:8px;
    }
    .card-content{
      font-size:0.9rem;
      line-height:1.5;
    }
  </style>
</head>
<body>
<header class="site-header">
  <a class="logo" href="#">Beyond Dictionary</a>
  <nav>
    <a href="#">Learning</a>
    <a href="#">FAQs</a>
    <a href="#">Blog</a>
  </nav>
</header>

<main class="container">
  <nav class="breadcrumbs" aria-label="Breadcrumb">
    <a href="#">Programming</a> › <a href="#">Python</a> › <span>Flow of Control</span>
  </nav>

  <header>
    <h1>Interactive Flow of Control: Triple Path Analysis 🔀</h1>
    <p class="lead">Master Python control structures through Happy Path, Ineffective Path, and Resolution strategies.</p>
    <div class="intro-box">
      <p>
        Flow of Control determines how Python executes code statements - the order in which instructions are processed. 
        This comprehensive visualization shows three critical perspectives: the <strong>Happy Path</strong> (optimal execution), 
        the <strong>Ineffective Path</strong> (common mistakes and pitfalls), and the <strong>Resolution Path</strong> (how to fix problems). 
        Understanding all three perspectives builds robust programming intuition, helping you write efficient code, 
        avoid common traps, and debug effectively. From simple if-statements to complex nested loops, every control 
        structure has optimal patterns and potential pitfalls that every Python developer must master.
      </p>
    </div>
  </header>

  <!-- Path Selector moved to top -->
  <!-- Control Panel moved after flowchart -->

  <!-- Path Selector -->
  <div class="path-selector">
    <button class="path-btn happy active" data-path="happy">
      ✅ Happy Path
      <div style="font-size:0.8rem;margin-top:4px;">Optimal Execution</div>
    </button>
    <button class="path-btn ineffective" data-path="ineffective">
      ❌ Ineffective Path
      <div style="font-size:0.8rem;margin-top:4px;">Common Mistakes</div>
    </button>
    <button class="path-btn resolution" data-path="resolution">
      🔧 Resolution Path
      <div style="font-size:0.8rem;margin-top:4px;">How to Fix</div>
    </button>
  </div>

  <!-- Scenario Tabs -->
  <div class="scenario-tabs">
    <button class="scenario-tab active" data-scenario="conditional">if/elif/else</button>
    <button class="scenario-tab" data-scenario="loops">for/while Loops</button>
    <button class="scenario-tab" data-scenario="nested">Nested Structures</button>
    <button class="scenario-tab" data-scenario="control">break/continue</button>
    <button class="scenario-tab" data-scenario="patterns">Pattern Examples</button>
  </div>

  <!-- Interactive Flow Diagrams -->
  <div class="scenario-content active" id="conditional-content">
    <h3>Conditional Statements: if/elif/else</h3>
    <div class="flow-diagram" id="conditional-diagram">
      <svg viewBox="0 0 1000 700" role="img">
        <defs>
          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="var(--accent)" />
          </marker>
          <marker id="happy-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="var(--happy)" />
          </marker>
          <marker id="error-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="var(--ineffective)" />
          </marker>
        </defs>

        <!-- Happy Path Flow -->
        <g class="path-flow happy-flow" data-path="happy">
          <!-- Start -->
          <g class="hotspot" data-step="conditional-start-happy">
            <ellipse cx="150" cy="50" rx="60" ry="20" class="happy-path"></ellipse>
            <text x="150" y="56" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">START</text>
            <ellipse cx="150" cy="50" rx="65" ry="25" fill="none" class="halo"></ellipse>
          </g>

          <!-- Input age -->
          <path d="M150,70 L150,100" class="flow-arrow happy-path" marker-end="url(#happy-arrow)"></path>
          <g class="hotspot" data-step="input-age-happy">
            <polygon points="100,100 200,100 190,130 110,130" class="happy-path"></polygon>
            <text x="150" y="116" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">age = int(input())</text>
            <polygon points="95,95 205,95 195,135 105,135" fill="none" class="halo"></polygon>
          </g>

          <!-- Decision: age >= 18 -->
          <path d="M150,130 L150,160" class="flow-arrow happy-path" marker-end="url(#happy-arrow)"></path>
          <g class="hotspot" data-step="age-check-happy">
            <polygon points="150,160 190,190 150,220 110,190" class="happy-path"></polygon>
            <text x="150" y="190" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">age >= 18?</text>
            <polygon points="150,155 195,190 150,225 105,190" fill="none" class="halo"></polygon>
          </g>

          <!-- Yes branch -->
          <path d="M190,190 L250,190 L250,250" class="flow-arrow happy-path" marker-end="url(#happy-arrow)"></path>
          <text x="220" y="185" style="fill:var(--happy);font-size:8px;font-weight:600">Yes</text>
          <g class="hotspot" data-step="adult-output-happy">
            <rect x="200" y="250" width="100" height="30" rx="5" class="happy-path"></rect>
            <text x="250" y="266" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">print("Adult")</text>
            <rect x="195" y="245" width="110" height="40" fill="none" class="halo"></rect>
          </g>

          <!-- No branch -->
          <path d="M110,190 L50,190 L50,250" class="flow-arrow happy-path" marker-end="url(#happy-arrow)"></path>
          <text x="80" y="185" style="fill:var(--happy);font-size:8px;font-weight:600">No</text>
          <g class="hotspot" data-step="minor-output-happy">
            <rect x="0" y="250" width="100" height="30" rx="5" class="happy-path"></rect>
            <text x="50" y="266" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">print("Minor")</text>
            <rect x="-5" y="245" width="110" height="40" fill="none" class="halo"></rect>
          </g>

          <!-- Converge paths -->
          <path d="M50,280 L50,320 L250,320 L250,280" class="flow-arrow happy-path" marker-end="url(#happy-arrow)"></path>
          <path d="M150,320 L150,350" class="flow-arrow happy-path" marker-end="url(#happy-arrow)"></path>

          <!-- End -->
          <g class="hotspot" data-step="conditional-end-happy">
            <ellipse cx="150" cy="370" rx="60" ry="20" class="happy-path"></ellipse>
            <text x="150" y="376" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">END</text>
            <ellipse cx="150" cy="370" rx="65" ry="25" fill="none" class="halo"></ellipse>
          </g>
        </g>

        <!-- Ineffective Path Flow -->
        <g class="path-flow ineffective-flow" data-path="ineffective" style="display:none">
          <!-- Start -->
          <g class="hotspot" data-step="conditional-start-ineffective">
            <ellipse cx="400" cy="50" rx="60" ry="20" class="ineffective-path"></ellipse>
            <text x="400" y="56" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">START</text>
            <ellipse cx="400" cy="50" rx="65" ry="25" fill="none" class="halo"></ellipse>
          </g>

          <!-- No input validation -->
          <path d="M400,70 L400,100" class="flow-arrow ineffective-path" marker-end="url(#error-arrow)"></path>
          <g class="hotspot" data-step="bad-input-ineffective">
            <polygon points="350,100 450,100 440,130 360,130" class="ineffective-path"></polygon>
            <text x="400" y="116" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">age = input() # No validation!</text>
            <polygon points="345,95 455,95 445,135 355,135" fill="none" class="halo"></polygon>
          </g>

          <!-- Multiple if statements (inefficient) -->
          <path d="M400,130 L400,160" class="flow-arrow ineffective-path" marker-end="url(#error-arrow)"></path>
          <g class="hotspot" data-step="multiple-ifs-ineffective">
            <rect x="320" y="160" width="160" height="40" rx="5" class="ineffective-path"></rect>
            <text x="400" y="176" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">if age >= 18: print("Adult")</text>
            <text x="400" y="188" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">if age < 18: print("Minor")</text>
            <rect x="315" y="155" width="170" height="50" fill="none" class="halo"></rect>
          </g>

          <!-- Error state -->
          <path d="M400,200 L400,230" class="flow-arrow ineffective-path" marker-end="url(#error-arrow)"></path>
          <g class="hotspot" data-step="error-state-ineffective">
            <rect x="320" y="230" width="160" height="30" rx="5" class="ineffective-path"></rect>
            <text x="400" y="246" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">TypeError: '>=' not supported</text>
            <rect x="315" y="225" width="170" height="40" fill="none" class="halo"></rect>
          </g>

          <!-- Crash -->
          <path d="M400,260 L400,290" class="flow-arrow ineffective-path" marker-end="url(#error-arrow)"></path>
          <g class="hotspot" data-step="crash-ineffective">
            <ellipse cx="400" cy="310" rx="60" ry="20" class="ineffective-path"></ellipse>
            <text x="400" y="316" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">CRASH</text>
            <ellipse cx="400" cy="310" rx="65" ry="25" fill="none" class="halo"></ellipse>
          </g>
        </g>

        <!-- Resolution Path Flow -->
        <g class="path-flow resolution-flow" data-path="resolution" style="display:none">
          <!-- Start -->
          <g class="hotspot" data-step="conditional-start-resolution">
            <ellipse cx="700" cy="50" rx="60" ry="20" class="resolution-path"></ellipse>
            <text x="700" y="56" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">START</text>
            <ellipse cx="700" cy="50" rx="65" ry="25" fill="none" class="halo"></ellipse>
          </g>

          <!-- Input validation -->
          <path d="M700,70 L700,100" class="flow-arrow resolution-path"></path>
          <g class="hotspot" data-step="input-validation-resolution">
            <rect x="620" y="100" width="160" height="40" rx="5" class="resolution-path"></rect>
            <text x="700" y="116" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">try: age = int(input())</text>
            <text x="700" y="128" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">except: age = 0</text>
            <rect x="615" y="95" width="170" height="50" fill="none" class="halo"></rect>
          </g>

          <!-- Optimized if-elif-else -->
          <path d="M700,140 L700,170" class="flow-arrow resolution-path"></path>
          <g class="hotspot" data-step="optimized-conditional-resolution">
            <polygon points="700,170 740,200 700,230 660,200" class="resolution-path"></polygon>
            <text x="700" y="200" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">age >= 18?</text>
            <polygon points="700,165 745,200 700,235 655,200" fill="none" class="halo"></polygon>
          </g>

          <!-- Efficient branching -->
          <path d="M740,200 L800,200 L800,270" class="flow-arrow resolution-path"></path>
          <text x="770" y="195" style="fill:var(--resolution);font-size:8px;font-weight:600">True</text>
          <path d="M660,200 L600,200 L600,270" class="flow-arrow resolution-path"></path>
          <text x="630" y="195" style="fill:var(--resolution);font-size:8px;font-weight:600">False</text>

          <g class="hotspot" data-step="adult-optimized-resolution">
            <rect x="750" y="270" width="100" height="30" rx="5" class="resolution-path"></rect>
            <text x="800" y="286" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">print("Adult")</text>
            <rect x="745" y="265" width="110" height="40" fill="none" class="halo"></rect>
          </g>

          <g class="hotspot" data-step="minor-optimized-resolution">
            <rect x="550" y="270" width="100" height="30" rx="5" class="resolution-path"></rect>
            <text x="600" y="286" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">print("Minor")</text>
            <rect x="545" y="265" width="110" height="40" fill="none" class="halo"></rect>
          </g>

          <!-- Success -->
          <path d="M600,300 L600,330 L800,330 L800,300" class="flow-arrow resolution-path"></path>
          <path d="M700,330 L700,360" class="flow-arrow resolution-path"></path>
          <g class="hotspot" data-step="success-resolution">
            <ellipse cx="700" cy="380" rx="60" ry="20" class="resolution-path"></ellipse>
            <text x="700" y="386" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">SUCCESS</text>
            <ellipse cx="700" cy="380" rx="65" ry="25" fill="none" class="halo"></ellipse>
          </g>
        </g>
      </svg>

      <!-- Performance Panel -->
      <div class="performance-panel">
        <div class="variable-title">Performance Metrics</div>
        <div class="metric-item">
          <span class="metric-label">Time Complexity:</span>
          <span class="metric-value" id="time-complexity">O(1)</span>
        </div>
        <div class="metric-item">
          <span class="metric-label">Space Complexity:</span>
          <span class="metric-value" id="space-complexity">O(1)</span>
        </div>
        <div class="metric-item">
          <span class="metric-label">Conditions Checked:</span>
          <span class="metric-value" id="conditions-checked">1</span>
        </div>
        <div class="metric-item">
          <span class="metric-label">Error Resistance:</span>
          <span class="metric-value" id="error-resistance">High</span>
        </div>
      </div>

      <!-- Code Execution Panel -->
      <div class="code-execution">
        <div style="color:var(--accent);font-weight:600;margin-bottom:8px;">Live Code Execution</div>
        <div class="code-line" id="line-1">try:</div>
        <div class="code-line" id="line-2">    age = int(input("Enter age: "))</div>
        <div class="code-line" id="line-3">except ValueError:</div>
        <div class="code-line" id="line-4">    age = 0</div>
        <div class="code-line" id="line-5"></div>
        <div class="code-line" id="line-6">if age >= 18:</div>
        <div class="code-line" id="line-7">    print("Adult")</div>
        <div class="code-line" id="line-8">else:</div>
        <div class="code-line" id="line-9">    print("Minor")</div>
      </div>

      <!-- Variable Tracker -->
      <div class="variable-tracker">
        <div class="variable-title">Variable Tracker</div>
        <div class="variable-item">
          <span class="variable-name">age</span>
          <span class="variable-value" id="age-value">undefined</span>
        </div>
        <div class="variable-item">
          <span class="variable-name">user_input</span>
          <span class="variable-value" id="input-value">"25"</span>
        </div>
        <div class="variable-item">
          <span class="variable-name">result</span>
          <span class="variable-value" id="result-value">pending</span>
        </div>
      </div>
    </div>

    <!-- Control Panel moved here - below flowchart -->
    <div class="control-panel">
      <div class="control-group">
        <div class="control-label">Animation Control</div>
        <div class="control-buttons">
          <button class="control-btn" id="playBtn">▶ Play</button>
          <button class="control-btn" id="pauseBtn">⏸ Pause</button>
          <button class="control-btn" id="stepBtn">⏭ Step</button>
          <button class="control-btn" id="resetBtn">🔄 Reset</button>
        </div>
      </div>
      <div class="control-group">
        <div class="control-label">Speed Control</div>
        <input type="range" class="speed-slider" id="speedSlider" min="0.5" max="3" step="0.5" value="1">
        <span id="speedDisplay">1x</span>
      </div>
      <div class="control-group">
        <div class="control-label">Debug Mode</div>
        <div class="control-buttons">
          <button class="control-btn" id="debugBtn">🐛 Debug</button>
          <button class="control-btn" id="traceBtn">📍 Trace</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Additional scenario contents will be similar but for different control structures -->
  <div class="scenario-content" id="loops-content">
    <h3>Loop Structures: for/while</h3>
    <div class="learning-grid">
      <div class="learning-card happy">
        <div class="card-title">✅ Happy Path: Efficient Loops</div>
        <div class="card-content">
          <strong>Best Practices:</strong><br>
          • Use for loops for known iterations<br>
          • Use while loops for condition-based iteration<br>
          • Prefer enumerate() over range(len())<br>
          • Use list comprehensions for simple transformations
        </div>
      </div>
      <div class="learning-card ineffective">
        <div class="card-title">❌ Ineffective Patterns</div>
        <div class="card-content">
          <strong>Common Mistakes:</strong><br>
          • Infinite loops without exit conditions<br>
          • Modifying lists while iterating<br>
          • Using wrong loop type for the task<br>
          • Nested loops with O(n²) when O(n) possible
        </div>
      </div>
      <div class="learning-card resolution">
        <div class="card-title">🔧 Resolution Strategies</div>
        <div class="card-content">
          <strong>How to Fix:</strong><br>
          • Always ensure loop termination conditions<br>
          • Use iterators for safe modification<br>
          • Choose appropriate loop construct<br>
          • Optimize with built-in functions
        </div>
      </div>
    </div>
  </div>

  <div class="scenario-content" id="nested-content">
    <h3>Nested Structures: Loops within Conditions</h3>
    <div class="flow-diagram" id="nested-diagram">
      <svg viewBox="0 0 800 600" role="img">
        <!-- Happy Path: Efficient Nested Structure -->
        <g class="path-flow happy-flow" data-path="happy">
          <!-- Outer loop start -->
          <g class="hotspot" data-step="nested-outer-loop-happy">
            <rect x="50" y="50" width="120" height="40" rx="8" class="happy-path"></rect>
            <text x="110" y="72" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">for i in range(3):</text>
            <rect x="45" y="45" width="130" height="50" fill="none" class="halo"></rect>
          </g>
          
          <!-- Condition check -->
          <path d="M110,90 L110,120" class="flow-arrow happy-path"></path>
          <g class="hotspot" data-step="nested-condition-happy">
            <polygon points="110,120 140,140 110,160 80,140" class="happy-path"></polygon>
            <text x="110" y="142" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">i % 2 == 0?</text>
            <polygon points="110,115 145,140 110,165 75,140" fill="none" class="halo"></polygon>
          </g>
          
          <!-- Inner loop (when condition true) -->
          <path d="M140,140 L200,140" class="flow-arrow happy-path"></path>
          <text x="170" y="135" style="fill:var(--happy);font-size:8px;font-weight:600">Yes</text>
          <g class="hotspot" data-step="nested-inner-loop-happy">
            <rect x="200" y="120" width="120" height="40" rx="8" class="happy-path"></rect>
            <text x="260" y="142" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">for j in range(2):</text>
            <rect x="195" y="115" width="130" height="50" fill="none" class="halo"></rect>
          </g>
          
          <!-- Output -->
          <path d="M260,160 L260,190" class="flow-arrow happy-path"></path>
          <g class="hotspot" data-step="nested-output-happy">
            <rect x="210" y="190" width="100" height="30" rx="5" class="happy-path"></rect>
            <text x="260" y="207" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">print(i, j)</text>
            <rect x="205" y="185" width="110" height="40" fill="none" class="halo"></rect>
          </g>
        </g>

        <!-- Ineffective Path: Poor Nested Structure -->
        <g class="path-flow ineffective-flow" data-path="ineffective" style="display:none">
          <!-- Unnecessary nested loops -->
          <g class="hotspot" data-step="bad-nested-start-ineffective">
            <rect x="400" y="50" width="150" height="40" rx="8" class="ineffective-path"></rect>
            <text x="475" y="72" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">for i in range(100):</text>
            <rect x="395" y="45" width="160" height="50" fill="none" class="halo"></rect>
          </g>
          
          <!-- Unnecessary inner loop -->
          <path d="M475,90 L475,120" class="flow-arrow ineffective-path"></path>
          <g class="hotspot" data-step="bad-inner-loop-ineffective">
            <rect x="400" y="120" width="150" height="40" rx="8" class="ineffective-path"></rect>
            <text x="475" y="142" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">for j in range(100):</text>
            <rect x="395" y="115" width="160" height="50" fill="none" class="halo"></rect>
          </g>
          
          <!-- O(n²) operation inside -->
          <path d="M475,160 L475,190" class="flow-arrow ineffective-path"></path>
          <g class="hotspot" data-step="expensive-operation-ineffective">
            <rect x="400" y="190" width="150" height="40" rx="8" class="ineffective-path"></rect>
            <text x="475" y="207" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">expensive_function()</text>
            <text x="475" y="219" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600"># O(n²) complexity!</text>
            <rect x="395" y="185" width="160" height="50" fill="none" class="halo"></rect>
          </g>
        </g>

        <!-- Resolution Path: Optimized Structure -->
        <g class="path-flow resolution-flow" data-path="resolution" style="display:none">
          <!-- List comprehension alternative -->
          <g class="hotspot" data-step="optimized-comprehension-resolution">
            <rect x="100" y="300" width="200" height="50" rx="8" class="resolution-path"></rect>
            <text x="200" y="320" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">result = [(i, j) for i in range(3)</text>
            <text x="200" y="335" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">if i % 2 == 0 for j in range(2)]</text>
            <rect x="95" y="295" width="210" height="60" fill="none" class="halo"></rect>
          </g>
          
          <!-- Early termination -->
          <path d="M200,350 L200,380" class="flow-arrow resolution-path"></path>
          <g class="hotspot" data-step="early-termination-resolution">
            <rect x="150" y="380" width="100" height="30" rx="5" class="resolution-path"></rect>
            <text x="200" y="397" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">O(n) complexity</text>
            <rect x="145" y="375" width="110" height="40" fill="none" class="halo"></rect>
          </g>
        </g>
      </svg>
    </div>

    <div class="learning-grid">
      <div class="learning-card happy">
        <div class="card-title">✅ Happy Path: Smart Nesting</div>
        <div class="card-content">
          <strong>Efficient Patterns:</strong><br>
          • Minimize nesting depth (max 3 levels)<br>
          • Use early termination with break/continue<br>
          • Combine conditions to reduce branches<br>
          • Consider list comprehensions for simple cases
        </div>
      </div>
      <div class="learning-card ineffective">
        <div class="card-title">❌ Ineffective: Deep Nesting</div>
        <div class="card-content">
          <strong>Performance Killers:</strong><br>
          • Unnecessary nested loops (O(n²) → O(n³))<br>
          • Deep indentation (5+ levels)<br>
          • Repeated expensive operations inside loops<br>
          • No early termination conditions
        </div>
      </div>
      <div class="learning-card resolution">
        <div class="card-title">🔧 Resolution: Optimization</div>
        <div class="card-content">
          <strong>How to Fix:</strong><br>
          • Use list/dict comprehensions<br>
          • Extract expensive operations outside loops<br>
          • Implement early termination<br>
          • Consider itertools for complex iterations
        </div>
      </div>
    </div>
  </div>

  <div class="scenario-content" id="control-content">
    <h3>break/continue Statements: Flow Control</h3>
    <div class="flow-diagram" id="control-diagram">
      <svg viewBox="0 0 800 500" role="img">
        <!-- Happy Path: Proper break/continue usage -->
        <g class="path-flow happy-flow" data-path="happy">
          <!-- Loop with break -->
          <g class="hotspot" data-step="loop-with-break-happy">
            <rect x="50" y="50" width="120" height="40" rx="8" class="happy-path"></rect>
            <text x="110" y="72" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">for item in items:</text>
            <rect x="45" y="45" width="130" height="50" fill="none" class="halo"></rect>
          </g>
          
          <!-- Condition for break -->
          <path d="M110,90 L110,120" class="flow-arrow happy-path"></path>
          <g class="hotspot" data-step="break-condition-happy">
            <polygon points="110,120 140,140 110,160 80,140" class="happy-path"></polygon>
            <text x="110" y="142" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">found target?</text>
            <polygon points="110,115 145,140 110,165 75,140" fill="none" class="halo"></polygon>
          </g>
          
          <!-- Break statement -->
          <path d="M140,140 L200,140" class="flow-arrow happy-path"></path>
          <text x="170" y="135" style="fill:var(--happy);font-size:8px;font-weight:600">Yes</text>
          <g class="hotspot" data-step="break-statement-happy">
            <rect x="200" y="120" width="80" height="40" rx="8" class="happy-path"></rect>
            <text x="240" y="142" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">break</text>
            <rect x="195" y="115" width="90" height="50" fill="none" class="halo"></rect>
          </g>
          
          <!-- Continue path -->
          <path d="M80,140 L20,140 L20,200 L110,200" class="flow-arrow happy-path"></path>
          <text x="50" y="135" style="fill:var(--happy);font-size:8px;font-weight:600">No</text>
          <g class="hotspot" data-step="continue-statement-happy">
            <rect x="70" y="180" width="80" height="40" rx="8" class="happy-path"></rect>
            <text x="110" y="202" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">continue</text>
            <rect x="65" y="175" width="90" height="50" fill="none" class="halo"></rect>
          </g>
        </g>

        <!-- Ineffective Path: Misused break/continue -->
        <g class="path-flow ineffective-flow" data-path="ineffective" style="display:none">
          <!-- Infinite loop potential -->
          <g class="hotspot" data-step="infinite-loop-ineffective">
            <rect x="400" y="50" width="150" height="40" rx="8" class="ineffective-path"></rect>
            <text x="475" y="72" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">while True: # No break!</text>
            <rect x="395" y="45" width="160" height="50" fill="none" class="halo"></rect>
          </g>
          
          <!-- Unreachable code -->
          <path d="M475,90 L475,120" class="flow-arrow ineffective-path"></path>
          <g class="hotspot" data-step="unreachable-code-ineffective">
            <rect x="400" y="120" width="150" height="60" rx="8" class="ineffective-path"></rect>
            <text x="475" y="140" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">continue</text>
            <text x="475" y="155" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">print("Never reached")</text>
            <text x="475" y="170" style="fill:#fff;font-size:7px;text-anchor:middle;font-weight:600"># Dead code!</text>
            <rect x="395" y="115" width="160" height="70" fill="none" class="halo"></rect>
          </g>
        </g>
      </svg>
    </div>

    <div class="learning-grid">
      <div class="learning-card happy">
        <div class="card-title">✅ Happy Path: Strategic Control</div>
        <div class="card-content">
          <strong>Best Practices:</strong><br>
          • Use break for early termination when target found<br>
          • Use continue to skip invalid items<br>
          • Always ensure loop termination conditions<br>
          • Document why break/continue is needed
        </div>
      </div>
      <div class="learning-card ineffective">
        <div class="card-title">❌ Ineffective: Control Chaos</div>
        <div class="card-content">
          <strong>Common Mistakes:</strong><br>
          • Infinite loops without break conditions<br>
          • Unreachable code after continue<br>
          • Overusing break/continue instead of proper logic<br>
          • Break/continue in wrong loop level
        </div>
      </div>
      <div class="learning-card resolution">
        <div class="card-title">🔧 Resolution: Smart Control</div>
        <div class="card-content">
          <strong>How to Fix:</strong><br>
          • Always plan termination conditions<br>
          • Use labeled breaks for nested loops<br>
          • Prefer clear conditional logic<br>
          • Test for infinite loop scenarios
        </div>
      </div>
    </div>
  </div>

  <div class="scenario-content" id="patterns-content">
    <h3>Pattern Examples: Real-world Applications</h3>
    <div class="flow-diagram" id="patterns-diagram">
      <svg viewBox="0 0 900 600" role="img">
        <!-- Pattern generation flowchart -->
        <g class="path-flow happy-flow" data-path="happy">
          <!-- Initialize -->
          <g class="hotspot" data-step="pattern-init-happy">
            <ellipse cx="150" cy="50" rx="80" ry="25" class="happy-path"></ellipse>
            <text x="150" y="56" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">Pattern Generator</text>
            <ellipse cx="150" cy="50" rx="85" ry="30" fill="none" class="halo"></ellipse>
          </g>
          
          <!-- Get pattern type -->
          <path d="M150,75 L150,105" class="flow-arrow happy-path"></path>
          <g class="hotspot" data-step="pattern-input-happy">
            <polygon points="100,105 200,105 190,135 110,135" class="happy-path"></polygon>
            <text x="150" y="121" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">pattern_type = input()</text>
            <polygon points="95,100 205,100 195,140 105,140" fill="none" class="halo"></polygon>
          </g>
          
          <!-- Decision: which pattern -->
          <path d="M150,135 L150,165" class="flow-arrow happy-path"></path>
          <g class="hotspot" data-step="pattern-decision-happy">
            <polygon points="150,165 190,195 150,225 110,195" class="happy-path"></polygon>
            <text x="150" y="191" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">pattern</text>
            <text x="150" y="203" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">type?</text>
            <polygon points="150,160 195,195 150,230 105,195" fill="none" class="halo"></polygon>
          </g>
          
          <!-- Star pattern -->
          <path d="M190,195 L280,195 L280,250" class="flow-arrow happy-path"></path>
          <text x="235" y="190" style="fill:var(--happy);font-size:8px;font-weight:600">stars</text>
          <g class="hotspot" data-step="star-pattern-happy">
            <rect x="230" y="250" width="100" height="60" rx="8" class="happy-path"></rect>
            <text x="280" y="270" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">for i in range(5):</text>
            <text x="280" y="285" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">  print('*' * (i+1))</text>
            <text x="280" y="300" style="fill:#fff;font-size:7px;text-anchor:middle;font-weight:600"># Prints triangle</text>
            <rect x="225" y="245" width="110" height="70" fill="none" class="halo"></rect>
          </g>
          
          <!-- Number pattern -->
          <path d="M110,195 L20,195 L20,250" class="flow-arrow happy-path"></path>
          <text x="65" y="190" style="fill:var(--happy);font-size:8px;font-weight:600">numbers</text>
          <g class="hotspot" data-step="number-pattern-happy">
            <rect x="0" y="250" width="120" height="60" rx="8" class="happy-path"></rect>
            <text x="60" y="270" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">for i in range(1, 6):</text>
            <text x="60" y="285" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">  print(' '.join(str(j)</text>
            <text x="60" y="300" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600">    for j in range(1, i+1)))</text>
            <rect x="-5" y="245" width="130" height="70" fill="none" class="halo"></rect>
          </g>
        </g>

        <!-- Factorial calculation -->
        <g class="path-flow resolution-flow" data-path="resolution" style="display:none">
          <g class="hotspot" data-step="factorial-start-resolution">
            <ellipse cx="450" cy="50" rx="80" ry="25" class="resolution-path"></ellipse>
            <text x="450" y="56" style="fill:#fff;font-size:10px;text-anchor:middle;font-weight:600">Factorial Calculator</text>
            <ellipse cx="450" cy="50" rx="85" ry="30" fill="none" class="halo"></ellipse>
          </g>
          
          <!-- Initialize variables -->
          <path d="M450,75 L450,105" class="flow-arrow resolution-path"></path>
          <g class="hotspot" data-step="factorial-init-resolution">
            <rect x="380" y="105" width="140" height="40" rx="8" class="resolution-path"></rect>
            <text x="450" y="120" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">n = int(input())</text>
            <text x="450" y="135" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">factorial = 1</text>
            <rect x="375" y="100" width="150" height="50" fill="none" class="halo"></rect>
          </g>
          
          <!-- Loop for calculation -->
          <path d="M450,145 L450,175" class="flow-arrow resolution-path"></path>
          <g class="hotspot" data-step="factorial-loop-resolution">
            <rect x="380" y="175" width="140" height="60" rx="8" class="resolution-path"></rect>
            <text x="450" y="195" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">for i in range(1, n+1):</text>
            <text x="450" y="210" style="fill:#fff;font-size:9px;text-anchor:middle;font-weight:600">  factorial *= i</text>
            <text x="450" y="225" style="fill:#fff;font-size:8px;text-anchor:middle;font-weight:600"># Efficient O(n)</text>
            <rect x="375" y="170" width="150" height="70" fill="none" class="halo"></rect>
          </g>
        </g>
      </svg>
    </div>

    <div class="learning-grid">
      <div class="learning-card happy">
        <div class="card-title">✅ Pattern Generation</div>
        <div class="card-content">
          <strong>Star Triangle:</strong><br>
          <code style="font-size:0.8em;">
          *<br>
          **<br>
          ***<br>
          ****<br>
          *****
          </code>
        </div>
      </div>
      <div class="learning-card ineffective">
        <div class="card-title">📊 Number Pyramid</div>
        <div class="card-content">
          <strong>Pascal's Triangle:</strong><br>
          <code style="font-size:0.8em;">
          1<br>
          1 2<br>
          1 2 3<br>
          1 2 3 4<br>
          1 2 3 4 5
          </code>
        </div>
      </div>
      <div class="learning-card resolution">
        <div class="card-title">🔢 Factorial Calculation</div>
        <div class="card-content">
          <strong>Mathematical Pattern:</strong><br>
          5! = 5 × 4 × 3 × 2 × 1 = 120<br>
          <em>Efficient iterative solution</em>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="site-footer"><small>© 2025 Beyond Dictionary</small></footer>

<div id="tooltip" class="tooltip" role="status" aria-live="polite"></div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // Step data for different paths
  const stepData = {
    'conditional-start-happy': {
      title: 'Optimal Start',
      path: 'Happy Path',
      description: 'Clean program initialization with proper structure and clear intent. The happy path starts with confidence.',
      code: 'def main():\n    """Well-structured entry point"""',
      complexity: 'Time: O(1), Space: O(1), Reliability: High'
    },
    'input-age-happy': {
      title: 'Safe Input Collection',
      path: 'Happy Path', 
      description: 'Proper input handling with type conversion. This approach assumes valid input but could be enhanced with validation.',
      code: 'age = int(input("Enter your age: "))',
      complexity: 'Input validation ensures type safety and prevents runtime errors'
    },
    'age-check-happy': {
      title: 'Clean Condition Check',
      path: 'Happy Path',
      description: 'Simple, readable condition that clearly expresses the business logic. Single comparison is efficient and maintainable.',
      code: 'if age >= 18:',
      complexity: 'Single comparison: O(1) time, optimal for binary decisions'
    },
    'adult-output-happy': {
      title: 'Successful Branch Execution',
      path: 'Happy Path',
      description: 'Clear output with descriptive message. The happy path produces expected results efficiently.',
      code: 'print("You are an adult")',
      complexity: 'Direct output: O(1) operation, user-friendly messaging'
    },
    'minor-output-happy': {
      title: 'Alternative Branch Execution', 
      path: 'Happy Path',
      description: 'Handles the alternative case cleanly. Both branches provide clear feedback to the user.',
      code: 'print("You are a minor")',
      complexity: 'Consistent output pattern, maintains user experience quality'
    },
    'conditional-end-happy': {
      title: 'Successful Completion',
      path: 'Happy Path',
      description: 'Program completes successfully with all paths properly handled. Clean termination indicates good design.',
      code: 'return 0  # Success',
      complexity: 'Graceful termination, all resources properly managed'
    },

    'conditional-start-ineffective': {
      title: 'Poor Initialization',
      path: 'Ineffective Path',
      description: 'Starting without proper planning or structure. This sets up for potential problems down the line.',
      code: '# No function structure, global scope',
      complexity: 'Global scope creates maintenance issues and testing difficulties'
    },
    'bad-input-ineffective': {
      title: 'Dangerous Input Handling',
      path: 'Ineffective Path',
      description: 'No input validation! This will crash when user enters non-numeric data. A critical flaw in many beginner programs.',
      code: 'age = input()  # Returns string!',
      complexity: 'Type mismatch inevitable, crash probability: Very High'
    },
    'multiple-ifs-ineffective': {
      title: 'Redundant Conditions',
      path: 'Ineffective Path',
      description: 'Using multiple if statements instead of if-else. This checks both conditions unnecessarily and could execute both branches.',
      code: 'if age >= 18: print("Adult")\nif age < 18: print("Minor")',
      complexity: 'Redundant operations: 2x complexity, potential for both outputs'
    },
    'error-state-ineffective': {
      title: 'Runtime Error',
      path: 'Ineffective Path',
      description: 'TypeError occurs because string and integer cannot be compared. This demonstrates why input validation is crucial.',
      code: 'TypeError: \'>=\' not supported between \'str\' and \'int\'',
      complexity: 'Program crash: Recovery impossible, user experience destroyed'
    },
    'crash-ineffective': {
      title: 'Program Failure',
      path: 'Ineffective Path', 
      description: 'Complete program failure due to poor error handling. The user gets no useful output and may lose trust in the software.',
      code: 'sys.exit(1)  # Unhandled exception',
      complexity: 'Total failure: O(∞) recovery time, data potentially lost'
    },

    'conditional-start-resolution': {
      title: 'Robust Initialization',
      path: 'Resolution Path',
      description: 'Starting with proper error handling strategy and defensive programming mindset. Planning for edge cases from the beginning.',
      code: 'def safe_age_checker():\n    """Handles edge cases gracefully"""',
      complexity: 'Defensive design: Prevents issues before they occur'
    },
    'input-validation-resolution': {
      title: 'Defensive Input Handling',
      path: 'Resolution Path',
      description: 'Using try-except to handle invalid input gracefully. This prevents crashes and provides better user experience.',
      code: 'try:\n    age = int(input("Enter age: "))\nexcept ValueError:\n    age = 0',
      complexity: 'Exception handling: O(1) normal case, graceful error recovery'
    },
    'optimized-conditional-resolution': {
      title: 'Optimized Decision Logic',
      path: 'Resolution Path',
      description: 'Single condition check with proper if-else structure. This is more efficient and eliminates redundant checks.',
      code: 'if age >= 18:',
      complexity: 'Single evaluation: O(1), mutually exclusive branches guaranteed'
    },
    'adult-optimized-resolution': {
      title: 'Efficient True Branch',
      path: 'Resolution Path',
      description: 'Clean execution of the adult case with proper validation already completed. No redundant checks needed.',
      code: 'print("You are an adult")',
      complexity: 'Optimal path: Direct execution, no additional validation needed'
    },
    'minor-optimized-resolution': {
      title: 'Efficient False Branch',
      path: 'Resolution Path',
      description: 'The else clause ensures exactly one branch executes. This is more efficient than checking both conditions.',
      code: 'else:\n    print("You are a minor")',
      complexity: 'Guaranteed execution: No additional conditions, optimal flow control'
    },
    'success-resolution': {
      title: 'Robust Completion',
      path: 'Resolution Path',
      description: 'Program completes successfully with all edge cases handled. Proper error handling makes the code production-ready.',
      code: 'return True  # Success with error handling',
      complexity: 'Reliable termination: Error-resistant, maintainable, scalable'
    }
  };

  // Animation and control logic
  let currentPath = 'happy';
  let isPlaying = false;
  let currentStep = 0;
  let animationSpeed = 1;

  // Initialize tooltips
  const tip = document.getElementById('tooltip');
  let currentTooltipTimeout;

  const showTip = (stepId, x, y, isMobile = false) => {
    const step = stepData[stepId];
    if (!step) return;
    
    clearTimeout(currentTooltipTimeout);
    
    tip.innerHTML = `
      <div class="tooltip-title">${step.title}</div>
      <div class="tooltip-path ${step.path.toLowerCase().replace(' ', '-')}">${step.path}</div>
      <div class="tooltip-description">${step.description}</div>
      <div class="tooltip-code">${step.code}</div>
      <div class="tooltip-complexity"><strong>💡 Analysis:</strong> ${step.complexity}</div>
    `;
    tip.style.display = 'block';
    
    if (window.innerWidth <= 768 || isMobile) {
      tip.style.position = 'fixed';
      tip.style.top = '10px';
      tip.style.left = '10px';
      tip.style.right = '10px';
      tip.style.width = 'auto';
      tip.style.maxWidth = 'none';
      return;
    }
    
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    const tipWidth = 400;
    const tipHeight = 300;
    
    let left = x + 15;
    let top = y - 150;
    
    if (left + tipWidth > viewportWidth - 20) {
      left = x - tipWidth - 15;
    }
    if (left < 10) {
      left = 10;
    }
    
    if (top < 10) {
      top = y + 15;
    }
    if (top + tipHeight > viewportHeight - 20) {
      top = viewportHeight - tipHeight - 20;
    }
    
    tip.style.left = left + 'px';
    tip.style.top = top + 'px';
  };
  
  const hideTip = () => { 
    clearTimeout(currentTooltipTimeout);
    currentTooltipTimeout = setTimeout(() => {
      tip.style.display = 'none';
    }, 100);
  };

  // Add event listeners to all hotspots
  document.querySelectorAll('.hotspot').forEach(h => {
    const stepId = h.getAttribute('data-step');
    if (stepId && stepData[stepId]) {
      h.addEventListener('mouseenter', e => {
        clearTimeout(currentTooltipTimeout);
        showTip(stepId, e.clientX, e.clientY);
      });
      h.addEventListener('mouseleave', hideTip);
      h.addEventListener('click', e => {
        e.preventDefault();
        showTip(stepId, e.clientX, e.clientY, window.innerWidth <= 768);
        setTimeout(hideTip, 5000);
      });
    }
  });

  // Path switching logic
  document.querySelectorAll('.path-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      // Update active button
      document.querySelectorAll('.path-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      
      // Get selected path
      currentPath = btn.getAttribute('data-path');
      
      // Show/hide appropriate flow
      document.querySelectorAll('.path-flow').forEach(flow => {
        flow.style.display = flow.getAttribute('data-path') === currentPath ? 'block' : 'none';
      });
      
      // Update metrics
      updateMetrics();
    });
  });

  // Scenario tab switching
  document.querySelectorAll('.scenario-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.scenario-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.scenario-content').forEach(c => c.classList.remove('active'));
      
      tab.classList.add('active');
      const scenario = tab.getAttribute('data-scenario');
      document.getElementById(`${scenario}-content`).classList.add('active');
    });
  });

  // Control panel functionality
  document.getElementById('playBtn').addEventListener('click', () => {
    console.log('Play clicked - starting animation');
    if (!isPlaying) {
      startAnimation();
      // Visual feedback
      document.getElementById('playBtn').style.background = 'var(--happy)';
      document.getElementById('playBtn').innerHTML = '⏸ Playing...';
    }
  });

  document.getElementById('pauseBtn').addEventListener('click', () => {
    console.log('Pause clicked');
    pauseAnimation();
    document.getElementById('playBtn').style.background = 'var(--accent)';
    document.getElementById('playBtn').innerHTML = '▶ Play';
  });

  document.getElementById('stepBtn').addEventListener('click', () => {
    console.log('Step clicked - advancing one step');
    stepAnimation();
    // Add visual feedback to step button
    document.getElementById('stepBtn').style.transform = 'scale(0.95)';
    setTimeout(() => {
      document.getElementById('stepBtn').style.transform = 'scale(1)';
    }, 150);
  });

  document.getElementById('resetBtn').addEventListener('click', () => {
    console.log('Reset clicked - returning to start');
    resetAnimation();
    document.getElementById('playBtn').style.background = 'var(--accent)';
    document.getElementById('playBtn').innerHTML = '▶ Play';
    // Add visual feedback
    document.getElementById('resetBtn').style.transform = 'rotate(180deg)';
    setTimeout(() => {
      document.getElementById('resetBtn').style.transform = 'rotate(0deg)';
    }, 300);
  });

  document.getElementById('speedSlider').addEventListener('input', (e) => {
    animationSpeed = parseFloat(e.target.value);
    document.getElementById('speedDisplay').textContent = `${animationSpeed}x`;
  });

  function updateMetrics() {
    const metrics = {
      happy: {
        time: 'O(1)',
        space: 'O(1)', 
        conditions: '1',
        resistance: 'Medium'
      },
      ineffective: {
        time: 'O(n)',
        space: 'O(1)',
        conditions: '2',
        resistance: 'Low'
      },
      resolution: {
        time: 'O(1)',
        space: 'O(1)',
        conditions: '1',
        resistance: 'High'
      }
    };

    const current = metrics[currentPath];
    document.getElementById('time-complexity').textContent = current.time;
    document.getElementById('space-complexity').textContent = current.space;
    document.getElementById('conditions-checked').textContent = current.conditions;
    document.getElementById('error-resistance').textContent = current.resistance;

    // Update metric colors based on path
    const valueElements = document.querySelectorAll('.metric-value');
    valueElements.forEach(el => {
      el.className = `metric-value metric-${currentPath}`;
    });
  }

  function startAnimation() {
    if (isPlaying) return;
    isPlaying = true;
    document.getElementById('playBtn').classList.add('active');
    animateCurrentPath();
  }

  function pauseAnimation() {
    isPlaying = false;
    document.getElementById('playBtn').classList.remove('active');
    document.getElementById('pauseBtn').classList.add('paused');
    setTimeout(() => {
      document.getElementById('pauseBtn').classList.remove('paused');
    }, 1000);
  }

  function stepAnimation() {
    currentStep++;
    highlightCurrentStep();
    updateVariables();
    updateCodeExecution();
  }

  function resetAnimation() {
    isPlaying = false;
    currentStep = 0;
    document.getElementById('playBtn').classList.remove('active');
    clearAllHighlights();
    updateVariables();
    updateCodeExecution();
  }

  function animateCurrentPath() {
    if (!isPlaying) return;
    
    stepAnimation();
    
    // Continue animation if not at end
    if (currentStep < getMaxStepsForPath() && isPlaying) {
      setTimeout(() => {
        animateCurrentPath();
      }, 1000 / animationSpeed);
    } else {
      isPlaying = false;
      document.getElementById('playBtn').classList.remove('active');
    }
  }

  function getMaxStepsForPath() {
    const maxSteps = {
      happy: 6,
      ineffective: 5,
      resolution: 6
    };
    return maxSteps[currentPath] || 6;
  }

  function highlightCurrentStep() {
    // Clear previous highlights
    clearAllHighlights();
    
    // Get current path steps
    const pathSteps = getStepsForPath();
    if (currentStep < pathSteps.length) {
      const stepElement = document.querySelector(`[data-step="${pathSteps[currentStep]}"]`);
      if (stepElement) {
        // Add strong visual highlight
        stepElement.classList.add('executing', 'current-step');
        
        // Scroll element into view with smooth animation
        stepElement.scrollIntoView({ 
          behavior: 'smooth', 
          block: 'center',
          inline: 'center'
        });
        
        // Highlight connecting arrows
        highlightConnectingArrows(stepElement);
        
        // Update status
        console.log(`Executing step ${currentStep + 1}: ${pathSteps[currentStep]}`);
        
        // Add mobile-friendly highlight indicator
        if (window.innerWidth <= 768) {
          const indicator = document.createElement('div');
          indicator.className = 'mobile-step-indicator';
          indicator.style.cssText = `
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          `;
          indicator.textContent = `Step ${currentStep + 1}: ${pathSteps[currentStep].replace(/-/g, ' ')}`;
          document.body.appendChild(indicator);
          
          setTimeout(() => {
            indicator.remove();
          }, 3000);
        }
        
        // Remove executing class but keep success
        setTimeout(() => {
          stepElement.classList.remove('executing');
          stepElement.classList.add('success-state');
          setTimeout(() => {
            stepElement.classList.remove('success-state', 'current-step');
          }, 1000);
        }, 2000);
      }
    }
  }

  function highlightConnectingArrows(element) {
    // Find and animate arrows connected to current element
    const arrows = document.querySelectorAll('.flow-arrow');
    arrows.forEach(arrow => {
      const rect1 = element.getBoundingClientRect();
      const rect2 = arrow.getBoundingClientRect();
      
      // Simple proximity check - if arrow is near current element
      if (Math.abs(rect1.left - rect2.left) < 100 && Math.abs(rect1.top - rect2.top) < 100) {
        arrow.classList.add('animated-flow');
        setTimeout(() => {
          arrow.classList.remove('animated-flow');
        }, 2000);
      }
    });
  }

  function clearAllHighlights() {
    document.querySelectorAll('.executing, .error-state, .success-state, .current-step').forEach(el => {
      el.classList.remove('executing', 'error-state', 'success-state', 'current-step');
    });
    document.querySelectorAll('.code-line').forEach(line => {
      line.classList.remove('executing', 'error');
    });
    document.querySelectorAll('.animated-flow').forEach(arrow => {
      arrow.classList.remove('animated-flow');
    });
  }

  function getStepsForPath() {
    const currentScenario = document.querySelector('.scenario-tab.active').getAttribute('data-scenario');
    
    const steps = {
      conditional: {
        happy: [
          'conditional-start-happy',
          'input-age-happy', 
          'age-check-happy',
          'adult-output-happy',
          'minor-output-happy',
          'conditional-end-happy'
        ],
        ineffective: [
          'conditional-start-ineffective',
          'bad-input-ineffective',
          'multiple-ifs-ineffective', 
          'error-state-ineffective',
          'crash-ineffective'
        ],
        resolution: [
          'conditional-start-resolution',
          'input-validation-resolution',
          'optimized-conditional-resolution',
          'adult-optimized-resolution',
          'minor-optimized-resolution',
          'success-resolution'
        ]
      },
      nested: {
        happy: [
          'nested-outer-loop-happy',
          'nested-condition-happy',
          'nested-inner-loop-happy',
          'nested-output-happy'
        ],
        ineffective: [
          'bad-nested-start-ineffective',
          'bad-inner-loop-ineffective',
          'expensive-operation-ineffective'
        ],
        resolution: [
          'optimized-comprehension-resolution',
          'early-termination-resolution'
        ]
      },
      control: {
        happy: [
          'loop-with-break-happy',
          'break-condition-happy',
          'break-statement-happy',
          'continue-statement-happy'
        ],
        ineffective: [
          'infinite-loop-ineffective',
          'unreachable-code-ineffective'
        ]
      },
      patterns: {
        happy: [
          'pattern-init-happy',
          'pattern-input-happy',
          'pattern-decision-happy',
          'star-pattern-happy',
          'number-pattern-happy'
        ],
        resolution: [
          'factorial-start-resolution',
          'factorial-init-resolution',
          'factorial-loop-resolution'
        ]
      }
    };
    
    return steps[currentScenario]?.[currentPath] || [];
  }

  function updateCodeExecution() {
    const codeLines = {
      happy: [
        'age = int(input("Enter age: "))',
        'if age >= 18:',
        '    print("Adult")',
        'else:',
        '    print("Minor")'
      ],
      ineffective: [
        'age = input()  # No validation!',
        'if age >= 18: print("Adult")',
        'if age < 18: print("Minor")',
        '# TypeError occurs here!',
        '# Program crashes'
      ],
      resolution: [
        'try:',
        '    age = int(input("Enter age: "))',
        'except ValueError:',
        '    age = 0',
        'if age >= 18:',
        '    print("Adult")',
        'else:',
        '    print("Minor")'
      ]
    };

    const lines = codeLines[currentPath] || [];
    const codeContainer = document.querySelector('.code-execution');
    
    codeContainer.innerHTML = `
      <div style="color:var(--accent);font-weight:600;margin-bottom:8px;">Live Code Execution - ${currentPath.charAt(0).toUpperCase() + currentPath.slice(1)} Path</div>
      ${lines.map((line, index) => 
        `<div class="code-line ${index === currentStep ? 'executing' : ''}" id="line-${index}">${line}</div>`
      ).join('')}
    `;
  }

  function updateVariables() {
    // Update variable tracker based on current step and path
    const variableStates = {
      happy: [
        { age: 'undefined', input: 'undefined', result: 'pending' },
        { age: 'undefined', input: '"25"', result: 'pending' },
        { age: '25', input: '"25"', result: 'pending' },
        { age: '25', input: '"25"', result: 'evaluating...' },
        { age: '25', input: '"25"', result: 'Adult' },
        { age: '25', input: '"25"', result: 'Adult' }
      ],
      ineffective: [
        { age: 'undefined', input: 'undefined', result: 'pending' },
        { age: '"25"', input: '"25"', result: 'pending' },
        { age: '"25"', input: '"25"', result: 'ERROR' },
        { age: '"25"', input: '"25"', result: 'TypeError' },
        { age: 'undefined', input: 'undefined', result: 'CRASHED' }
      ],
      resolution: [
        { age: 'undefined', input: 'undefined', result: 'pending' },
        { age: 'undefined', input: '"25"', result: 'pending' },
        { age: '25', input: '"25"', result: 'validated' },
        { age: '25', input: '"25"', result: 'evaluating...' },
        { age: '25', input: '"25"', result: 'Adult' },
        { age: '25', input: '"25"', result: 'Adult' }
      ]
    };

    const states = variableStates[currentPath] || variableStates.happy;
    const currentState = states[Math.min(currentStep, states.length - 1)];

    // Update with animation
    const ageEl = document.getElementById('age-value');
    const inputEl = document.getElementById('input-value');
    const resultEl = document.getElementById('result-value');

    if (ageEl && ageEl.textContent !== currentState.age) {
      ageEl.classList.add('changed');
      ageEl.textContent = currentState.age;
      setTimeout(() => ageEl.classList.remove('changed'), 500);
    }

    if (inputEl && inputEl.textContent !== currentState.input) {
      inputEl.classList.add('changed');
      inputEl.textContent = currentState.input;
      setTimeout(() => inputEl.classList.remove('changed'), 500);
    }

    if (resultEl && resultEl.textContent !== currentState.result) {
      resultEl.classList.add('changed');
      resultEl.textContent = currentState.result;
      setTimeout(() => resultEl.classList.remove('changed'), 500);
    }
  }

  // Initialize
  updateMetrics();
  updateVariables();
  updateCodeExecution();
  
  // Set up debug mode
  document.getElementById('debugBtn').addEventListener('click', () => {
    document.querySelector('.performance-panel').style.display = 
      document.querySelector('.performance-panel').style.display === 'none' ? 'block' : 'none';
  });

  document.getElementById('traceBtn').addEventListener('click', () => {
    // Add trace mode functionality
    document.querySelectorAll('.flow-arrow').forEach(arrow => {
      arrow.classList.toggle('animated-flow');
    });
  });
});
</script>
</body>
</html>